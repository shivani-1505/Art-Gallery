function s1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function lI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Om={exports:{}},bu={},Vm={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function o1(){if(rT)return Oe;rT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,P={};function M(j,Z,ce){this.props=j,this.context=Z,this.refs=P,this.updater=ce||S}M.prototype.isReactComponent={},M.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},M.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function O(){}O.prototype=M.prototype;function R(j,Z,ce){this.props=j,this.context=Z,this.refs=P,this.updater=ce||S}var D=R.prototype=new O;D.constructor=R,x(D,M.prototype),D.isPureReactComponent=!0;var B=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function C(j,Z,ce){var Se,De={},Be=null,Me=null;if(Z!=null)for(Se in Z.ref!==void 0&&(Me=Z.ref),Z.key!==void 0&&(Be=""+Z.key),Z)z.call(Z,Se)&&!L.hasOwnProperty(Se)&&(De[Se]=Z[Se]);var Le=arguments.length-2;if(Le===1)De.children=ce;else if(1<Le){for(var je=Array(Le),wt=0;wt<Le;wt++)je[wt]=arguments[wt+2];De.children=je}if(j&&j.defaultProps)for(Se in Le=j.defaultProps,Le)De[Se]===void 0&&(De[Se]=Le[Se]);return{$$typeof:n,type:j,key:Be,ref:Me,props:De,_owner:W.current}}function A(j,Z){return{$$typeof:n,type:j.type,key:Z,ref:j.ref,props:j.props,_owner:j._owner}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function V(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ce){return Z[ce]})}var U=/\/+/g;function k(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?V(""+j.key):Z.toString(36)}function ne(j,Z,ce,Se,De){var Be=typeof j;(Be==="undefined"||Be==="boolean")&&(j=null);var Me=!1;if(j===null)Me=!0;else switch(Be){case"string":case"number":Me=!0;break;case"object":switch(j.$$typeof){case n:case e:Me=!0}}if(Me)return Me=j,De=De(Me),j=Se===""?"."+k(Me,0):Se,B(De)?(ce="",j!=null&&(ce=j.replace(U,"$&/")+"/"),ne(De,Z,ce,"",function(wt){return wt})):De!=null&&(b(De)&&(De=A(De,ce+(!De.key||Me&&Me.key===De.key?"":(""+De.key).replace(U,"$&/")+"/")+j)),Z.push(De)),1;if(Me=0,Se=Se===""?".":Se+":",B(j))for(var Le=0;Le<j.length;Le++){Be=j[Le];var je=Se+k(Be,Le);Me+=ne(Be,Z,ce,je,De)}else if(je=w(j),typeof je=="function")for(j=je.call(j),Le=0;!(Be=j.next()).done;)Be=Be.value,je=Se+k(Be,Le++),Me+=ne(Be,Z,ce,je,De);else if(Be==="object")throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Me}function de(j,Z,ce){if(j==null)return j;var Se=[],De=0;return ne(j,Se,"","",function(Be){return Z.call(ce,Be,De++)}),Se}function Ee(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=ce)},function(ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=ce)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var he={current:null},H={transition:null},ie={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:H,ReactCurrentOwner:W};return Oe.Children={map:de,forEach:function(j,Z,ce){de(j,function(){Z.apply(this,arguments)},ce)},count:function(j){var Z=0;return de(j,function(){Z++}),Z},toArray:function(j){return de(j,function(Z){return Z})||[]},only:function(j){if(!b(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Oe.Component=M,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=R,Oe.StrictMode=r,Oe.Suspense=c,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Oe.cloneElement=function(j,Z,ce){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Se=x({},j.props),De=j.key,Be=j.ref,Me=j._owner;if(Z!=null){if(Z.ref!==void 0&&(Be=Z.ref,Me=W.current),Z.key!==void 0&&(De=""+Z.key),j.type&&j.type.defaultProps)var Le=j.type.defaultProps;for(je in Z)z.call(Z,je)&&!L.hasOwnProperty(je)&&(Se[je]=Z[je]===void 0&&Le!==void 0?Le[je]:Z[je])}var je=arguments.length-2;if(je===1)Se.children=ce;else if(1<je){Le=Array(je);for(var wt=0;wt<je;wt++)Le[wt]=arguments[wt+2];Se.children=Le}return{$$typeof:n,type:j.type,key:De,ref:Be,props:Se,_owner:Me}},Oe.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:o,_context:j},j.Consumer=j},Oe.createElement=C,Oe.createFactory=function(j){var Z=C.bind(null,j);return Z.type=j,Z},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(j){return{$$typeof:u,render:j}},Oe.isValidElement=b,Oe.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:Ee}},Oe.memo=function(j,Z){return{$$typeof:f,type:j,compare:Z===void 0?null:Z}},Oe.startTransition=function(j){var Z=H.transition;H.transition={};try{j()}finally{H.transition=Z}},Oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Oe.useCallback=function(j,Z){return he.current.useCallback(j,Z)},Oe.useContext=function(j){return he.current.useContext(j)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(j){return he.current.useDeferredValue(j)},Oe.useEffect=function(j,Z){return he.current.useEffect(j,Z)},Oe.useId=function(){return he.current.useId()},Oe.useImperativeHandle=function(j,Z,ce){return he.current.useImperativeHandle(j,Z,ce)},Oe.useInsertionEffect=function(j,Z){return he.current.useInsertionEffect(j,Z)},Oe.useLayoutEffect=function(j,Z){return he.current.useLayoutEffect(j,Z)},Oe.useMemo=function(j,Z){return he.current.useMemo(j,Z)},Oe.useReducer=function(j,Z,ce){return he.current.useReducer(j,Z,ce)},Oe.useRef=function(j){return he.current.useRef(j)},Oe.useState=function(j){return he.current.useState(j)},Oe.useSyncExternalStore=function(j,Z,ce){return he.current.useSyncExternalStore(j,Z,ce)},Oe.useTransition=function(){return he.current.useTransition()},Oe.version="18.2.0",Oe}var iT;function Fy(){return iT||(iT=1,Vm.exports=o1()),Vm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function a1(){if(sT)return bu;sT=1;var n=Fy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,f){var m,g={},w=null,S=null;f!==void 0&&(w=""+f),c.key!==void 0&&(w=""+c.key),c.ref!==void 0&&(S=c.ref);for(m in c)r.call(c,m)&&!o.hasOwnProperty(m)&&(g[m]=c[m]);if(u&&u.defaultProps)for(m in c=u.defaultProps,c)g[m]===void 0&&(g[m]=c[m]);return{$$typeof:e,type:u,key:w,ref:S,props:g,_owner:i.current}}return bu.Fragment=t,bu.jsx=l,bu.jsxs=l,bu}var oT;function l1(){return oT||(oT=1,Om.exports=a1()),Om.exports}var T=l1(),K=Fy();const nt=lI(K),u1=s1({__proto__:null,default:nt},[K]);var nh={},jm={exports:{}},Pn={},Fm={exports:{}},Um={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function c1(){return aT||(aT=1,function(n){function e(H,ie){var j=H.length;H.push(ie);e:for(;0<j;){var Z=j-1>>>1,ce=H[Z];if(0<i(ce,ie))H[Z]=ie,H[j]=ce,j=Z;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ie=H[0],j=H.pop();if(j!==ie){H[0]=j;e:for(var Z=0,ce=H.length,Se=ce>>>1;Z<Se;){var De=2*(Z+1)-1,Be=H[De],Me=De+1,Le=H[Me];if(0>i(Be,j))Me<ce&&0>i(Le,Be)?(H[Z]=Le,H[Me]=j,Z=Me):(H[Z]=Be,H[De]=j,Z=De);else if(Me<ce&&0>i(Le,j))H[Z]=Le,H[Me]=j,Z=Me;else break e}}return ie}function i(H,ie){var j=H.sortIndex-ie.sortIndex;return j!==0?j:H.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var c=[],f=[],m=1,g=null,w=3,S=!1,x=!1,P=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(H){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=H)r(f),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=t(f)}}function B(H){if(P=!1,D(H),!x)if(t(c)!==null)x=!0,Ee(z);else{var ie=t(f);ie!==null&&he(B,ie.startTime-H)}}function z(H,ie){x=!1,P&&(P=!1,O(C),C=-1),S=!0;var j=w;try{for(D(ie),g=t(c);g!==null&&(!(g.expirationTime>ie)||H&&!V());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,w=g.priorityLevel;var ce=Z(g.expirationTime<=ie);ie=n.unstable_now(),typeof ce=="function"?g.callback=ce:g===t(c)&&r(c),D(ie)}else r(c);g=t(c)}if(g!==null)var Se=!0;else{var De=t(f);De!==null&&he(B,De.startTime-ie),Se=!1}return Se}finally{g=null,w=j,S=!1}}var W=!1,L=null,C=-1,A=5,b=-1;function V(){return!(n.unstable_now()-b<A)}function U(){if(L!==null){var H=n.unstable_now();b=H;var ie=!0;try{ie=L(!0,H)}finally{ie?k():(W=!1,L=null)}}else W=!1}var k;if(typeof R=="function")k=function(){R(U)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,de=ne.port2;ne.port1.onmessage=U,k=function(){de.postMessage(null)}}else k=function(){M(U,0)};function Ee(H){L=H,W||(W=!0,k())}function he(H,ie){C=M(function(){H(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){x||S||(x=!0,Ee(z))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(H){switch(w){case 1:case 2:case 3:var ie=3;break;default:ie=w}var j=w;w=ie;try{return H()}finally{w=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,ie){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=w;w=H;try{return ie()}finally{w=j}},n.unstable_scheduleCallback=function(H,ie,j){var Z=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Z+j:Z):j=Z,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=j+ce,H={id:m++,callback:ie,priorityLevel:H,startTime:j,expirationTime:ce,sortIndex:-1},j>Z?(H.sortIndex=j,e(f,H),t(c)===null&&H===t(f)&&(P?(O(C),C=-1):P=!0,he(B,j-Z))):(H.sortIndex=ce,e(c,H),x||S||(x=!0,Ee(z))),H},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(H){var ie=w;return function(){var j=w;w=ie;try{return H.apply(this,arguments)}finally{w=j}}}}(Um)),Um}var lT;function d1(){return lT||(lT=1,Fm.exports=c1()),Fm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function h1(){if(uT)return Pn;uT=1;var n=Fy(),e=d1();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function w(s){return c.call(g,s)?!0:c.call(m,s)?!1:f.test(s)?g[s]=!0:(m[s]=!0,!1)}function S(s,a,d,p){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,a,d,p){if(a===null||typeof a>"u"||S(s,a,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function P(s,a,d,p,y,_,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=_,this.removeEmptyString=I}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){M[s]=new P(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];M[a]=new P(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){M[s]=new P(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){M[s]=new P(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){M[s]=new P(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){M[s]=new P(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){M[s]=new P(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){M[s]=new P(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){M[s]=new P(s,5,!1,s.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function R(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(O,R);M[a]=new P(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(O,R);M[a]=new P(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(O,R);M[a]=new P(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){M[s]=new P(s,1,!1,s.toLowerCase(),null,!1,!1)}),M.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){M[s]=new P(s,1,!1,s.toLowerCase(),null,!0,!0)});function D(s,a,d,p){var y=M.hasOwnProperty(a)?M[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(x(a,d,y,p)&&(d=null),p||y===null?w(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):y.mustUseProperty?s[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,p=y.attributeNamespace,d===null?s.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,p?s.setAttributeNS(p,a,d):s.setAttribute(a,d))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),H=Symbol.iterator;function ie(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var j=Object.assign,Z;function ce(s){if(Z===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||""}return`
`+Z+s}var Se=!1;function De(s,a){if(!s||Se)return"";Se=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var p=X}Reflect.construct(s,[],a)}else{try{a.call()}catch(X){p=X}s.call(a.prototype)}else{try{throw Error()}catch(X){p=X}s()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),_=p.stack.split(`
`),I=y.length-1,F=_.length-1;1<=I&&0<=F&&y[I]!==_[F];)F--;for(;1<=I&&0<=F;I--,F--)if(y[I]!==_[F]){if(I!==1||F!==1)do if(I--,F--,0>F||y[I]!==_[F]){var $=`
`+y[I].replace(" at new "," at ");return s.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",s.displayName)),$}while(1<=I&&0<=F);break}}}finally{Se=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?ce(s):""}function Be(s){switch(s.tag){case 5:return ce(s.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return s=De(s.type,!1),s;case 11:return s=De(s.type.render,!1),s;case 1:return s=De(s.type,!0),s;default:return""}}function Me(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case W:return"Portal";case A:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case ne:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case b:return(s._context.displayName||"Context")+".Provider";case U:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case de:return a=s.displayName||null,a!==null?a:Me(s.type)||"Memo";case Ee:a=s._payload,s=s._init;try{return Me(s(a))}catch{}}return null}function Le(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(a);case 8:return a===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wt(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $o(s){var a=wt(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(I){p=""+I,_.call(this,I)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ri(s){s._valueTracker||(s._valueTracker=$o(s))}function Wo(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),p="";return s&&(p=wt(s)?s.checked?"true":"false":s.value),s=p,s!==d?(a.setValue(s),!0):!1}function Ui(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function zs(s,a){var d=a.checked;return j({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Ho(s,a){var d=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;d=je(a.value!=null?a.value:d),s._wrapperState={initialChecked:p,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Dl(s,a){a=a.checked,a!=null&&D(s,"checked",a,!1)}function Ml(s,a){Dl(s,a);var d=je(a.value),p=a.type;if(d!=null)p==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Go(s,a.type,d):a.hasOwnProperty("defaultValue")&&Go(s,a.type,je(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Bc(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Go(s,a,d){(a!=="number"||Ui(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var ii=Array.isArray;function si(s,a,d,p){if(s=s.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=a.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&p&&(s[d].defaultSelected=!0)}else{for(d=""+je(d),a=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Ll(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function qo(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(ii(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:je(d)}}function Ko(s,a){var d=je(a.value),p=je(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),p!=null&&(s.defaultValue=""+p)}function Ol(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Rt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Rt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var oi,Vl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,p,y){MSApp.execUnsafeLocalFunction(function(){return s(a,d,p,y)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(oi=oi||document.createElement("div"),oi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=oi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Bi(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ws=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(s){Ws.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),$s[a]=$s[s]})});function jl(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||$s.hasOwnProperty(s)&&$s[s]?(""+a).trim():a+"px"}function Fl(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var p=d.indexOf("--")===0,y=jl(d,a[d],p);d==="float"&&(d="cssFloat"),p?s.setProperty(d,y):s[d]=y}}var Ul=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(s,a){if(a){if(Ul[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function zl(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hs=null;function Qo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yo=null,Wn=null,Pr=null;function Xo(s){if(s=hu(s)){if(typeof Yo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=yd(a),Yo(s.stateNode,s.type,a))}}function Rr(s){Wn?Pr?Pr.push(s):Pr=[s]:Wn=s}function $l(){if(Wn){var s=Wn,a=Pr;if(Pr=Wn=null,Xo(s),a)for(s=0;s<a.length;s++)Xo(a[s])}}function Gs(s,a){return s(a)}function Wl(){}var ai=!1;function Hl(s,a,d){if(ai)return s(a,d);ai=!0;try{return Gs(s,a,d)}finally{ai=!1,(Wn!==null||Pr!==null)&&(Wl(),$l())}}function Tt(s,a){var d=s.stateNode;if(d===null)return null;var p=yd(d);if(p===null)return null;d=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var Jo=!1;if(u)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Jo=!1}function qs(s,a,d,p,y,_,I,F,$){var X=Array.prototype.slice.call(arguments,3);try{a.apply(d,X)}catch(se){this.onError(se)}}var Ks=!1,Zo=null,lr=!1,Gl=null,cp={onError:function(s){Ks=!0,Zo=s}};function ea(s,a,d,p,y,_,I,F,$){Ks=!1,Zo=null,qs.apply(cp,arguments)}function zc(s,a,d,p,y,_,I,F,$){if(ea.apply(this,arguments),Ks){if(Ks){var X=Zo;Ks=!1,Zo=null}else throw Error(t(198));lr||(lr=!0,Gl=X)}}function ur(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function Qs(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function cr(s){if(ur(s)!==s)throw Error(t(188))}function $c(s){var a=s.alternate;if(!a){if(a=ur(s),a===null)throw Error(t(188));return a!==s?null:s}for(var d=s,p=a;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){d=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return cr(y),s;if(_===p)return cr(y),a;_=_.sibling}throw Error(t(188))}if(d.return!==p.return)d=y,p=_;else{for(var I=!1,F=y.child;F;){if(F===d){I=!0,d=y,p=_;break}if(F===p){I=!0,p=y,d=_;break}F=F.sibling}if(!I){for(F=_.child;F;){if(F===d){I=!0,d=_,p=y;break}if(F===p){I=!0,p=_,d=y;break}F=F.sibling}if(!I)throw Error(t(189))}}if(d.alternate!==p)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?s:a}function ql(s){return s=$c(s),s!==null?ta(s):null}function ta(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=ta(s);if(a!==null)return a;s=s.sibling}return null}var na=e.unstable_scheduleCallback,Kl=e.unstable_cancelCallback,Wc=e.unstable_shouldYield,dp=e.unstable_requestPaint,rt=e.unstable_now,Hc=e.unstable_getCurrentPriorityLevel,Ys=e.unstable_ImmediatePriority,zi=e.unstable_UserBlockingPriority,Hn=e.unstable_NormalPriority,Ql=e.unstable_LowPriority,Gc=e.unstable_IdlePriority,Xs=null,Mn=null;function qc(s){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Xs,s,void 0,(s.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Qc,Yl=Math.log,Kc=Math.LN2;function Qc(s){return s>>>=0,s===0?32:31-(Yl(s)/Kc|0)|0}var ra=64,ia=4194304;function $i(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Js(s,a){var d=s.pendingLanes;if(d===0)return 0;var p=0,y=s.suspendedLanes,_=s.pingedLanes,I=d&268435455;if(I!==0){var F=I&~y;F!==0?p=$i(F):(_&=I,_!==0&&(p=$i(_)))}else I=d&~y,I!==0?p=$i(I):_!==0&&(p=$i(_));if(p===0)return 0;if(a!==0&&a!==p&&(a&y)===0&&(y=p&-p,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if((p&4)!==0&&(p|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)d=31-gn(a),y=1<<d,p|=s[d],a&=~y;return p}function hp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(s,a){for(var d=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes;0<_;){var I=31-gn(_),F=1<<I,$=y[I];$===-1?((F&d)===0||(F&p)!==0)&&(y[I]=hp(F,a)):$<=a&&(s.expiredLanes|=F),_&=~F}}function Ln(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Zs(){var s=ra;return ra<<=1,(ra&4194240)===0&&(ra=64),s}function Wi(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Hi(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-gn(a),s[a]=d}function tt(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<d;){var y=31-gn(d),_=1<<y;a[y]=0,p[y]=-1,s[y]=-1,d&=~_}}function Gi(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var p=31-gn(d),y=1<<p;y&a|s[p]&a&&(s[p]|=a),d&=~y}}var ze=0;function qi(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Yc,sa,Xc,Jc,Zc,Xl=!1,kr=[],Kt=null,dr=null,hr=null,Ki=new Map,Gn=new Map,Nr=[],fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(s,a){switch(s){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Ki.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(a.pointerId)}}function En(s,a,d,p,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:a,domEventName:d,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},a!==null&&(a=hu(a),a!==null&&sa(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function pp(s,a,d,p,y){switch(a){case"focusin":return Kt=En(Kt,s,a,d,p,y),!0;case"dragenter":return dr=En(dr,s,a,d,p,y),!0;case"mouseover":return hr=En(hr,s,a,d,p,y),!0;case"pointerover":var _=y.pointerId;return Ki.set(_,En(Ki.get(_)||null,s,a,d,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Gn.set(_,En(Gn.get(_)||null,s,a,d,p,y)),!0}return!1}function td(s){var a=io(s.target);if(a!==null){var d=ur(a);if(d!==null){if(a=d.tag,a===13){if(a=Qs(d),a!==null){s.blockedOn=a,Zc(s.priority,function(){Xc(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ui(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=oa(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var p=new d.constructor(d.type,d);Hs=p,d.target.dispatchEvent(p),Hs=null}else return a=hu(d),a!==null&&sa(a),s.blockedOn=d,!1;a.shift()}return!0}function eo(s,a,d){ui(s)&&d.delete(a)}function nd(){Xl=!1,Kt!==null&&ui(Kt)&&(Kt=null),dr!==null&&ui(dr)&&(dr=null),hr!==null&&ui(hr)&&(hr=null),Ki.forEach(eo),Gn.forEach(eo)}function fr(s,a){s.blockedOn===a&&(s.blockedOn=null,Xl||(Xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nd)))}function pr(s){function a(y){return fr(y,s)}if(0<kr.length){fr(kr[0],s);for(var d=1;d<kr.length;d++){var p=kr[d];p.blockedOn===s&&(p.blockedOn=null)}}for(Kt!==null&&fr(Kt,s),dr!==null&&fr(dr,s),hr!==null&&fr(hr,s),Ki.forEach(a),Gn.forEach(a),d=0;d<Nr.length;d++)p=Nr[d],p.blockedOn===s&&(p.blockedOn=null);for(;0<Nr.length&&(d=Nr[0],d.blockedOn===null);)td(d),d.blockedOn===null&&Nr.shift()}var ci=B.ReactCurrentBatchConfig,Qi=!0;function ft(s,a,d,p){var y=ze,_=ci.transition;ci.transition=null;try{ze=1,Jl(s,a,d,p)}finally{ze=y,ci.transition=_}}function mp(s,a,d,p){var y=ze,_=ci.transition;ci.transition=null;try{ze=4,Jl(s,a,d,p)}finally{ze=y,ci.transition=_}}function Jl(s,a,d,p){if(Qi){var y=oa(s,a,d,p);if(y===null)Cp(s,a,p,to,d),ed(s,p);else if(pp(y,s,a,d,p))p.stopPropagation();else if(ed(s,p),a&4&&-1<fp.indexOf(s)){for(;y!==null;){var _=hu(y);if(_!==null&&Yc(_),_=oa(s,a,d,p),_===null&&Cp(s,a,p,to,d),_===y)break;y=_}y!==null&&p.stopPropagation()}else Cp(s,a,p,null,d)}}var to=null;function oa(s,a,d,p){if(to=null,s=Qo(p),s=io(s),s!==null)if(a=ur(s),a===null)s=null;else if(d=a.tag,d===13){if(s=Qs(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return to=s,null}function Zl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hc()){case Ys:return 1;case zi:return 4;case Hn:case Ql:return 16;case Gc:return 536870912;default:return 16}default:return 16}}var On=null,aa=null,Sn=null;function eu(){if(Sn)return Sn;var s,a=aa,d=a.length,p,y="value"in On?On.value:On.textContent,_=y.length;for(s=0;s<d&&a[s]===y[s];s++);var I=d-s;for(p=1;p<=I&&a[d-p]===y[_-p];p++);return Sn=y.slice(s,1<p?1-p:void 0)}function la(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Dr(){return!0}function tu(){return!1}function Qt(s){function a(d,p,y,_,I){this._reactName=d,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(d=s[F],this[F]=d?d(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Dr:tu,this.isPropagationStopped=tu,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),a}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Qt(mr),Mr=j({},mr,{view:0,detail:0}),gp=Qt(Mr),ca,di,Yi,no=j({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Yi&&(Yi&&s.type==="mousemove"?(ca=s.screenX-Yi.screenX,di=s.screenY-Yi.screenY):di=ca=0,Yi=s),ca)},movementY:function(s){return"movementY"in s?s.movementY:di}}),da=Qt(no),nu=j({},no,{dataTransfer:0}),rd=Qt(nu),ha=j({},Mr,{relatedTarget:0}),fa=Qt(ha),id=j({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),hi=Qt(id),sd=j({},mr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),od=Qt(sd),ad=j({},mr,{data:0}),ru=Qt(ad),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ud(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ld[s])?!!a[s]:!1}function Lr(){return ud}var h=j({},Mr,{key:function(s){if(s.key){var a=pa[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=la(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?yn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(s){return s.type==="keypress"?la(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?la(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v=Qt(h),E=j({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Qt(E),q=j({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),J=Qt(q),le=j({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ze=Qt(le),Nt=j({},no,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),He=Qt(Nt),Vt=[9,13,27,32],It=u&&"CompositionEvent"in window,qn=null;u&&"documentMode"in document&&(qn=document.documentMode);var Vn=u&&"TextEvent"in window&&!qn,ro=u&&(!It||qn&&8<qn&&11>=qn),ma=" ",Y_=!1;function X_(s,a){switch(s){case"keyup":return Vt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ga=!1;function nk(s,a){switch(s){case"compositionend":return J_(a);case"keypress":return a.which!==32?null:(Y_=!0,ma);case"textInput":return s=a.data,s===ma&&Y_?null:s;default:return null}}function rk(s,a){if(ga)return s==="compositionend"||!It&&X_(s,a)?(s=eu(),Sn=aa=On=null,ga=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ro&&a.locale!=="ko"?null:a.data;default:return null}}var ik={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ik[s.type]:a==="textarea"}function ew(s,a,d,p){Rr(p),a=pd(a,"onChange"),0<a.length&&(d=new ua("onChange","change",null,d,p),s.push({event:d,listeners:a}))}var iu=null,su=null;function sk(s){vw(s,0)}function cd(s){var a=Ta(s);if(Wo(a))return s}function ok(s,a){if(s==="change")return a}var tw=!1;if(u){var yp;if(u){var vp="oninput"in document;if(!vp){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),vp=typeof nw.oninput=="function"}yp=vp}else yp=!1;tw=yp&&(!document.documentMode||9<document.documentMode)}function rw(){iu&&(iu.detachEvent("onpropertychange",iw),su=iu=null)}function iw(s){if(s.propertyName==="value"&&cd(su)){var a=[];ew(a,su,s,Qo(s)),Hl(sk,a)}}function ak(s,a,d){s==="focusin"?(rw(),iu=a,su=d,iu.attachEvent("onpropertychange",iw)):s==="focusout"&&rw()}function lk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cd(su)}function uk(s,a){if(s==="click")return cd(a)}function ck(s,a){if(s==="input"||s==="change")return cd(a)}function dk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var gr=typeof Object.is=="function"?Object.is:dk;function ou(s,a){if(gr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),p=Object.keys(a);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var y=d[p];if(!c.call(a,y)||!gr(s[y],a[y]))return!1}return!0}function sw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ow(s,a){var d=sw(s);s=0;for(var p;d;){if(d.nodeType===3){if(p=s+d.textContent.length,s<=a&&p>=a)return{node:d,offset:a-s};s=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=sw(d)}}function aw(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?aw(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function lw(){for(var s=window,a=Ui();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Ui(s.document)}return a}function _p(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function hk(s){var a=lw(),d=s.focusedElem,p=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&aw(d.ownerDocument.documentElement,d)){if(p!==null&&_p(d)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var y=d.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!s.extend&&_>p&&(y=p,p=_,_=y),y=ow(d,_);var I=ow(d,p);y&&I&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==I.node||s.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),s.removeAllRanges(),_>p?(s.addRange(a),s.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var fk=u&&"documentMode"in document&&11>=document.documentMode,ya=null,wp=null,au=null,Tp=!1;function uw(s,a,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Tp||ya==null||ya!==Ui(p)||(p=ya,"selectionStart"in p&&_p(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),au&&ou(au,p)||(au=p,p=pd(wp,"onSelect"),0<p.length&&(a=new ua("onSelect","select",null,a,d),s.push({event:a,listeners:p}),a.target=ya)))}function dd(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var va={animationend:dd("Animation","AnimationEnd"),animationiteration:dd("Animation","AnimationIteration"),animationstart:dd("Animation","AnimationStart"),transitionend:dd("Transition","TransitionEnd")},Ep={},cw={};u&&(cw=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function hd(s){if(Ep[s])return Ep[s];if(!va[s])return s;var a=va[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in cw)return Ep[s]=a[d];return s}var dw=hd("animationend"),hw=hd("animationiteration"),fw=hd("animationstart"),pw=hd("transitionend"),mw=new Map,gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(s,a){mw.set(s,a),o(a,[s])}for(var Sp=0;Sp<gw.length;Sp++){var xp=gw[Sp],pk=xp.toLowerCase(),mk=xp[0].toUpperCase()+xp.slice(1);Xi(pk,"on"+mk)}Xi(dw,"onAnimationEnd"),Xi(hw,"onAnimationIteration"),Xi(fw,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(pw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(lu));function yw(s,a,d){var p=s.type||"unknown-event";s.currentTarget=d,zc(p,a,void 0,s),s.currentTarget=null}function vw(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var p=s[d],y=p.event;p=p.listeners;e:{var _=void 0;if(a)for(var I=p.length-1;0<=I;I--){var F=p[I],$=F.instance,X=F.currentTarget;if(F=F.listener,$!==_&&y.isPropagationStopped())break e;yw(y,F,X),_=$}else for(I=0;I<p.length;I++){if(F=p[I],$=F.instance,X=F.currentTarget,F=F.listener,$!==_&&y.isPropagationStopped())break e;yw(y,F,X),_=$}}}if(lr)throw s=Gl,lr=!1,Gl=null,s}function at(s,a){var d=a[Np];d===void 0&&(d=a[Np]=new Set);var p=s+"__bubble";d.has(p)||(_w(a,s,2,!1),d.add(p))}function Ip(s,a,d){var p=0;a&&(p|=4),_w(d,s,p,a)}var fd="_reactListening"+Math.random().toString(36).slice(2);function uu(s){if(!s[fd]){s[fd]=!0,r.forEach(function(d){d!=="selectionchange"&&(gk.has(d)||Ip(d,!1,s),Ip(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[fd]||(a[fd]=!0,Ip("selectionchange",!1,a))}}function _w(s,a,d,p){switch(Zl(a)){case 1:var y=ft;break;case 4:y=mp;break;default:y=Jl}d=y.bind(null,a,d,s),y=void 0,!Jo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(a,d,{capture:!0,passive:y}):s.addEventListener(a,d,!0):y!==void 0?s.addEventListener(a,d,{passive:y}):s.addEventListener(a,d,!1)}function Cp(s,a,d,p,y){var _=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var F=p.stateNode.containerInfo;if(F===y||F.nodeType===8&&F.parentNode===y)break;if(I===4)for(I=p.return;I!==null;){var $=I.tag;if(($===3||$===4)&&($=I.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;I=I.return}for(;F!==null;){if(I=io(F),I===null)return;if($=I.tag,$===5||$===6){p=_=I;continue e}F=F.parentNode}}p=p.return}Hl(function(){var X=_,se=Qo(d),oe=[];e:{var re=mw.get(s);if(re!==void 0){var fe=ua,_e=s;switch(s){case"keypress":if(la(d)===0)break e;case"keydown":case"keyup":fe=v;break;case"focusin":_e="focus",fe=fa;break;case"focusout":_e="blur",fe=fa;break;case"beforeblur":case"afterblur":fe=fa;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=J;break;case dw:case hw:case fw:fe=hi;break;case pw:fe=Ze;break;case"scroll":fe=gp;break;case"wheel":fe=He;break;case"copy":case"cut":case"paste":fe=od;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=N}var we=(a&4)!==0,Et=!we&&s==="scroll",Q=we?re!==null?re+"Capture":null:re;we=[];for(var G=X,Y;G!==null;){Y=G;var ae=Y.stateNode;if(Y.tag===5&&ae!==null&&(Y=ae,Q!==null&&(ae=Tt(G,Q),ae!=null&&we.push(cu(G,ae,Y)))),Et)break;G=G.return}0<we.length&&(re=new fe(re,_e,null,d,se),oe.push({event:re,listeners:we}))}}if((a&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",fe=s==="mouseout"||s==="pointerout",re&&d!==Hs&&(_e=d.relatedTarget||d.fromElement)&&(io(_e)||_e[fi]))break e;if((fe||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(_e=d.relatedTarget||d.toElement,fe=X,_e=_e?io(_e):null,_e!==null&&(Et=ur(_e),_e!==Et||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(fe=null,_e=X),fe!==_e)){if(we=da,ae="onMouseLeave",Q="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(we=N,ae="onPointerLeave",Q="onPointerEnter",G="pointer"),Et=fe==null?re:Ta(fe),Y=_e==null?re:Ta(_e),re=new we(ae,G+"leave",fe,d,se),re.target=Et,re.relatedTarget=Y,ae=null,io(se)===X&&(we=new we(Q,G+"enter",_e,d,se),we.target=Y,we.relatedTarget=Et,ae=we),Et=ae,fe&&_e)t:{for(we=fe,Q=_e,G=0,Y=we;Y;Y=_a(Y))G++;for(Y=0,ae=Q;ae;ae=_a(ae))Y++;for(;0<G-Y;)we=_a(we),G--;for(;0<Y-G;)Q=_a(Q),Y--;for(;G--;){if(we===Q||Q!==null&&we===Q.alternate)break t;we=_a(we),Q=_a(Q)}we=null}else we=null;fe!==null&&ww(oe,re,fe,we,!1),_e!==null&&Et!==null&&ww(oe,Et,_e,we,!0)}}e:{if(re=X?Ta(X):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var Te=ok;else if(Z_(re))if(tw)Te=ck;else{Te=lk;var Ie=ak}else(fe=re.nodeName)&&fe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Te=uk);if(Te&&(Te=Te(s,X))){ew(oe,Te,d,se);break e}Ie&&Ie(s,re,X),s==="focusout"&&(Ie=re._wrapperState)&&Ie.controlled&&re.type==="number"&&Go(re,"number",re.value)}switch(Ie=X?Ta(X):window,s){case"focusin":(Z_(Ie)||Ie.contentEditable==="true")&&(ya=Ie,wp=X,au=null);break;case"focusout":au=wp=ya=null;break;case"mousedown":Tp=!0;break;case"contextmenu":case"mouseup":case"dragend":Tp=!1,uw(oe,d,se);break;case"selectionchange":if(fk)break;case"keydown":case"keyup":uw(oe,d,se)}var Ce;if(It)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ga?X_(s,d)&&(Pe="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Pe="onCompositionStart");Pe&&(ro&&d.locale!=="ko"&&(ga||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ga&&(Ce=eu()):(On=se,aa="value"in On?On.value:On.textContent,ga=!0)),Ie=pd(X,Pe),0<Ie.length&&(Pe=new ru(Pe,s,null,d,se),oe.push({event:Pe,listeners:Ie}),Ce?Pe.data=Ce:(Ce=J_(d),Ce!==null&&(Pe.data=Ce)))),(Ce=Vn?nk(s,d):rk(s,d))&&(X=pd(X,"onBeforeInput"),0<X.length&&(se=new ru("onBeforeInput","beforeinput",null,d,se),oe.push({event:se,listeners:X}),se.data=Ce))}vw(oe,a)})}function cu(s,a,d){return{instance:s,listener:a,currentTarget:d}}function pd(s,a){for(var d=a+"Capture",p=[];s!==null;){var y=s,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=Tt(s,d),_!=null&&p.unshift(cu(s,_,y)),_=Tt(s,a),_!=null&&p.push(cu(s,_,y))),s=s.return}return p}function _a(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function ww(s,a,d,p,y){for(var _=a._reactName,I=[];d!==null&&d!==p;){var F=d,$=F.alternate,X=F.stateNode;if($!==null&&$===p)break;F.tag===5&&X!==null&&(F=X,y?($=Tt(d,_),$!=null&&I.unshift(cu(d,$,F))):y||($=Tt(d,_),$!=null&&I.push(cu(d,$,F)))),d=d.return}I.length!==0&&s.push({event:a,listeners:I})}var yk=/\r\n?/g,vk=/\u0000|\uFFFD/g;function Tw(s){return(typeof s=="string"?s:""+s).replace(yk,`
`).replace(vk,"")}function md(s,a,d){if(a=Tw(a),Tw(s)!==a&&d)throw Error(t(425))}function gd(){}var bp=null,Ap=null;function Pp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Rp=typeof setTimeout=="function"?setTimeout:void 0,_k=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(s){return Ew.resolve(null).then(s).catch(Tk)}:Rp;function Tk(s){setTimeout(function(){throw s})}function kp(s,a){var d=a,p=0;do{var y=d.nextSibling;if(s.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(p===0){s.removeChild(y),pr(a);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=y}while(d);pr(a)}function Ji(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Sw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var wa=Math.random().toString(36).slice(2),Or="__reactFiber$"+wa,du="__reactProps$"+wa,fi="__reactContainer$"+wa,Np="__reactEvents$"+wa,Ek="__reactListeners$"+wa,Sk="__reactHandles$"+wa;function io(s){var a=s[Or];if(a)return a;for(var d=s.parentNode;d;){if(a=d[fi]||d[Or]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=Sw(s);s!==null;){if(d=s[Or])return d;s=Sw(s)}return a}s=d,d=s.parentNode}return null}function hu(s){return s=s[Or]||s[fi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ta(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function yd(s){return s[du]||null}var Dp=[],Ea=-1;function Zi(s){return{current:s}}function lt(s){0>Ea||(s.current=Dp[Ea],Dp[Ea]=null,Ea--)}function it(s,a){Ea++,Dp[Ea]=s.current,s.current=a}var es={},nn=Zi(es),xn=Zi(!1),so=es;function Sa(s,a){var d=s.type.contextTypes;if(!d)return es;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in d)y[_]=a[_];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=y),y}function In(s){return s=s.childContextTypes,s!=null}function vd(){lt(xn),lt(nn)}function xw(s,a,d){if(nn.current!==es)throw Error(t(168));it(nn,a),it(xn,d)}function Iw(s,a,d){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(t(108,Le(s)||"Unknown",y));return j({},d,p)}function _d(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||es,so=nn.current,it(nn,s),it(xn,xn.current),!0}function Cw(s,a,d){var p=s.stateNode;if(!p)throw Error(t(169));d?(s=Iw(s,a,so),p.__reactInternalMemoizedMergedChildContext=s,lt(xn),lt(nn),it(nn,s)):lt(xn),it(xn,d)}var pi=null,wd=!1,Mp=!1;function bw(s){pi===null?pi=[s]:pi.push(s)}function xk(s){wd=!0,bw(s)}function ts(){if(!Mp&&pi!==null){Mp=!0;var s=0,a=ze;try{var d=pi;for(ze=1;s<d.length;s++){var p=d[s];do p=p(!0);while(p!==null)}pi=null,wd=!1}catch(y){throw pi!==null&&(pi=pi.slice(s+1)),na(Ys,ts),y}finally{ze=a,Mp=!1}}return null}var xa=[],Ia=0,Td=null,Ed=0,Kn=[],Qn=0,oo=null,mi=1,gi="";function ao(s,a){xa[Ia++]=Ed,xa[Ia++]=Td,Td=s,Ed=a}function Aw(s,a,d){Kn[Qn++]=mi,Kn[Qn++]=gi,Kn[Qn++]=oo,oo=s;var p=mi;s=gi;var y=32-gn(p)-1;p&=~(1<<y),d+=1;var _=32-gn(a)+y;if(30<_){var I=y-y%5;_=(p&(1<<I)-1).toString(32),p>>=I,y-=I,mi=1<<32-gn(a)+y|d<<y|p,gi=_+s}else mi=1<<_|d<<y|p,gi=s}function Lp(s){s.return!==null&&(ao(s,1),Aw(s,1,0))}function Op(s){for(;s===Td;)Td=xa[--Ia],xa[Ia]=null,Ed=xa[--Ia],xa[Ia]=null;for(;s===oo;)oo=Kn[--Qn],Kn[Qn]=null,gi=Kn[--Qn],Kn[Qn]=null,mi=Kn[--Qn],Kn[Qn]=null}var jn=null,Fn=null,pt=!1,yr=null;function Pw(s,a){var d=Zn(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Rw(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,jn=s,Fn=Ji(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,jn=s,Fn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=oo!==null?{id:mi,overflow:gi}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Zn(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,jn=s,Fn=null,!0):!1;default:return!1}}function Vp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function jp(s){if(pt){var a=Fn;if(a){var d=a;if(!Rw(s,a)){if(Vp(s))throw Error(t(418));a=Ji(d.nextSibling);var p=jn;a&&Rw(s,a)?Pw(p,d):(s.flags=s.flags&-4097|2,pt=!1,jn=s)}}else{if(Vp(s))throw Error(t(418));s.flags=s.flags&-4097|2,pt=!1,jn=s}}}function kw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jn=s}function Sd(s){if(s!==jn)return!1;if(!pt)return kw(s),pt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Pp(s.type,s.memoizedProps)),a&&(a=Fn)){if(Vp(s))throw Nw(),Error(t(418));for(;a;)Pw(s,a),a=Ji(a.nextSibling)}if(kw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Fn=Ji(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Fn=null}}else Fn=jn?Ji(s.stateNode.nextSibling):null;return!0}function Nw(){for(var s=Fn;s;)s=Ji(s.nextSibling)}function Ca(){Fn=jn=null,pt=!1}function Fp(s){yr===null?yr=[s]:yr.push(s)}var Ik=B.ReactCurrentBatchConfig;function vr(s,a){if(s&&s.defaultProps){a=j({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}var xd=Zi(null),Id=null,ba=null,Up=null;function Bp(){Up=ba=Id=null}function zp(s){var a=xd.current;lt(xd),s._currentValue=a}function $p(s,a,d){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===d)break;s=s.return}}function Aa(s,a){Id=s,Up=ba=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Cn=!0),s.firstContext=null)}function Yn(s){var a=s._currentValue;if(Up!==s)if(s={context:s,memoizedValue:a,next:null},ba===null){if(Id===null)throw Error(t(308));ba=s,Id.dependencies={lanes:0,firstContext:s}}else ba=ba.next=s;return a}var lo=null;function Wp(s){lo===null?lo=[s]:lo.push(s)}function Dw(s,a,d,p){var y=a.interleaved;return y===null?(d.next=d,Wp(a)):(d.next=y.next,y.next=d),a.interleaved=d,yi(s,p)}function yi(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var ns=!1;function Hp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mw(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function rs(s,a,d){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Qe&2)!==0){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,yi(s,d)}return y=p.interleaved,y===null?(a.next=a,Wp(p)):(a.next=y.next,y.next=a),p.interleaved=a,yi(s,d)}function Cd(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,d|=p,a.lanes=d,Gi(s,d)}}function Lw(s,a){var d=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var I={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?y=_=I:_=_.next=I,d=d.next}while(d!==null);_===null?y=_=a:_=_.next=a}else y=_=a;d={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function bd(s,a,d,p){var y=s.updateQueue;ns=!1;var _=y.firstBaseUpdate,I=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var $=F,X=$.next;$.next=null,I===null?_=X:I.next=X,I=$;var se=s.alternate;se!==null&&(se=se.updateQueue,F=se.lastBaseUpdate,F!==I&&(F===null?se.firstBaseUpdate=X:F.next=X,se.lastBaseUpdate=$))}if(_!==null){var oe=y.baseState;I=0,se=X=$=null,F=_;do{var re=F.lane,fe=F.eventTime;if((p&re)===re){se!==null&&(se=se.next={eventTime:fe,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var _e=s,we=F;switch(re=a,fe=d,we.tag){case 1:if(_e=we.payload,typeof _e=="function"){oe=_e.call(fe,oe,re);break e}oe=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,re=typeof _e=="function"?_e.call(fe,oe,re):_e,re==null)break e;oe=j({},oe,re);break e;case 2:ns=!0}}F.callback!==null&&F.lane!==0&&(s.flags|=64,re=y.effects,re===null?y.effects=[F]:re.push(F))}else fe={eventTime:fe,lane:re,tag:F.tag,payload:F.payload,callback:F.callback,next:null},se===null?(X=se=fe,$=oe):se=se.next=fe,I|=re;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;re=F,F=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);if(se===null&&($=oe),y.baseState=$,y.firstBaseUpdate=X,y.lastBaseUpdate=se,a=y.shared.interleaved,a!==null){y=a;do I|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);ho|=I,s.lanes=I,s.memoizedState=oe}}function Ow(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],y=p.callback;if(y!==null){if(p.callback=null,p=d,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Vw=new n.Component().refs;function Gp(s,a,d,p){a=s.memoizedState,d=d(p,a),d=d==null?a:j({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Ad={isMounted:function(s){return(s=s._reactInternals)?ur(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var p=_n(),y=as(s),_=vi(p,y);_.payload=a,d!=null&&(_.callback=d),a=rs(s,_,y),a!==null&&(Tr(a,s,y,p),Cd(a,s,y))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var p=_n(),y=as(s),_=vi(p,y);_.tag=1,_.payload=a,d!=null&&(_.callback=d),a=rs(s,_,y),a!==null&&(Tr(a,s,y,p),Cd(a,s,y))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=_n(),p=as(s),y=vi(d,p);y.tag=2,a!=null&&(y.callback=a),a=rs(s,y,p),a!==null&&(Tr(a,s,p,d),Cd(a,s,p))}};function jw(s,a,d,p,y,_,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,_,I):a.prototype&&a.prototype.isPureReactComponent?!ou(d,p)||!ou(y,_):!0}function Fw(s,a,d){var p=!1,y=es,_=a.contextType;return typeof _=="object"&&_!==null?_=Yn(_):(y=In(a)?so:nn.current,p=a.contextTypes,_=(p=p!=null)?Sa(s,y):es),a=new a(d,_),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ad,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=_),a}function Uw(s,a,d,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,p),a.state!==s&&Ad.enqueueReplaceState(a,a.state,null)}function qp(s,a,d,p){var y=s.stateNode;y.props=d,y.state=s.memoizedState,y.refs=Vw,Hp(s);var _=a.contextType;typeof _=="object"&&_!==null?y.context=Yn(_):(_=In(a)?so:nn.current,y.context=Sa(s,_)),y.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Gp(s,a,_,d),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Ad.enqueueReplaceState(y,y.state,null),bd(s,d,y,p),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function fu(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var p=d.stateNode}if(!p)throw Error(t(147,s));var y=p,_=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(I){var F=y.refs;F===Vw&&(F=y.refs={}),I===null?delete F[_]:F[_]=I},a._stringRef=_,a)}if(typeof s!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,s))}return s}function Pd(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Bw(s){var a=s._init;return a(s._payload)}function zw(s){function a(Q,G){if(s){var Y=Q.deletions;Y===null?(Q.deletions=[G],Q.flags|=16):Y.push(G)}}function d(Q,G){if(!s)return null;for(;G!==null;)a(Q,G),G=G.sibling;return null}function p(Q,G){for(Q=new Map;G!==null;)G.key!==null?Q.set(G.key,G):Q.set(G.index,G),G=G.sibling;return Q}function y(Q,G){return Q=us(Q,G),Q.index=0,Q.sibling=null,Q}function _(Q,G,Y){return Q.index=Y,s?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<G?(Q.flags|=2,G):Y):(Q.flags|=2,G)):(Q.flags|=1048576,G)}function I(Q){return s&&Q.alternate===null&&(Q.flags|=2),Q}function F(Q,G,Y,ae){return G===null||G.tag!==6?(G=Rm(Y,Q.mode,ae),G.return=Q,G):(G=y(G,Y),G.return=Q,G)}function $(Q,G,Y,ae){var Te=Y.type;return Te===L?se(Q,G,Y.props.children,ae,Y.key):G!==null&&(G.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ee&&Bw(Te)===G.type)?(ae=y(G,Y.props),ae.ref=fu(Q,G,Y),ae.return=Q,ae):(ae=Kd(Y.type,Y.key,Y.props,null,Q.mode,ae),ae.ref=fu(Q,G,Y),ae.return=Q,ae)}function X(Q,G,Y,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=km(Y,Q.mode,ae),G.return=Q,G):(G=y(G,Y.children||[]),G.return=Q,G)}function se(Q,G,Y,ae,Te){return G===null||G.tag!==7?(G=go(Y,Q.mode,ae,Te),G.return=Q,G):(G=y(G,Y),G.return=Q,G)}function oe(Q,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Rm(""+G,Q.mode,Y),G.return=Q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case z:return Y=Kd(G.type,G.key,G.props,null,Q.mode,Y),Y.ref=fu(Q,null,G),Y.return=Q,Y;case W:return G=km(G,Q.mode,Y),G.return=Q,G;case Ee:var ae=G._init;return oe(Q,ae(G._payload),Y)}if(ii(G)||ie(G))return G=go(G,Q.mode,Y,null),G.return=Q,G;Pd(Q,G)}return null}function re(Q,G,Y,ae){var Te=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Te!==null?null:F(Q,G,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return Y.key===Te?$(Q,G,Y,ae):null;case W:return Y.key===Te?X(Q,G,Y,ae):null;case Ee:return Te=Y._init,re(Q,G,Te(Y._payload),ae)}if(ii(Y)||ie(Y))return Te!==null?null:se(Q,G,Y,ae,null);Pd(Q,Y)}return null}function fe(Q,G,Y,ae,Te){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Q=Q.get(Y)||null,F(G,Q,""+ae,Te);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case z:return Q=Q.get(ae.key===null?Y:ae.key)||null,$(G,Q,ae,Te);case W:return Q=Q.get(ae.key===null?Y:ae.key)||null,X(G,Q,ae,Te);case Ee:var Ie=ae._init;return fe(Q,G,Y,Ie(ae._payload),Te)}if(ii(ae)||ie(ae))return Q=Q.get(Y)||null,se(G,Q,ae,Te,null);Pd(G,ae)}return null}function _e(Q,G,Y,ae){for(var Te=null,Ie=null,Ce=G,Pe=G=0,Ut=null;Ce!==null&&Pe<Y.length;Pe++){Ce.index>Pe?(Ut=Ce,Ce=null):Ut=Ce.sibling;var Ye=re(Q,Ce,Y[Pe],ae);if(Ye===null){Ce===null&&(Ce=Ut);break}s&&Ce&&Ye.alternate===null&&a(Q,Ce),G=_(Ye,G,Pe),Ie===null?Te=Ye:Ie.sibling=Ye,Ie=Ye,Ce=Ut}if(Pe===Y.length)return d(Q,Ce),pt&&ao(Q,Pe),Te;if(Ce===null){for(;Pe<Y.length;Pe++)Ce=oe(Q,Y[Pe],ae),Ce!==null&&(G=_(Ce,G,Pe),Ie===null?Te=Ce:Ie.sibling=Ce,Ie=Ce);return pt&&ao(Q,Pe),Te}for(Ce=p(Q,Ce);Pe<Y.length;Pe++)Ut=fe(Ce,Q,Pe,Y[Pe],ae),Ut!==null&&(s&&Ut.alternate!==null&&Ce.delete(Ut.key===null?Pe:Ut.key),G=_(Ut,G,Pe),Ie===null?Te=Ut:Ie.sibling=Ut,Ie=Ut);return s&&Ce.forEach(function(cs){return a(Q,cs)}),pt&&ao(Q,Pe),Te}function we(Q,G,Y,ae){var Te=ie(Y);if(typeof Te!="function")throw Error(t(150));if(Y=Te.call(Y),Y==null)throw Error(t(151));for(var Ie=Te=null,Ce=G,Pe=G=0,Ut=null,Ye=Y.next();Ce!==null&&!Ye.done;Pe++,Ye=Y.next()){Ce.index>Pe?(Ut=Ce,Ce=null):Ut=Ce.sibling;var cs=re(Q,Ce,Ye.value,ae);if(cs===null){Ce===null&&(Ce=Ut);break}s&&Ce&&cs.alternate===null&&a(Q,Ce),G=_(cs,G,Pe),Ie===null?Te=cs:Ie.sibling=cs,Ie=cs,Ce=Ut}if(Ye.done)return d(Q,Ce),pt&&ao(Q,Pe),Te;if(Ce===null){for(;!Ye.done;Pe++,Ye=Y.next())Ye=oe(Q,Ye.value,ae),Ye!==null&&(G=_(Ye,G,Pe),Ie===null?Te=Ye:Ie.sibling=Ye,Ie=Ye);return pt&&ao(Q,Pe),Te}for(Ce=p(Q,Ce);!Ye.done;Pe++,Ye=Y.next())Ye=fe(Ce,Q,Pe,Ye.value,ae),Ye!==null&&(s&&Ye.alternate!==null&&Ce.delete(Ye.key===null?Pe:Ye.key),G=_(Ye,G,Pe),Ie===null?Te=Ye:Ie.sibling=Ye,Ie=Ye);return s&&Ce.forEach(function(i1){return a(Q,i1)}),pt&&ao(Q,Pe),Te}function Et(Q,G,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===L&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:e:{for(var Te=Y.key,Ie=G;Ie!==null;){if(Ie.key===Te){if(Te=Y.type,Te===L){if(Ie.tag===7){d(Q,Ie.sibling),G=y(Ie,Y.props.children),G.return=Q,Q=G;break e}}else if(Ie.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ee&&Bw(Te)===Ie.type){d(Q,Ie.sibling),G=y(Ie,Y.props),G.ref=fu(Q,Ie,Y),G.return=Q,Q=G;break e}d(Q,Ie);break}else a(Q,Ie);Ie=Ie.sibling}Y.type===L?(G=go(Y.props.children,Q.mode,ae,Y.key),G.return=Q,Q=G):(ae=Kd(Y.type,Y.key,Y.props,null,Q.mode,ae),ae.ref=fu(Q,G,Y),ae.return=Q,Q=ae)}return I(Q);case W:e:{for(Ie=Y.key;G!==null;){if(G.key===Ie)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){d(Q,G.sibling),G=y(G,Y.children||[]),G.return=Q,Q=G;break e}else{d(Q,G);break}else a(Q,G);G=G.sibling}G=km(Y,Q.mode,ae),G.return=Q,Q=G}return I(Q);case Ee:return Ie=Y._init,Et(Q,G,Ie(Y._payload),ae)}if(ii(Y))return _e(Q,G,Y,ae);if(ie(Y))return we(Q,G,Y,ae);Pd(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,G!==null&&G.tag===6?(d(Q,G.sibling),G=y(G,Y),G.return=Q,Q=G):(d(Q,G),G=Rm(Y,Q.mode,ae),G.return=Q,Q=G),I(Q)):d(Q,G)}return Et}var Pa=zw(!0),$w=zw(!1),pu={},Vr=Zi(pu),mu=Zi(pu),gu=Zi(pu);function uo(s){if(s===pu)throw Error(t(174));return s}function Kp(s,a){switch(it(gu,a),it(mu,s),it(Vr,pu),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:kt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=kt(a,s)}lt(Vr),it(Vr,a)}function Ra(){lt(Vr),lt(mu),lt(gu)}function Ww(s){uo(gu.current);var a=uo(Vr.current),d=kt(a,s.type);a!==d&&(it(mu,s),it(Vr,d))}function Qp(s){mu.current===s&&(lt(Vr),lt(mu))}var mt=Zi(0);function Rd(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Yp=[];function Xp(){for(var s=0;s<Yp.length;s++)Yp[s]._workInProgressVersionPrimary=null;Yp.length=0}var kd=B.ReactCurrentDispatcher,Jp=B.ReactCurrentBatchConfig,co=0,gt=null,Dt=null,jt=null,Nd=!1,yu=!1,vu=0,Ck=0;function rn(){throw Error(t(321))}function Zp(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!gr(s[d],a[d]))return!1;return!0}function em(s,a,d,p,y,_){if(co=_,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,kd.current=s===null||s.memoizedState===null?Rk:kk,s=d(p,y),yu){_=0;do{if(yu=!1,vu=0,25<=_)throw Error(t(301));_+=1,jt=Dt=null,a.updateQueue=null,kd.current=Nk,s=d(p,y)}while(yu)}if(kd.current=Ld,a=Dt!==null&&Dt.next!==null,co=0,jt=Dt=gt=null,Nd=!1,a)throw Error(t(300));return s}function tm(){var s=vu!==0;return vu=0,s}function jr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?gt.memoizedState=jt=s:jt=jt.next=s,jt}function Xn(){if(Dt===null){var s=gt.alternate;s=s!==null?s.memoizedState:null}else s=Dt.next;var a=jt===null?gt.memoizedState:jt.next;if(a!==null)jt=a,Dt=s;else{if(s===null)throw Error(t(310));Dt=s,s={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},jt===null?gt.memoizedState=jt=s:jt=jt.next=s}return jt}function _u(s,a){return typeof a=="function"?a(s):a}function nm(s){var a=Xn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var p=Dt,y=p.baseQueue,_=d.pending;if(_!==null){if(y!==null){var I=y.next;y.next=_.next,_.next=I}p.baseQueue=y=_,d.pending=null}if(y!==null){_=y.next,p=p.baseState;var F=I=null,$=null,X=_;do{var se=X.lane;if((co&se)===se)$!==null&&($=$.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:s(p,X.action);else{var oe={lane:se,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};$===null?(F=$=oe,I=p):$=$.next=oe,gt.lanes|=se,ho|=se}X=X.next}while(X!==null&&X!==_);$===null?I=p:$.next=F,gr(p,a.memoizedState)||(Cn=!0),a.memoizedState=p,a.baseState=I,a.baseQueue=$,d.lastRenderedState=p}if(s=d.interleaved,s!==null){y=s;do _=y.lane,gt.lanes|=_,ho|=_,y=y.next;while(y!==s)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function rm(s){var a=Xn(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var p=d.dispatch,y=d.pending,_=a.memoizedState;if(y!==null){d.pending=null;var I=y=y.next;do _=s(_,I.action),I=I.next;while(I!==y);gr(_,a.memoizedState)||(Cn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),d.lastRenderedState=_}return[_,p]}function Hw(){}function Gw(s,a){var d=gt,p=Xn(),y=a(),_=!gr(p.memoizedState,y);if(_&&(p.memoizedState=y,Cn=!0),p=p.queue,im(Qw.bind(null,d,p,s),[s]),p.getSnapshot!==a||_||jt!==null&&jt.memoizedState.tag&1){if(d.flags|=2048,wu(9,Kw.bind(null,d,p,y,a),void 0,null),Ft===null)throw Error(t(349));(co&30)!==0||qw(d,a,y)}return y}function qw(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function Kw(s,a,d,p){a.value=d,a.getSnapshot=p,Yw(a)&&Xw(s)}function Qw(s,a,d){return d(function(){Yw(a)&&Xw(s)})}function Yw(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!gr(s,d)}catch{return!0}}function Xw(s){var a=yi(s,1);a!==null&&Tr(a,s,1,-1)}function Jw(s){var a=jr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:s},a.queue=s,s=s.dispatch=Pk.bind(null,gt,s),[a.memoizedState,s]}function wu(s,a,d,p){return s={tag:s,create:a,destroy:d,deps:p,next:null},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(p=d.next,d.next=s,s.next=p,a.lastEffect=s)),s}function Zw(){return Xn().memoizedState}function Dd(s,a,d,p){var y=jr();gt.flags|=s,y.memoizedState=wu(1|a,d,void 0,p===void 0?null:p)}function Md(s,a,d,p){var y=Xn();p=p===void 0?null:p;var _=void 0;if(Dt!==null){var I=Dt.memoizedState;if(_=I.destroy,p!==null&&Zp(p,I.deps)){y.memoizedState=wu(a,d,_,p);return}}gt.flags|=s,y.memoizedState=wu(1|a,d,_,p)}function e0(s,a){return Dd(8390656,8,s,a)}function im(s,a){return Md(2048,8,s,a)}function t0(s,a){return Md(4,2,s,a)}function n0(s,a){return Md(4,4,s,a)}function r0(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function i0(s,a,d){return d=d!=null?d.concat([s]):null,Md(4,4,r0.bind(null,a,s),d)}function sm(){}function s0(s,a){var d=Xn();a=a===void 0?null:a;var p=d.memoizedState;return p!==null&&a!==null&&Zp(a,p[1])?p[0]:(d.memoizedState=[s,a],s)}function o0(s,a){var d=Xn();a=a===void 0?null:a;var p=d.memoizedState;return p!==null&&a!==null&&Zp(a,p[1])?p[0]:(s=s(),d.memoizedState=[s,a],s)}function a0(s,a,d){return(co&21)===0?(s.baseState&&(s.baseState=!1,Cn=!0),s.memoizedState=d):(gr(d,a)||(d=Zs(),gt.lanes|=d,ho|=d,s.baseState=!0),a)}function bk(s,a){var d=ze;ze=d!==0&&4>d?d:4,s(!0);var p=Jp.transition;Jp.transition={};try{s(!1),a()}finally{ze=d,Jp.transition=p}}function l0(){return Xn().memoizedState}function Ak(s,a,d){var p=as(s);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},u0(s))c0(a,d);else if(d=Dw(s,a,d,p),d!==null){var y=_n();Tr(d,s,p,y),d0(d,a,p)}}function Pk(s,a,d){var p=as(s),y={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(u0(s))c0(a,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var I=a.lastRenderedState,F=_(I,d);if(y.hasEagerState=!0,y.eagerState=F,gr(F,I)){var $=a.interleaved;$===null?(y.next=y,Wp(a)):(y.next=$.next,$.next=y),a.interleaved=y;return}}catch{}finally{}d=Dw(s,a,y,p),d!==null&&(y=_n(),Tr(d,s,p,y),d0(d,a,p))}}function u0(s){var a=s.alternate;return s===gt||a!==null&&a===gt}function c0(s,a){yu=Nd=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function d0(s,a,d){if((d&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,d|=p,a.lanes=d,Gi(s,d)}}var Ld={readContext:Yn,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},Rk={readContext:Yn,useCallback:function(s,a){return jr().memoizedState=[s,a===void 0?null:a],s},useContext:Yn,useEffect:e0,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,Dd(4194308,4,r0.bind(null,a,s),d)},useLayoutEffect:function(s,a){return Dd(4194308,4,s,a)},useInsertionEffect:function(s,a){return Dd(4,2,s,a)},useMemo:function(s,a){var d=jr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var p=jr();return a=d!==void 0?d(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=Ak.bind(null,gt,s),[p.memoizedState,s]},useRef:function(s){var a=jr();return s={current:s},a.memoizedState=s},useState:Jw,useDebugValue:sm,useDeferredValue:function(s){return jr().memoizedState=s},useTransition:function(){var s=Jw(!1),a=s[0];return s=bk.bind(null,s[1]),jr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var p=gt,y=jr();if(pt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),Ft===null)throw Error(t(349));(co&30)!==0||qw(p,a,d)}y.memoizedState=d;var _={value:d,getSnapshot:a};return y.queue=_,e0(Qw.bind(null,p,_,s),[s]),p.flags|=2048,wu(9,Kw.bind(null,p,_,d,a),void 0,null),d},useId:function(){var s=jr(),a=Ft.identifierPrefix;if(pt){var d=gi,p=mi;d=(p&~(1<<32-gn(p)-1)).toString(32)+d,a=":"+a+"R"+d,d=vu++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=Ck++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},kk={readContext:Yn,useCallback:s0,useContext:Yn,useEffect:im,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:o0,useReducer:nm,useRef:Zw,useState:function(){return nm(_u)},useDebugValue:sm,useDeferredValue:function(s){var a=Xn();return a0(a,Dt.memoizedState,s)},useTransition:function(){var s=nm(_u)[0],a=Xn().memoizedState;return[s,a]},useMutableSource:Hw,useSyncExternalStore:Gw,useId:l0,unstable_isNewReconciler:!1},Nk={readContext:Yn,useCallback:s0,useContext:Yn,useEffect:im,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:o0,useReducer:rm,useRef:Zw,useState:function(){return rm(_u)},useDebugValue:sm,useDeferredValue:function(s){var a=Xn();return Dt===null?a.memoizedState=s:a0(a,Dt.memoizedState,s)},useTransition:function(){var s=rm(_u)[0],a=Xn().memoizedState;return[s,a]},useMutableSource:Hw,useSyncExternalStore:Gw,useId:l0,unstable_isNewReconciler:!1};function ka(s,a){try{var d="",p=a;do d+=Be(p),p=p.return;while(p);var y=d}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:a,stack:y,digest:null}}function om(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function am(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var Dk=typeof WeakMap=="function"?WeakMap:Map;function h0(s,a,d){d=vi(-1,d),d.tag=3,d.payload={element:null};var p=a.value;return d.callback=function(){zd||(zd=!0,Em=p),am(s,a)},d}function f0(s,a,d){d=vi(-1,d),d.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;d.payload=function(){return p(y)},d.callback=function(){am(s,a)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){am(s,a),typeof p!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),d}function p0(s,a,d){var p=s.pingCache;if(p===null){p=s.pingCache=new Dk;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(d)||(y.add(d),s=qk.bind(null,s,a,d),a.then(s,s))}function m0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function g0(s,a,d,p,y){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=vi(-1,1),a.tag=2,rs(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var Mk=B.ReactCurrentOwner,Cn=!1;function vn(s,a,d,p){a.child=s===null?$w(a,null,d,p):Pa(a,s.child,d,p)}function y0(s,a,d,p,y){d=d.render;var _=a.ref;return Aa(a,y),p=em(s,a,d,p,_,y),d=tm(),s!==null&&!Cn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,_i(s,a,y)):(pt&&d&&Lp(a),a.flags|=1,vn(s,a,p,y),a.child)}function v0(s,a,d,p,y){if(s===null){var _=d.type;return typeof _=="function"&&!Pm(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=_,_0(s,a,_,p,y)):(s=Kd(d.type,null,p,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(_=s.child,(s.lanes&y)===0){var I=_.memoizedProps;if(d=d.compare,d=d!==null?d:ou,d(I,p)&&s.ref===a.ref)return _i(s,a,y)}return a.flags|=1,s=us(_,p),s.ref=a.ref,s.return=a,a.child=s}function _0(s,a,d,p,y){if(s!==null){var _=s.memoizedProps;if(ou(_,p)&&s.ref===a.ref)if(Cn=!1,a.pendingProps=p=_,(s.lanes&y)!==0)(s.flags&131072)!==0&&(Cn=!0);else return a.lanes=s.lanes,_i(s,a,y)}return lm(s,a,d,p,y)}function w0(s,a,d){var p=a.pendingProps,y=p.children,_=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Da,Un),Un|=d;else{if((d&1073741824)===0)return s=_!==null?_.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,it(Da,Un),Un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:d,it(Da,Un),Un|=p}else _!==null?(p=_.baseLanes|d,a.memoizedState=null):p=d,it(Da,Un),Un|=p;return vn(s,a,y,d),a.child}function T0(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function lm(s,a,d,p,y){var _=In(d)?so:nn.current;return _=Sa(a,_),Aa(a,y),d=em(s,a,d,p,_,y),p=tm(),s!==null&&!Cn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,_i(s,a,y)):(pt&&p&&Lp(a),a.flags|=1,vn(s,a,d,y),a.child)}function E0(s,a,d,p,y){if(In(d)){var _=!0;_d(a)}else _=!1;if(Aa(a,y),a.stateNode===null)Vd(s,a),Fw(a,d,p),qp(a,d,p,y),p=!0;else if(s===null){var I=a.stateNode,F=a.memoizedProps;I.props=F;var $=I.context,X=d.contextType;typeof X=="object"&&X!==null?X=Yn(X):(X=In(d)?so:nn.current,X=Sa(a,X));var se=d.getDerivedStateFromProps,oe=typeof se=="function"||typeof I.getSnapshotBeforeUpdate=="function";oe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(F!==p||$!==X)&&Uw(a,I,p,X),ns=!1;var re=a.memoizedState;I.state=re,bd(a,p,I,y),$=a.memoizedState,F!==p||re!==$||xn.current||ns?(typeof se=="function"&&(Gp(a,d,se,p),$=a.memoizedState),(F=ns||jw(a,d,F,p,re,$,X))?(oe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=$),I.props=p,I.state=$,I.context=X,p=F):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{I=a.stateNode,Mw(s,a),F=a.memoizedProps,X=a.type===a.elementType?F:vr(a.type,F),I.props=X,oe=a.pendingProps,re=I.context,$=d.contextType,typeof $=="object"&&$!==null?$=Yn($):($=In(d)?so:nn.current,$=Sa(a,$));var fe=d.getDerivedStateFromProps;(se=typeof fe=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(F!==oe||re!==$)&&Uw(a,I,p,$),ns=!1,re=a.memoizedState,I.state=re,bd(a,p,I,y);var _e=a.memoizedState;F!==oe||re!==_e||xn.current||ns?(typeof fe=="function"&&(Gp(a,d,fe,p),_e=a.memoizedState),(X=ns||jw(a,d,X,p,re,_e,$)||!1)?(se||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,_e,$),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,_e,$)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||F===s.memoizedProps&&re===s.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&re===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=_e),I.props=p,I.state=_e,I.context=$,p=X):(typeof I.componentDidUpdate!="function"||F===s.memoizedProps&&re===s.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&re===s.memoizedState||(a.flags|=1024),p=!1)}return um(s,a,d,p,_,y)}function um(s,a,d,p,y,_){T0(s,a);var I=(a.flags&128)!==0;if(!p&&!I)return y&&Cw(a,d,!1),_i(s,a,_);p=a.stateNode,Mk.current=a;var F=I&&typeof d.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&I?(a.child=Pa(a,s.child,null,_),a.child=Pa(a,null,F,_)):vn(s,a,F,_),a.memoizedState=p.state,y&&Cw(a,d,!0),a.child}function S0(s){var a=s.stateNode;a.pendingContext?xw(s,a.pendingContext,a.pendingContext!==a.context):a.context&&xw(s,a.context,!1),Kp(s,a.containerInfo)}function x0(s,a,d,p,y){return Ca(),Fp(y),a.flags|=256,vn(s,a,d,p),a.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function dm(s){return{baseLanes:s,cachePool:null,transitions:null}}function I0(s,a,d){var p=a.pendingProps,y=mt.current,_=!1,I=(a.flags&128)!==0,F;if((F=I)||(F=s!==null&&s.memoizedState===null?!1:(y&2)!==0),F?(_=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),it(mt,y&1),s===null)return jp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=p.children,s=p.fallback,_?(p=a.mode,_=a.child,I={mode:"hidden",children:I},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=I):_=Qd(I,p,0,null),s=go(s,p,d,null),_.return=a,s.return=a,_.sibling=s,a.child=_,a.child.memoizedState=dm(d),a.memoizedState=cm,s):hm(a,I));if(y=s.memoizedState,y!==null&&(F=y.dehydrated,F!==null))return Lk(s,a,I,p,F,y,d);if(_){_=p.fallback,I=a.mode,y=s.child,F=y.sibling;var $={mode:"hidden",children:p.children};return(I&1)===0&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=$,a.deletions=null):(p=us(y,$),p.subtreeFlags=y.subtreeFlags&14680064),F!==null?_=us(F,_):(_=go(_,I,d,null),_.flags|=2),_.return=a,p.return=a,p.sibling=_,a.child=p,p=_,_=a.child,I=s.child.memoizedState,I=I===null?dm(d):{baseLanes:I.baseLanes|d,cachePool:null,transitions:I.transitions},_.memoizedState=I,_.childLanes=s.childLanes&~d,a.memoizedState=cm,p}return _=s.child,s=_.sibling,p=us(_,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=d),p.return=a,p.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=p,a.memoizedState=null,p}function hm(s,a){return a=Qd({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Od(s,a,d,p){return p!==null&&Fp(p),Pa(a,s.child,null,d),s=hm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Lk(s,a,d,p,y,_,I){if(d)return a.flags&256?(a.flags&=-257,p=om(Error(t(422))),Od(s,a,I,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(_=p.fallback,y=a.mode,p=Qd({mode:"visible",children:p.children},y,0,null),_=go(_,y,I,null),_.flags|=2,p.return=a,_.return=a,p.sibling=_,a.child=p,(a.mode&1)!==0&&Pa(a,s.child,null,I),a.child.memoizedState=dm(I),a.memoizedState=cm,_);if((a.mode&1)===0)return Od(s,a,I,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var F=p.dgst;return p=F,_=Error(t(419)),p=om(_,p,void 0),Od(s,a,I,p)}if(F=(I&s.childLanes)!==0,Cn||F){if(p=Ft,p!==null){switch(I&-I){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|I))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,yi(s,y),Tr(p,s,y,-1))}return Am(),p=om(Error(t(421))),Od(s,a,I,p)}return y.data==="$?"?(a.flags|=128,a.child=s.child,a=Kk.bind(null,s),y._reactRetry=a,null):(s=_.treeContext,Fn=Ji(y.nextSibling),jn=a,pt=!0,yr=null,s!==null&&(Kn[Qn++]=mi,Kn[Qn++]=gi,Kn[Qn++]=oo,mi=s.id,gi=s.overflow,oo=a),a=hm(a,p.children),a.flags|=4096,a)}function C0(s,a,d){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),$p(s.return,a,d)}function fm(s,a,d,p,y){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=d,_.tailMode=y)}function b0(s,a,d){var p=a.pendingProps,y=p.revealOrder,_=p.tail;if(vn(s,a,p.children,d),p=mt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&C0(s,d,a);else if(s.tag===19)C0(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(it(mt,p),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)s=d.alternate,s!==null&&Rd(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),fm(a,!1,y,d,_);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&Rd(s)===null){a.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}fm(a,!0,d,null,_);break;case"together":fm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Vd(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function _i(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),ho|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,d=us(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=us(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function Ok(s,a,d){switch(a.tag){case 3:S0(a),Ca();break;case 5:Ww(a);break;case 1:In(a.type)&&_d(a);break;case 4:Kp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;it(xd,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(it(mt,mt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?I0(s,a,d):(it(mt,mt.current&1),s=_i(s,a,d),s!==null?s.sibling:null);it(mt,mt.current&1);break;case 19:if(p=(d&a.childLanes)!==0,(s.flags&128)!==0){if(p)return b0(s,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),it(mt,mt.current),p)break;return null;case 22:case 23:return a.lanes=0,w0(s,a,d)}return _i(s,a,d)}var A0,pm,P0,R0;A0=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},pm=function(){},P0=function(s,a,d,p){var y=s.memoizedProps;if(y!==p){s=a.stateNode,uo(Vr.current);var _=null;switch(d){case"input":y=zs(s,y),p=zs(s,p),_=[];break;case"select":y=j({},y,{value:void 0}),p=j({},p,{value:void 0}),_=[];break;case"textarea":y=Ll(s,y),p=Ll(s,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=gd)}Bl(d,p);var I;d=null;for(X in y)if(!p.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var F=y[X];for(I in F)F.hasOwnProperty(I)&&(d||(d={}),d[I]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in p){var $=p[X];if(F=y?.[X],p.hasOwnProperty(X)&&$!==F&&($!=null||F!=null))if(X==="style")if(F){for(I in F)!F.hasOwnProperty(I)||$&&$.hasOwnProperty(I)||(d||(d={}),d[I]="");for(I in $)$.hasOwnProperty(I)&&F[I]!==$[I]&&(d||(d={}),d[I]=$[I])}else d||(_||(_=[]),_.push(X,d)),d=$;else X==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(_=_||[]).push(X,$)):X==="children"?typeof $!="string"&&typeof $!="number"||(_=_||[]).push(X,""+$):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?($!=null&&X==="onScroll"&&at("scroll",s),_||F===$||(_=[])):(_=_||[]).push(X,$))}d&&(_=_||[]).push("style",d);var X=_;(a.updateQueue=X)&&(a.flags|=4)}},R0=function(s,a,d,p){d!==p&&(a.flags|=4)};function Tu(s,a){if(!pt)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function sn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,p=0;if(a)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=d,a}function Vk(s,a,d){var p=a.pendingProps;switch(Op(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(a),null;case 1:return In(a.type)&&vd(),sn(a),null;case 3:return p=a.stateNode,Ra(),lt(xn),lt(nn),Xp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Sd(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,yr!==null&&(Im(yr),yr=null))),pm(s,a),sn(a),null;case 5:Qp(a);var y=uo(gu.current);if(d=a.type,s!==null&&a.stateNode!=null)P0(s,a,d,p,y),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return sn(a),null}if(s=uo(Vr.current),Sd(a)){p=a.stateNode,d=a.type;var _=a.memoizedProps;switch(p[Or]=a,p[du]=_,s=(a.mode&1)!==0,d){case"dialog":at("cancel",p),at("close",p);break;case"iframe":case"object":case"embed":at("load",p);break;case"video":case"audio":for(y=0;y<lu.length;y++)at(lu[y],p);break;case"source":at("error",p);break;case"img":case"image":case"link":at("error",p),at("load",p);break;case"details":at("toggle",p);break;case"input":Ho(p,_),at("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},at("invalid",p);break;case"textarea":qo(p,_),at("invalid",p)}Bl(d,_),y=null;for(var I in _)if(_.hasOwnProperty(I)){var F=_[I];I==="children"?typeof F=="string"?p.textContent!==F&&(_.suppressHydrationWarning!==!0&&md(p.textContent,F,s),y=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(_.suppressHydrationWarning!==!0&&md(p.textContent,F,s),y=["children",""+F]):i.hasOwnProperty(I)&&F!=null&&I==="onScroll"&&at("scroll",p)}switch(d){case"input":ri(p),Bc(p,_,!0);break;case"textarea":ri(p),Ol(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=gd)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{I=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Rt(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=I.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=I.createElement(d,{is:p.is}):(s=I.createElement(d),d==="select"&&(I=s,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):s=I.createElementNS(s,d),s[Or]=a,s[du]=p,A0(s,a,!1,!1),a.stateNode=s;e:{switch(I=zl(d,p),d){case"dialog":at("cancel",s),at("close",s),y=p;break;case"iframe":case"object":case"embed":at("load",s),y=p;break;case"video":case"audio":for(y=0;y<lu.length;y++)at(lu[y],s);y=p;break;case"source":at("error",s),y=p;break;case"img":case"image":case"link":at("error",s),at("load",s),y=p;break;case"details":at("toggle",s),y=p;break;case"input":Ho(s,p),y=zs(s,p),at("invalid",s);break;case"option":y=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},y=j({},p,{value:void 0}),at("invalid",s);break;case"textarea":qo(s,p),y=Ll(s,p),at("invalid",s);break;default:y=p}Bl(d,y),F=y;for(_ in F)if(F.hasOwnProperty(_)){var $=F[_];_==="style"?Fl(s,$):_==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&Vl(s,$)):_==="children"?typeof $=="string"?(d!=="textarea"||$!=="")&&Bi(s,$):typeof $=="number"&&Bi(s,""+$):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?$!=null&&_==="onScroll"&&at("scroll",s):$!=null&&D(s,_,$,I))}switch(d){case"input":ri(s),Bc(s,p,!1);break;case"textarea":ri(s),Ol(s);break;case"option":p.value!=null&&s.setAttribute("value",""+je(p.value));break;case"select":s.multiple=!!p.multiple,_=p.value,_!=null?si(s,!!p.multiple,_,!1):p.defaultValue!=null&&si(s,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=gd)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return sn(a),null;case 6:if(s&&a.stateNode!=null)R0(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(d=uo(gu.current),uo(Vr.current),Sd(a)){if(p=a.stateNode,d=a.memoizedProps,p[Or]=a,(_=p.nodeValue!==d)&&(s=jn,s!==null))switch(s.tag){case 3:md(p.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&md(p.nodeValue,d,(s.mode&1)!==0)}_&&(a.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Or]=a,a.stateNode=p}return sn(a),null;case 13:if(lt(mt),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(pt&&Fn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Nw(),Ca(),a.flags|=98560,_=!1;else if(_=Sd(a),p!==null&&p.dehydrated!==null){if(s===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Or]=a}else Ca(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;sn(a),_=!1}else yr!==null&&(Im(yr),yr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(mt.current&1)!==0?Mt===0&&(Mt=3):Am())),a.updateQueue!==null&&(a.flags|=4),sn(a),null);case 4:return Ra(),pm(s,a),s===null&&uu(a.stateNode.containerInfo),sn(a),null;case 10:return zp(a.type._context),sn(a),null;case 17:return In(a.type)&&vd(),sn(a),null;case 19:if(lt(mt),_=a.memoizedState,_===null)return sn(a),null;if(p=(a.flags&128)!==0,I=_.rendering,I===null)if(p)Tu(_,!1);else{if(Mt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(I=Rd(s),I!==null){for(a.flags|=128,Tu(_,!1),p=I.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=d,d=a.child;d!==null;)_=d,s=p,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,s=I.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return it(mt,mt.current&1|2),a.child}s=s.sibling}_.tail!==null&&rt()>Ma&&(a.flags|=128,p=!0,Tu(_,!1),a.lanes=4194304)}else{if(!p)if(s=Rd(I),s!==null){if(a.flags|=128,p=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Tu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!I.alternate&&!pt)return sn(a),null}else 2*rt()-_.renderingStartTime>Ma&&d!==1073741824&&(a.flags|=128,p=!0,Tu(_,!1),a.lanes=4194304);_.isBackwards?(I.sibling=a.child,a.child=I):(d=_.last,d!==null?d.sibling=I:a.child=I,_.last=I)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=rt(),a.sibling=null,d=mt.current,it(mt,p?d&1|2:d&1),a):(sn(a),null);case 22:case 23:return bm(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Un&1073741824)!==0&&(sn(a),a.subtreeFlags&6&&(a.flags|=8192)):sn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function jk(s,a){switch(Op(a),a.tag){case 1:return In(a.type)&&vd(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ra(),lt(xn),lt(nn),Xp(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Qp(a),null;case 13:if(lt(mt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ca()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return lt(mt),null;case 4:return Ra(),null;case 10:return zp(a.type._context),null;case 22:case 23:return bm(),null;case 24:return null;default:return null}}var jd=!1,on=!1,Fk=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Na(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){vt(s,a,p)}else d.current=null}function mm(s,a,d){try{d()}catch(p){vt(s,a,p)}}var k0=!1;function Uk(s,a){if(bp=Qi,s=lw(),_p(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var I=0,F=-1,$=-1,X=0,se=0,oe=s,re=null;t:for(;;){for(var fe;oe!==d||y!==0&&oe.nodeType!==3||(F=I+y),oe!==_||p!==0&&oe.nodeType!==3||($=I+p),oe.nodeType===3&&(I+=oe.nodeValue.length),(fe=oe.firstChild)!==null;)re=oe,oe=fe;for(;;){if(oe===s)break t;if(re===d&&++X===y&&(F=I),re===_&&++se===p&&($=I),(fe=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=fe}d=F===-1||$===-1?null:{start:F,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ap={focusedElem:s,selectionRange:d},Qi=!1,ye=a;ye!==null;)if(a=ye,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ye=s;else for(;ye!==null;){a=ye;try{var _e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var we=_e.memoizedProps,Et=_e.memoizedState,Q=a.stateNode,G=Q.getSnapshotBeforeUpdate(a.elementType===a.type?we:vr(a.type,we),Et);Q.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){vt(a,a.return,ae)}if(s=a.sibling,s!==null){s.return=a.return,ye=s;break}ye=a.return}return _e=k0,k0=!1,_e}function Eu(s,a,d){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&s)===s){var _=y.destroy;y.destroy=void 0,_!==void 0&&mm(a,d,_)}y=y.next}while(y!==p)}}function Fd(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var p=d.create;d.destroy=p()}d=d.next}while(d!==a)}}function gm(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function N0(s){var a=s.alternate;a!==null&&(s.alternate=null,N0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Or],delete a[du],delete a[Np],delete a[Ek],delete a[Sk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function D0(s){return s.tag===5||s.tag===3||s.tag===4}function M0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||D0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ym(s,a,d){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=gd));else if(p!==4&&(s=s.child,s!==null))for(ym(s,a,d),s=s.sibling;s!==null;)ym(s,a,d),s=s.sibling}function vm(s,a,d){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(vm(s,a,d),s=s.sibling;s!==null;)vm(s,a,d),s=s.sibling}var Yt=null,_r=!1;function is(s,a,d){for(d=d.child;d!==null;)L0(s,a,d),d=d.sibling}function L0(s,a,d){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Xs,d)}catch{}switch(d.tag){case 5:on||Na(d,a);case 6:var p=Yt,y=_r;Yt=null,is(s,a,d),Yt=p,_r=y,Yt!==null&&(_r?(s=Yt,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Yt.removeChild(d.stateNode));break;case 18:Yt!==null&&(_r?(s=Yt,d=d.stateNode,s.nodeType===8?kp(s.parentNode,d):s.nodeType===1&&kp(s,d),pr(s)):kp(Yt,d.stateNode));break;case 4:p=Yt,y=_r,Yt=d.stateNode.containerInfo,_r=!0,is(s,a,d),Yt=p,_r=y;break;case 0:case 11:case 14:case 15:if(!on&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,I=_.destroy;_=_.tag,I!==void 0&&((_&2)!==0||(_&4)!==0)&&mm(d,a,I),y=y.next}while(y!==p)}is(s,a,d);break;case 1:if(!on&&(Na(d,a),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(F){vt(d,a,F)}is(s,a,d);break;case 21:is(s,a,d);break;case 22:d.mode&1?(on=(p=on)||d.memoizedState!==null,is(s,a,d),on=p):is(s,a,d);break;default:is(s,a,d)}}function O0(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new Fk),a.forEach(function(p){var y=Qk.bind(null,s,p);d.has(p)||(d.add(p),p.then(y,y))})}}function wr(s,a){var d=a.deletions;if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];try{var _=s,I=a,F=I;e:for(;F!==null;){switch(F.tag){case 5:Yt=F.stateNode,_r=!1;break e;case 3:Yt=F.stateNode.containerInfo,_r=!0;break e;case 4:Yt=F.stateNode.containerInfo,_r=!0;break e}F=F.return}if(Yt===null)throw Error(t(160));L0(_,I,y),Yt=null,_r=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(X){vt(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)V0(a,s),a=a.sibling}function V0(s,a){var d=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(wr(a,s),Fr(s),p&4){try{Eu(3,s,s.return),Fd(3,s)}catch(we){vt(s,s.return,we)}try{Eu(5,s,s.return)}catch(we){vt(s,s.return,we)}}break;case 1:wr(a,s),Fr(s),p&512&&d!==null&&Na(d,d.return);break;case 5:if(wr(a,s),Fr(s),p&512&&d!==null&&Na(d,d.return),s.flags&32){var y=s.stateNode;try{Bi(y,"")}catch(we){vt(s,s.return,we)}}if(p&4&&(y=s.stateNode,y!=null)){var _=s.memoizedProps,I=d!==null?d.memoizedProps:_,F=s.type,$=s.updateQueue;if(s.updateQueue=null,$!==null)try{F==="input"&&_.type==="radio"&&_.name!=null&&Dl(y,_),zl(F,I);var X=zl(F,_);for(I=0;I<$.length;I+=2){var se=$[I],oe=$[I+1];se==="style"?Fl(y,oe):se==="dangerouslySetInnerHTML"?Vl(y,oe):se==="children"?Bi(y,oe):D(y,se,oe,X)}switch(F){case"input":Ml(y,_);break;case"textarea":Ko(y,_);break;case"select":var re=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var fe=_.value;fe!=null?si(y,!!_.multiple,fe,!1):re!==!!_.multiple&&(_.defaultValue!=null?si(y,!!_.multiple,_.defaultValue,!0):si(y,!!_.multiple,_.multiple?[]:"",!1))}y[du]=_}catch(we){vt(s,s.return,we)}}break;case 6:if(wr(a,s),Fr(s),p&4){if(s.stateNode===null)throw Error(t(162));y=s.stateNode,_=s.memoizedProps;try{y.nodeValue=_}catch(we){vt(s,s.return,we)}}break;case 3:if(wr(a,s),Fr(s),p&4&&d!==null&&d.memoizedState.isDehydrated)try{pr(a.containerInfo)}catch(we){vt(s,s.return,we)}break;case 4:wr(a,s),Fr(s);break;case 13:wr(a,s),Fr(s),y=s.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Tm=rt())),p&4&&O0(s);break;case 22:if(se=d!==null&&d.memoizedState!==null,s.mode&1?(on=(X=on)||se,wr(a,s),on=X):wr(a,s),Fr(s),p&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!se&&(s.mode&1)!==0)for(ye=s,se=s.child;se!==null;){for(oe=ye=se;ye!==null;){switch(re=ye,fe=re.child,re.tag){case 0:case 11:case 14:case 15:Eu(4,re,re.return);break;case 1:Na(re,re.return);var _e=re.stateNode;if(typeof _e.componentWillUnmount=="function"){p=re,d=re.return;try{a=p,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(we){vt(p,d,we)}}break;case 5:Na(re,re.return);break;case 22:if(re.memoizedState!==null){U0(oe);continue}}fe!==null?(fe.return=re,ye=fe):U0(oe)}se=se.sibling}e:for(se=null,oe=s;;){if(oe.tag===5){if(se===null){se=oe;try{y=oe.stateNode,X?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(F=oe.stateNode,$=oe.memoizedProps.style,I=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=jl("display",I))}catch(we){vt(s,s.return,we)}}}else if(oe.tag===6){if(se===null)try{oe.stateNode.nodeValue=X?"":oe.memoizedProps}catch(we){vt(s,s.return,we)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===s)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===s)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===s)break e;se===oe&&(se=null),oe=oe.return}se===oe&&(se=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:wr(a,s),Fr(s),p&4&&O0(s);break;case 21:break;default:wr(a,s),Fr(s)}}function Fr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(D0(d)){var p=d;break e}d=d.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Bi(y,""),p.flags&=-33);var _=M0(s);vm(s,_,y);break;case 3:case 4:var I=p.stateNode.containerInfo,F=M0(s);ym(s,F,I);break;default:throw Error(t(161))}}catch($){vt(s,s.return,$)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Bk(s,a,d){ye=s,j0(s)}function j0(s,a,d){for(var p=(s.mode&1)!==0;ye!==null;){var y=ye,_=y.child;if(y.tag===22&&p){var I=y.memoizedState!==null||jd;if(!I){var F=y.alternate,$=F!==null&&F.memoizedState!==null||on;F=jd;var X=on;if(jd=I,(on=$)&&!X)for(ye=y;ye!==null;)I=ye,$=I.child,I.tag===22&&I.memoizedState!==null?B0(y):$!==null?($.return=I,ye=$):B0(y);for(;_!==null;)ye=_,j0(_),_=_.sibling;ye=y,jd=F,on=X}F0(s)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,ye=_):F0(s)}}function F0(s){for(;ye!==null;){var a=ye;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:on||Fd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!on)if(d===null)p.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:vr(a.type,d.memoizedProps);p.componentDidUpdate(y,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Ow(a,_,p);break;case 3:var I=a.updateQueue;if(I!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Ow(a,I,d)}break;case 5:var F=a.stateNode;if(d===null&&a.flags&4){d=F;var $=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&d.focus();break;case"img":$.src&&(d.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var se=X.memoizedState;if(se!==null){var oe=se.dehydrated;oe!==null&&pr(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}on||a.flags&512&&gm(a)}catch(re){vt(a,a.return,re)}}if(a===s){ye=null;break}if(d=a.sibling,d!==null){d.return=a.return,ye=d;break}ye=a.return}}function U0(s){for(;ye!==null;){var a=ye;if(a===s){ye=null;break}var d=a.sibling;if(d!==null){d.return=a.return,ye=d;break}ye=a.return}}function B0(s){for(;ye!==null;){var a=ye;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Fd(4,a)}catch($){vt(a,d,$)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch($){vt(a,y,$)}}var _=a.return;try{gm(a)}catch($){vt(a,_,$)}break;case 5:var I=a.return;try{gm(a)}catch($){vt(a,I,$)}}}catch($){vt(a,a.return,$)}if(a===s){ye=null;break}var F=a.sibling;if(F!==null){F.return=a.return,ye=F;break}ye=a.return}}var zk=Math.ceil,Ud=B.ReactCurrentDispatcher,_m=B.ReactCurrentOwner,Jn=B.ReactCurrentBatchConfig,Qe=0,Ft=null,Ct=null,Xt=0,Un=0,Da=Zi(0),Mt=0,Su=null,ho=0,Bd=0,wm=0,xu=null,bn=null,Tm=0,Ma=1/0,wi=null,zd=!1,Em=null,ss=null,$d=!1,os=null,Wd=0,Iu=0,Sm=null,Hd=-1,Gd=0;function _n(){return(Qe&6)!==0?rt():Hd!==-1?Hd:Hd=rt()}function as(s){return(s.mode&1)===0?1:(Qe&2)!==0&&Xt!==0?Xt&-Xt:Ik.transition!==null?(Gd===0&&(Gd=Zs()),Gd):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Zl(s.type)),s)}function Tr(s,a,d,p){if(50<Iu)throw Iu=0,Sm=null,Error(t(185));Hi(s,d,p),((Qe&2)===0||s!==Ft)&&(s===Ft&&((Qe&2)===0&&(Bd|=d),Mt===4&&ls(s,Xt)),An(s,p),d===1&&Qe===0&&(a.mode&1)===0&&(Ma=rt()+500,wd&&ts()))}function An(s,a){var d=s.callbackNode;li(s,a);var p=Js(s,s===Ft?Xt:0);if(p===0)d!==null&&Kl(d),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(d!=null&&Kl(d),a===1)s.tag===0?xk($0.bind(null,s)):bw($0.bind(null,s)),wk(function(){(Qe&6)===0&&ts()}),d=null;else{switch(qi(p)){case 1:d=Ys;break;case 4:d=zi;break;case 16:d=Hn;break;case 536870912:d=Gc;break;default:d=Hn}d=X0(d,z0.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function z0(s,a){if(Hd=-1,Gd=0,(Qe&6)!==0)throw Error(t(327));var d=s.callbackNode;if(La()&&s.callbackNode!==d)return null;var p=Js(s,s===Ft?Xt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=qd(s,p);else{a=p;var y=Qe;Qe|=2;var _=H0();(Ft!==s||Xt!==a)&&(wi=null,Ma=rt()+500,po(s,a));do try{Hk();break}catch(F){W0(s,F)}while(!0);Bp(),Ud.current=_,Qe=y,Ct!==null?a=0:(Ft=null,Xt=0,a=Mt)}if(a!==0){if(a===2&&(y=Ln(s),y!==0&&(p=y,a=xm(s,y))),a===1)throw d=Su,po(s,0),ls(s,p),An(s,rt()),d;if(a===6)ls(s,p);else{if(y=s.current.alternate,(p&30)===0&&!$k(y)&&(a=qd(s,p),a===2&&(_=Ln(s),_!==0&&(p=_,a=xm(s,_))),a===1))throw d=Su,po(s,0),ls(s,p),An(s,rt()),d;switch(s.finishedWork=y,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:mo(s,bn,wi);break;case 3:if(ls(s,p),(p&130023424)===p&&(a=Tm+500-rt(),10<a)){if(Js(s,0)!==0)break;if(y=s.suspendedLanes,(y&p)!==p){_n(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=Rp(mo.bind(null,s,bn,wi),a);break}mo(s,bn,wi);break;case 4:if(ls(s,p),(p&4194240)===p)break;for(a=s.eventTimes,y=-1;0<p;){var I=31-gn(p);_=1<<I,I=a[I],I>y&&(y=I),p&=~_}if(p=y,p=rt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*zk(p/1960))-p,10<p){s.timeoutHandle=Rp(mo.bind(null,s,bn,wi),p);break}mo(s,bn,wi);break;case 5:mo(s,bn,wi);break;default:throw Error(t(329))}}}return An(s,rt()),s.callbackNode===d?z0.bind(null,s):null}function xm(s,a){var d=xu;return s.current.memoizedState.isDehydrated&&(po(s,a).flags|=256),s=qd(s,a),s!==2&&(a=bn,bn=d,a!==null&&Im(a)),s}function Im(s){bn===null?bn=s:bn.push.apply(bn,s)}function $k(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var y=d[p],_=y.getSnapshot;y=y.value;try{if(!gr(_(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ls(s,a){for(a&=~wm,a&=~Bd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-gn(a),p=1<<d;s[d]=-1,a&=~p}}function $0(s){if((Qe&6)!==0)throw Error(t(327));La();var a=Js(s,0);if((a&1)===0)return An(s,rt()),null;var d=qd(s,a);if(s.tag!==0&&d===2){var p=Ln(s);p!==0&&(a=p,d=xm(s,p))}if(d===1)throw d=Su,po(s,0),ls(s,a),An(s,rt()),d;if(d===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,mo(s,bn,wi),An(s,rt()),null}function Cm(s,a){var d=Qe;Qe|=1;try{return s(a)}finally{Qe=d,Qe===0&&(Ma=rt()+500,wd&&ts())}}function fo(s){os!==null&&os.tag===0&&(Qe&6)===0&&La();var a=Qe;Qe|=1;var d=Jn.transition,p=ze;try{if(Jn.transition=null,ze=1,s)return s()}finally{ze=p,Jn.transition=d,Qe=a,(Qe&6)===0&&ts()}}function bm(){Un=Da.current,lt(Da)}function po(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,_k(d)),Ct!==null)for(d=Ct.return;d!==null;){var p=d;switch(Op(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&vd();break;case 3:Ra(),lt(xn),lt(nn),Xp();break;case 5:Qp(p);break;case 4:Ra();break;case 13:lt(mt);break;case 19:lt(mt);break;case 10:zp(p.type._context);break;case 22:case 23:bm()}d=d.return}if(Ft=s,Ct=s=us(s.current,null),Xt=Un=a,Mt=0,Su=null,wm=Bd=ho=0,bn=xu=null,lo!==null){for(a=0;a<lo.length;a++)if(d=lo[a],p=d.interleaved,p!==null){d.interleaved=null;var y=p.next,_=d.pending;if(_!==null){var I=_.next;_.next=y,p.next=I}d.pending=p}lo=null}return s}function W0(s,a){do{var d=Ct;try{if(Bp(),kd.current=Ld,Nd){for(var p=gt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Nd=!1}if(co=0,jt=Dt=gt=null,yu=!1,vu=0,_m.current=null,d===null||d.return===null){Mt=1,Su=a,Ct=null;break}e:{var _=s,I=d.return,F=d,$=a;if(a=Xt,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var X=$,se=F,oe=se.tag;if((se.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var fe=m0(I);if(fe!==null){fe.flags&=-257,g0(fe,I,F,_,a),fe.mode&1&&p0(_,X,a),a=fe,$=X;var _e=a.updateQueue;if(_e===null){var we=new Set;we.add($),a.updateQueue=we}else _e.add($);break e}else{if((a&1)===0){p0(_,X,a),Am();break e}$=Error(t(426))}}else if(pt&&F.mode&1){var Et=m0(I);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),g0(Et,I,F,_,a),Fp(ka($,F));break e}}_=$=ka($,F),Mt!==4&&(Mt=2),xu===null?xu=[_]:xu.push(_),_=I;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var Q=h0(_,$,a);Lw(_,Q);break e;case 1:F=$;var G=_.type,Y=_.stateNode;if((_.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ss===null||!ss.has(Y)))){_.flags|=65536,a&=-a,_.lanes|=a;var ae=f0(_,F,a);Lw(_,ae);break e}}_=_.return}while(_!==null)}q0(d)}catch(Te){a=Te,Ct===d&&d!==null&&(Ct=d=d.return);continue}break}while(!0)}function H0(){var s=Ud.current;return Ud.current=Ld,s===null?Ld:s}function Am(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Ft===null||(ho&268435455)===0&&(Bd&268435455)===0||ls(Ft,Xt)}function qd(s,a){var d=Qe;Qe|=2;var p=H0();(Ft!==s||Xt!==a)&&(wi=null,po(s,a));do try{Wk();break}catch(y){W0(s,y)}while(!0);if(Bp(),Qe=d,Ud.current=p,Ct!==null)throw Error(t(261));return Ft=null,Xt=0,Mt}function Wk(){for(;Ct!==null;)G0(Ct)}function Hk(){for(;Ct!==null&&!Wc();)G0(Ct)}function G0(s){var a=Y0(s.alternate,s,Un);s.memoizedProps=s.pendingProps,a===null?q0(s):Ct=a,_m.current=null}function q0(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=Vk(d,a,Un),d!==null){Ct=d;return}}else{if(d=jk(d,a),d!==null){d.flags&=32767,Ct=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Mt=6,Ct=null;return}}if(a=a.sibling,a!==null){Ct=a;return}Ct=a=s}while(a!==null);Mt===0&&(Mt=5)}function mo(s,a,d){var p=ze,y=Jn.transition;try{Jn.transition=null,ze=1,Gk(s,a,d,p)}finally{Jn.transition=y,ze=p}return null}function Gk(s,a,d,p){do La();while(os!==null);if((Qe&6)!==0)throw Error(t(327));d=s.finishedWork;var y=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var _=d.lanes|d.childLanes;if(tt(s,_),s===Ft&&(Ct=Ft=null,Xt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||$d||($d=!0,X0(Hn,function(){return La(),null})),_=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||_){_=Jn.transition,Jn.transition=null;var I=ze;ze=1;var F=Qe;Qe|=4,_m.current=null,Uk(s,d),V0(d,s),hk(Ap),Qi=!!bp,Ap=bp=null,s.current=d,Bk(d),dp(),Qe=F,ze=I,Jn.transition=_}else s.current=d;if($d&&($d=!1,os=s,Wd=y),_=s.pendingLanes,_===0&&(ss=null),qc(d.stateNode),An(s,rt()),a!==null)for(p=s.onRecoverableError,d=0;d<a.length;d++)y=a[d],p(y.value,{componentStack:y.stack,digest:y.digest});if(zd)throw zd=!1,s=Em,Em=null,s;return(Wd&1)!==0&&s.tag!==0&&La(),_=s.pendingLanes,(_&1)!==0?s===Sm?Iu++:(Iu=0,Sm=s):Iu=0,ts(),null}function La(){if(os!==null){var s=qi(Wd),a=Jn.transition,d=ze;try{if(Jn.transition=null,ze=16>s?16:s,os===null)var p=!1;else{if(s=os,os=null,Wd=0,(Qe&6)!==0)throw Error(t(331));var y=Qe;for(Qe|=4,ye=s.current;ye!==null;){var _=ye,I=_.child;if((ye.flags&16)!==0){var F=_.deletions;if(F!==null){for(var $=0;$<F.length;$++){var X=F[$];for(ye=X;ye!==null;){var se=ye;switch(se.tag){case 0:case 11:case 15:Eu(8,se,_)}var oe=se.child;if(oe!==null)oe.return=se,ye=oe;else for(;ye!==null;){se=ye;var re=se.sibling,fe=se.return;if(N0(se),se===X){ye=null;break}if(re!==null){re.return=fe,ye=re;break}ye=fe}}}var _e=_.alternate;if(_e!==null){var we=_e.child;if(we!==null){_e.child=null;do{var Et=we.sibling;we.sibling=null,we=Et}while(we!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&I!==null)I.return=_,ye=I;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Eu(9,_,_.return)}var Q=_.sibling;if(Q!==null){Q.return=_.return,ye=Q;break e}ye=_.return}}var G=s.current;for(ye=G;ye!==null;){I=ye;var Y=I.child;if((I.subtreeFlags&2064)!==0&&Y!==null)Y.return=I,ye=Y;else e:for(I=G;ye!==null;){if(F=ye,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Fd(9,F)}}catch(Te){vt(F,F.return,Te)}if(F===I){ye=null;break e}var ae=F.sibling;if(ae!==null){ae.return=F.return,ye=ae;break e}ye=F.return}}if(Qe=y,ts(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Xs,s)}catch{}p=!0}return p}finally{ze=d,Jn.transition=a}}return!1}function K0(s,a,d){a=ka(d,a),a=h0(s,a,1),s=rs(s,a,1),a=_n(),s!==null&&(Hi(s,1,a),An(s,a))}function vt(s,a,d){if(s.tag===3)K0(s,s,d);else for(;a!==null;){if(a.tag===3){K0(a,s,d);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ss===null||!ss.has(p))){s=ka(d,s),s=f0(a,s,1),a=rs(a,s,1),s=_n(),a!==null&&(Hi(a,1,s),An(a,s));break}}a=a.return}}function qk(s,a,d){var p=s.pingCache;p!==null&&p.delete(a),a=_n(),s.pingedLanes|=s.suspendedLanes&d,Ft===s&&(Xt&d)===d&&(Mt===4||Mt===3&&(Xt&130023424)===Xt&&500>rt()-Tm?po(s,0):wm|=d),An(s,a)}function Q0(s,a){a===0&&((s.mode&1)===0?a=1:(a=ia,ia<<=1,(ia&130023424)===0&&(ia=4194304)));var d=_n();s=yi(s,a),s!==null&&(Hi(s,a,d),An(s,d))}function Kk(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Q0(s,d)}function Qk(s,a){var d=0;switch(s.tag){case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Q0(s,d)}var Y0;Y0=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||xn.current)Cn=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Cn=!1,Ok(s,a,d);Cn=(s.flags&131072)!==0}else Cn=!1,pt&&(a.flags&1048576)!==0&&Aw(a,Ed,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Vd(s,a),s=a.pendingProps;var y=Sa(a,nn.current);Aa(a,d),y=em(null,a,p,s,y,d);var _=tm();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,In(p)?(_=!0,_d(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Hp(a),y.updater=Ad,a.stateNode=y,y._reactInternals=a,qp(a,p,s,d),a=um(null,a,p,!0,_,d)):(a.tag=0,pt&&_&&Lp(a),vn(null,a,y,d),a=a.child),a;case 16:p=a.elementType;e:{switch(Vd(s,a),s=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=Xk(p),s=vr(p,s),y){case 0:a=lm(null,a,p,s,d);break e;case 1:a=E0(null,a,p,s,d);break e;case 11:a=y0(null,a,p,s,d);break e;case 14:a=v0(null,a,p,vr(p.type,s),d);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:vr(p,y),lm(s,a,p,y,d);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:vr(p,y),E0(s,a,p,y,d);case 3:e:{if(S0(a),s===null)throw Error(t(387));p=a.pendingProps,_=a.memoizedState,y=_.element,Mw(s,a),bd(a,p,null,d);var I=a.memoizedState;if(p=I.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=ka(Error(t(423)),a),a=x0(s,a,p,d,y);break e}else if(p!==y){y=ka(Error(t(424)),a),a=x0(s,a,p,d,y);break e}else for(Fn=Ji(a.stateNode.containerInfo.firstChild),jn=a,pt=!0,yr=null,d=$w(a,null,p,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ca(),p===y){a=_i(s,a,d);break e}vn(s,a,p,d)}a=a.child}return a;case 5:return Ww(a),s===null&&jp(a),p=a.type,y=a.pendingProps,_=s!==null?s.memoizedProps:null,I=y.children,Pp(p,y)?I=null:_!==null&&Pp(p,_)&&(a.flags|=32),T0(s,a),vn(s,a,I,d),a.child;case 6:return s===null&&jp(a),null;case 13:return I0(s,a,d);case 4:return Kp(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Pa(a,null,p,d):vn(s,a,p,d),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:vr(p,y),y0(s,a,p,y,d);case 7:return vn(s,a,a.pendingProps,d),a.child;case 8:return vn(s,a,a.pendingProps.children,d),a.child;case 12:return vn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,_=a.memoizedProps,I=y.value,it(xd,p._currentValue),p._currentValue=I,_!==null)if(gr(_.value,I)){if(_.children===y.children&&!xn.current){a=_i(s,a,d);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var F=_.dependencies;if(F!==null){I=_.child;for(var $=F.firstContext;$!==null;){if($.context===p){if(_.tag===1){$=vi(-1,d&-d),$.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var se=X.pending;se===null?$.next=$:($.next=se.next,se.next=$),X.pending=$}}_.lanes|=d,$=_.alternate,$!==null&&($.lanes|=d),$p(_.return,d,a),F.lanes|=d;break}$=$.next}}else if(_.tag===10)I=_.type===a.type?null:_.child;else if(_.tag===18){if(I=_.return,I===null)throw Error(t(341));I.lanes|=d,F=I.alternate,F!==null&&(F.lanes|=d),$p(I,d,a),I=_.sibling}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===a){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}vn(s,a,y.children,d),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,Aa(a,d),y=Yn(y),p=p(y),a.flags|=1,vn(s,a,p,d),a.child;case 14:return p=a.type,y=vr(p,a.pendingProps),y=vr(p.type,y),v0(s,a,p,y,d);case 15:return _0(s,a,a.type,a.pendingProps,d);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:vr(p,y),Vd(s,a),a.tag=1,In(p)?(s=!0,_d(a)):s=!1,Aa(a,d),Fw(a,p,y),qp(a,p,y,d),um(null,a,p,!0,s,d);case 19:return b0(s,a,d);case 22:return w0(s,a,d)}throw Error(t(156,a.tag))};function X0(s,a){return na(s,a)}function Yk(s,a,d,p){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,a,d,p){return new Yk(s,a,d,p)}function Pm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Xk(s){if(typeof s=="function")return Pm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===de)return 14}return 2}function us(s,a){var d=s.alternate;return d===null?(d=Zn(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Kd(s,a,d,p,y,_){var I=2;if(p=s,typeof s=="function")Pm(s)&&(I=1);else if(typeof s=="string")I=5;else e:switch(s){case L:return go(d.children,y,_,a);case C:I=8,y|=8;break;case A:return s=Zn(12,d,a,y|2),s.elementType=A,s.lanes=_,s;case k:return s=Zn(13,d,a,y),s.elementType=k,s.lanes=_,s;case ne:return s=Zn(19,d,a,y),s.elementType=ne,s.lanes=_,s;case he:return Qd(d,y,_,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case b:I=10;break e;case V:I=9;break e;case U:I=11;break e;case de:I=14;break e;case Ee:I=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Zn(I,d,a,y),a.elementType=s,a.type=p,a.lanes=_,a}function go(s,a,d,p){return s=Zn(7,s,p,a),s.lanes=d,s}function Qd(s,a,d,p){return s=Zn(22,s,p,a),s.elementType=he,s.lanes=d,s.stateNode={isHidden:!1},s}function Rm(s,a,d){return s=Zn(6,s,null,a),s.lanes=d,s}function km(s,a,d){return a=Zn(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Jk(s,a,d,p,y){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wi(0),this.expirationTimes=Wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Nm(s,a,d,p,y,_,I,F,$){return s=new Jk(s,a,d,F,$),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Zn(3,null,null,a),s.current=_,_.stateNode=s,_.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hp(_),s}function Zk(s,a,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:p==null?null:""+p,children:s,containerInfo:a,implementation:d}}function J0(s){if(!s)return es;s=s._reactInternals;e:{if(ur(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(In(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var d=s.type;if(In(d))return Iw(s,d,a)}return a}function Z0(s,a,d,p,y,_,I,F,$){return s=Nm(d,p,!0,s,y,_,I,F,$),s.context=J0(null),d=s.current,p=_n(),y=as(d),_=vi(p,y),_.callback=a??null,rs(d,_,y),s.current.lanes=y,Hi(s,y,p),An(s,p),s}function Yd(s,a,d,p){var y=a.current,_=_n(),I=as(y);return d=J0(d),a.context===null?a.context=d:a.pendingContext=d,a=vi(_,I),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=rs(y,a,I),s!==null&&(Tr(s,y,I,_),Cd(s,y,I)),I}function Xd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function eT(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function Dm(s,a){eT(s,a),(s=s.alternate)&&eT(s,a)}function e1(){return null}var tT=typeof reportError=="function"?reportError:function(s){console.error(s)};function Mm(s){this._internalRoot=s}Jd.prototype.render=Mm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Yd(s,a,null,null)},Jd.prototype.unmount=Mm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;fo(function(){Yd(null,s,null,null)}),a[fi]=null}};function Jd(s){this._internalRoot=s}Jd.prototype.unstable_scheduleHydration=function(s){if(s){var a=Jc();s={blockedOn:null,target:s,priority:a};for(var d=0;d<Nr.length&&a!==0&&a<Nr[d].priority;d++);Nr.splice(d,0,s),d===0&&td(s)}};function Lm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Zd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function nT(){}function t1(s,a,d,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var X=Xd(I);_.call(X)}}var I=Z0(a,p,s,0,null,!1,!1,"",nT);return s._reactRootContainer=I,s[fi]=I.current,uu(s.nodeType===8?s.parentNode:s),fo(),I}for(;y=s.lastChild;)s.removeChild(y);if(typeof p=="function"){var F=p;p=function(){var X=Xd($);F.call(X)}}var $=Nm(s,0,!1,null,null,!1,!1,"",nT);return s._reactRootContainer=$,s[fi]=$.current,uu(s.nodeType===8?s.parentNode:s),fo(function(){Yd(a,$,d,p)}),$}function eh(s,a,d,p,y){var _=d._reactRootContainer;if(_){var I=_;if(typeof y=="function"){var F=y;y=function(){var $=Xd(I);F.call($)}}Yd(a,I,s,y)}else I=t1(d,a,s,y,p);return Xd(I)}Yc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=$i(a.pendingLanes);d!==0&&(Gi(a,d|1),An(a,rt()),(Qe&6)===0&&(Ma=rt()+500,ts()))}break;case 13:fo(function(){var p=yi(s,1);if(p!==null){var y=_n();Tr(p,s,1,y)}}),Dm(s,1)}},sa=function(s){if(s.tag===13){var a=yi(s,134217728);if(a!==null){var d=_n();Tr(a,s,134217728,d)}Dm(s,134217728)}},Xc=function(s){if(s.tag===13){var a=as(s),d=yi(s,a);if(d!==null){var p=_n();Tr(d,s,a,p)}Dm(s,a)}},Jc=function(){return ze},Zc=function(s,a){var d=ze;try{return ze=s,a()}finally{ze=d}},Yo=function(s,a,d){switch(a){case"input":if(Ml(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var p=d[a];if(p!==s&&p.form===s.form){var y=yd(p);if(!y)throw Error(t(90));Wo(p),Ml(p,y)}}}break;case"textarea":Ko(s,d);break;case"select":a=d.value,a!=null&&si(s,!!d.multiple,a,!1)}},Gs=Cm,Wl=fo;var n1={usingClientEntryPoint:!1,Events:[hu,Ta,yd,Rr,$l,Cm]},Cu={findFiberByHostInstance:io,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},r1={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=ql(s),s===null?null:s.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||e1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Xs=th.inject(r1),Mn=th}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n1,Pn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lm(a))throw Error(t(200));return Zk(s,a,null,d)},Pn.createRoot=function(s,a){if(!Lm(s))throw Error(t(299));var d=!1,p="",y=tT;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Nm(s,1,!1,null,null,d,!1,p,y),s[fi]=a.current,uu(s.nodeType===8?s.parentNode:s),new Mm(a)},Pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=ql(a),s=s===null?null:s.stateNode,s},Pn.flushSync=function(s){return fo(s)},Pn.hydrate=function(s,a,d){if(!Zd(a))throw Error(t(200));return eh(null,s,a,!0,d)},Pn.hydrateRoot=function(s,a,d){if(!Lm(s))throw Error(t(405));var p=d!=null&&d.hydratedSources||null,y=!1,_="",I=tT;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(I=d.onRecoverableError)),a=Z0(a,null,s,1,d??null,y,!1,_,I),s[fi]=a.current,uu(s),p)for(s=0;s<p.length;s++)d=p[s],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new Jd(a)},Pn.render=function(s,a,d){if(!Zd(a))throw Error(t(200));return eh(null,s,a,!1,d)},Pn.unmountComponentAtNode=function(s){if(!Zd(s))throw Error(t(40));return s._reactRootContainer?(fo(function(){eh(null,null,s,!1,function(){s._reactRootContainer=null,s[fi]=null})}),!0):!1},Pn.unstable_batchedUpdates=Cm,Pn.unstable_renderSubtreeIntoContainer=function(s,a,d,p){if(!Zd(d))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return eh(s,a,d,!1,p)},Pn.version="18.2.0-next-9e3b772b8-20220608",Pn}var cT;function uI(){if(cT)return jm.exports;cT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jm.exports=h1(),jm.exports}var dT;function f1(){if(dT)return nh;dT=1;var n=uI();return nh.createRoot=n.createRoot,nh.hydrateRoot=n.hydrateRoot,nh}var p1=f1();const m1=lI(p1);uI();/**
 * @remix-run/router v1.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lh(){return Lh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lh.apply(this,arguments)}var So;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(So||(So={}));const hT="popstate";function g1(n){n===void 0&&(n={});function e(i,o){let{pathname:l="/",search:u="",hash:c=""}=Uy(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ag("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:dI(o))}function r(i,o){y1(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return _1(e,t,r,n)}function cI(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function y1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v1(){return Math.random().toString(36).substr(2,8)}function fT(n,e){return{usr:n.state,key:n.key,idx:e}}function Ag(n,e,t,r){return t===void 0&&(t=null),Lh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Uy(e):e,{state:t,key:e&&e.key||r||v1()})}function dI(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Uy(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function _1(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=So.Pop,c=null,f=m();f==null&&(f=0,l.replaceState(Lh({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function g(){u=So.Pop;let M=m(),O=M==null?null:M-f;f=M,c&&c({action:u,location:P.location,delta:O})}function w(M,O){u=So.Push;let R=Ag(P.location,M,O);t&&t(R,M),f=m()+1;let D=fT(R,f),B=P.createHref(R);try{l.pushState(D,"",B)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(B)}o&&c&&c({action:u,location:P.location,delta:1})}function S(M,O){u=So.Replace;let R=Ag(P.location,M,O);t&&t(R,M),f=m();let D=fT(R,f),B=P.createHref(R);l.replaceState(D,"",B),o&&c&&c({action:u,location:P.location,delta:0})}function x(M){let O=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof M=="string"?M:dI(M);return cI(O,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,O)}let P={get action(){return u},get location(){return n(i,l)},listen(M){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(hT,g),c=M,()=>{i.removeEventListener(hT,g),c=null}},createHref(M){return e(i,M)},createURL:x,encodeLocation(M){let O=x(M);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:w,replace:S,go(M){return l.go(M)}};return P}var pT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pT||(pT={}));function w1(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const hI=["post","put","patch","delete"];new Set(hI);const T1=["get",...hI];new Set(T1);/**
 * React Router v6.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const E1=K.createContext(null),fI=K.createContext(null);function S1(){return K.useContext(fI)!=null}function x1(n){let{basename:e="/",children:t=null,location:r,navigationType:i=So.Pop,navigator:o,static:l=!1}=n;S1()&&cI(!1);let u=e.replace(/^\/*/,"/"),c=K.useMemo(()=>({basename:u,navigator:o,static:l}),[u,o,l]);typeof r=="string"&&(r=Uy(r));let{pathname:f="/",search:m="",hash:g="",state:w=null,key:S="default"}=r,x=K.useMemo(()=>{let P=w1(f,u);return P==null?null:{location:{pathname:P,search:m,hash:g,state:w,key:S},navigationType:i}},[u,f,m,g,w,S,i]);return x==null?null:K.createElement(E1.Provider,{value:c},K.createElement(fI.Provider,{children:t,value:x}))}new Promise(()=>{});/**
 * React Router DOM v6.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const I1="startTransition",mT=u1[I1];function C1(n){let{basename:e,children:t,future:r,window:i}=n,o=K.useRef();o.current==null&&(o.current=g1({window:i,v5Compat:!0}));let l=o.current,[u,c]=K.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},m=K.useCallback(g=>{f&&mT?mT(()=>c(g)):c(g)},[c,f]);return K.useLayoutEffect(()=>l.listen(m),[l,m]),K.createElement(x1,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:l})}var gT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(gT||(gT={}));var yT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(yT||(yT={}));const By=K.createContext({});function zy(n){const e=K.useRef(null);return e.current===null&&(e.current=n()),e.current}const $y=typeof window<"u",pI=$y?K.useLayoutEffect:K.useEffect,Pf=K.createContext(null),Wy=K.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class b1 extends K.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function A1({children:n,isPresent:e,anchorX:t}){const r=K.useId(),i=K.useRef(null),o=K.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=K.useContext(Wy);return K.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:m,right:g}=o.current;if(e||!i.current||!u||!c)return;const w=t==="left"?`left: ${m}`:`right: ${g}`;i.current.dataset.motionPopId=r;const S=document.createElement("style");return l&&(S.nonce=l),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.removeChild(S)}},[e]),T.jsx(b1,{isPresent:e,childRef:i,sizeRef:o,children:K.cloneElement(n,{ref:i})})}const P1=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const c=zy(R1),f=K.useId(),m=K.useCallback(w=>{c.set(w,!0);for(const S of c.values())if(!S)return;r&&r()},[c,r]),g=K.useMemo(()=>({id:f,initial:e,isPresent:t,custom:i,onExitComplete:m,register:w=>(c.set(w,!1),()=>c.delete(w))}),o?[Math.random(),m]:[t,m]);return K.useMemo(()=>{c.forEach((w,S)=>c.set(S,!1))},[t]),K.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),l==="popLayout"&&(n=T.jsx(A1,{isPresent:t,anchorX:u,children:n})),T.jsx(Pf.Provider,{value:g,children:n})};function R1(){return new Map}function mI(n=!0){const e=K.useContext(Pf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=K.useId();K.useEffect(()=>{if(n)return i(o)},[n]);const l=K.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const rh=n=>n.key||"";function vT(n){const e=[];return K.Children.forEach(n,t=>{K.isValidElement(t)&&e.push(t)}),e}const Rf=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[c,f]=mI(l),m=K.useMemo(()=>vT(n),[n]),g=l&&!c?[]:m.map(rh),w=K.useRef(!0),S=K.useRef(m),x=zy(()=>new Map),[P,M]=K.useState(m),[O,R]=K.useState(m);pI(()=>{w.current=!1,S.current=m;for(let z=0;z<O.length;z++){const W=rh(O[z]);g.includes(W)?x.delete(W):x.get(W)!==!0&&x.set(W,!1)}},[O,g.length,g.join("-")]);const D=[];if(m!==P){let z=[...m];for(let W=0;W<O.length;W++){const L=O[W],C=rh(L);g.includes(C)||(z.splice(W,0,L),D.push(L))}return o==="wait"&&D.length&&(z=D),R(vT(z)),M(m),null}const{forceRender:B}=K.useContext(By);return T.jsx(T.Fragment,{children:O.map(z=>{const W=rh(z),L=l&&!c?!1:m===O||g.includes(W),C=()=>{if(x.has(W))x.set(W,!0);else return;let A=!0;x.forEach(b=>{b||(A=!1)}),A&&(B?.(),R(S.current),l&&f?.(),r&&r())};return T.jsx(P1,{isPresent:L,initial:!w.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,onExitComplete:L?void 0:C,anchorX:u,children:z},W)})})};function Hy(n,e){n.indexOf(e)===-1&&n.push(e)}function Gy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let gI=()=>{};const k1={useManualTiming:!1};function qy(n){let e;return()=>(e===void 0&&(e=n()),e)}const ir=n=>n,ec=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Ky{constructor(){this.subscriptions=[]}add(e){return Hy(this.subscriptions,e),()=>Gy(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $r=n=>n*1e3,Wr=n=>n/1e3;function yI(n,e){return e?n*(1e3/e):0}const N1=qy(()=>window.ScrollTimeline!==void 0);class D1{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(N1()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class M1 extends D1{then(e,t){return this.finished.finally(e).then(()=>{})}}const _T={value:null},Qy=n=>Array.isArray(n)&&typeof n[0]=="number",L1={};function O1(n,e){const t=qy(n);return()=>L1[e]??t()}const tc=O1(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vI=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=n(o/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Mu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Pg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mu([0,.65,.55,1]),circOut:Mu([.55,0,1,.45]),backIn:Mu([.31,.01,.66,-.59]),backOut:Mu([.33,1.53,.69,.99])};function _I(n,e){if(n)return typeof n=="function"&&tc()?vI(n,e):Qy(n)?Mu(n):Array.isArray(n)?n.map(t=>_I(t,e)||Pg.easeOut):Pg[n]}function V1(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:c}={},f=void 0){const m={[e]:t};c&&(m.offset=c);const g=_I(u,i);return Array.isArray(g)&&(m.easing=g),n.animate(m,{delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:f})}function Yy(n){return typeof n=="function"&&"applyToOptions"in n}function Xy(n,e){return n?.[e]??n?.default??n}const Oh=2e4;function Jy(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Oh;)e+=t,r=n.next(e);return e>=Oh?1/0:e}function j1(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(Jy(r),Oh);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Wr(i)}}function wI(n){return!!(typeof n=="function"&&tc()||!n||typeof n=="string"&&(n in Pg||tc())||Qy(n)||Array.isArray(n)&&n.every(wI))}function wT(n,e){n.timeline=e,n.onfinish=null}const ih=["read","resolveKeyframes","update","preRender","render","postRender"];function F1(n,e){let t=new Set,r=new Set,i=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},c=0;function f(g){l.has(g)&&(m.schedule(g),n()),c++,g(u)}const m={schedule:(g,w=!1,S=!1)=>{const P=S&&i?t:r;return w&&l.add(g),P.has(g)||P.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(u=g,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(f),e&&_T.value&&_T.value.frameloop[e].push(c),c=0,t.clear(),i=!1,o&&(o=!1,m.process(g))}};return m}const U1=40;function TI(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=ih.reduce((O,R)=>(O[R]=F1(o,e?R:void 0),O),{}),{read:u,resolveKeyframes:c,update:f,preRender:m,render:g,postRender:w}=l,S=()=>{const O=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(O-i.timestamp,U1),1),i.timestamp=O,i.isProcessing=!0,u.process(i),c.process(i),f.process(i),m.process(i),g.process(i),w.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},x=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:ih.reduce((O,R)=>{const D=l[R];return O[R]=(B,z=!1,W=!1)=>(t||x(),D.schedule(B,z,W)),O},{}),cancel:O=>{for(let R=0;R<ih.length;R++)l[ih[R]].cancel(O)},state:i,steps:l}}const{schedule:ot,cancel:bs,state:Jt,steps:Bm}=TI(typeof requestAnimationFrame<"u"?requestAnimationFrame:ir,!0),{schedule:Zy}=TI(queueMicrotask,!1);let wh;function B1(){wh=void 0}const Hr={now:()=>(wh===void 0&&Hr.set(Jt.isProcessing||k1.useManualTiming?Jt.timestamp:performance.now()),wh),set:n=>{wh=n,queueMicrotask(B1)}},Er={x:!1,y:!1};function EI(){return Er.x||Er.y}function z1(n){return n==="x"||n==="y"?Er[n]?null:(Er[n]=!0,()=>{Er[n]=!1}):Er.x||Er.y?null:(Er.x=Er.y=!0,()=>{Er.x=Er.y=!1})}function $1(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const i=document.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}function SI(n,e){const t=$1(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function TT(n){return!(n.pointerType==="touch"||EI())}function W1(n,e,t={}){const[r,i,o]=SI(n,t),l=u=>{if(!TT(u))return;const{target:c}=u,f=e(c,u);if(typeof f!="function"||!c)return;const m=g=>{TT(g)&&(f(g),c.removeEventListener("pointerleave",m))};c.addEventListener("pointerleave",m,i)};return r.forEach(u=>{u.addEventListener("pointerenter",l,i)}),o}const xI=(n,e)=>e?n===e?!0:xI(n,e.parentElement):!1,ev=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,H1=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function G1(n){return H1.has(n.tagName)||n.tabIndex!==-1}const Lu=new WeakSet;function ET(n){return e=>{e.key==="Enter"&&n(e)}}function zm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const q1=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=ET(()=>{if(Lu.has(t))return;zm(t,"down");const i=ET(()=>{zm(t,"up")}),o=()=>zm(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function ST(n){return ev(n)&&!EI()}function K1(n,e,t={}){const[r,i,o]=SI(n,t),l=u=>{const c=u.currentTarget;if(!ST(u)||Lu.has(c))return;Lu.add(c);const f=e(c,u),m=(S,x)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",w),!(!ST(S)||!Lu.has(c))&&(Lu.delete(c),typeof f=="function"&&f(S,{success:x}))},g=S=>{m(S,c===window||c===document||t.useGlobalTarget||xI(c,S.target))},w=S=>{m(S,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",w,i)};return r.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),u instanceof HTMLElement&&(u.addEventListener("focus",f=>q1(f,i)),!G1(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}const xT=30,Q1=n=>!isNaN(parseFloat(n));class Y1{constructor(e,t={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Hr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Q1(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ky);const r=this.events[e].add(t);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,xT);return yI(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nc(n,e){return new Y1(n,e)}const II=K.createContext({strict:!1}),IT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},il={};for(const n in IT)il[n]={isEnabled:e=>IT[n].some(t=>!!e[t])};function X1(n){for(const e in n)il[e]={...il[e],...n[e]}}const J1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||J1.has(n)}let CI=n=>!Vh(n);function Z1(n){n&&(CI=e=>e.startsWith("on")?!Vh(e):n(e))}try{Z1(require("@emotion/is-prop-valid").default)}catch{}function eN(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(CI(i)||t===!0&&Vh(i)||!e&&!Vh(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function tN(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const kf=K.createContext({});function Nf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function rc(n){return typeof n=="string"||Array.isArray(n)}const tv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nv=["initial",...tv];function Df(n){return Nf(n.animate)||nv.some(e=>rc(n[e]))}function bI(n){return!!(Df(n)||n.variants)}function nN(n,e){if(Df(n)){const{initial:t,animate:r}=n;return{initial:t===!1||rc(t)?t:void 0,animate:rc(r)?r:void 0}}return n.inherit!==!1?e:{}}function rN(n){const{initial:e,animate:t}=nN(n,K.useContext(kf));return K.useMemo(()=>({initial:e,animate:t}),[CT(e),CT(t)])}function CT(n){return Array.isArray(n)?n.join(" "):n}const iN=Symbol.for("motionComponentSymbol");function $a(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function sN(n,e,t){return K.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):$a(t)&&(t.current=r))},[e])}const rv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oN="framerAppearId",AI="data-"+rv(oN),PI=K.createContext({});function aN(n,e,t,r,i){const{visualElement:o}=K.useContext(kf),l=K.useContext(II),u=K.useContext(Pf),c=K.useContext(Wy).reducedMotion,f=K.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const m=f.current,g=K.useContext(PI);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&lN(f.current,t,i,g);const w=K.useRef(!1);K.useInsertionEffect(()=>{m&&w.current&&m.update(t,u)});const S=t[AI],x=K.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return pI(()=>{m&&(w.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Zy.render(m.render),x.current&&m.animationState&&m.animationState.animateChanges())}),K.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),x.current=!1))}),m}function lN(n,e,t,r){const{layoutId:i,layout:o,drag:l,dragConstraints:u,layoutScroll:c,layoutRoot:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:RI(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||u&&$a(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:f})}function RI(n){if(n)return n.options.allowProjection!==!1?n.projection:RI(n.parent)}function uN({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&X1(n);function o(u,c){let f;const m={...K.useContext(Wy),...u,layoutId:cN(u)},{isStatic:g}=m,w=rN(u),S=r(u,g);if(!g&&$y){dN();const x=hN(m);f=x.MeasureLayout,w.visualElement=aN(i,S,m,e,x.ProjectionNode)}return T.jsxs(kf.Provider,{value:w,children:[f&&w.visualElement?T.jsx(f,{visualElement:w.visualElement,...m}):null,t(i,u,sN(S,w.visualElement,c),S,g,w.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=K.forwardRef(o);return l[iN]=i,l}function cN({layoutId:n}){const e=K.useContext(By).id;return e&&n!==void 0?e+"-"+n:n}function dN(n,e){K.useContext(II).strict}function hN(n){const{drag:e,layout:t}=il;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const kI=n=>e=>typeof e=="string"&&e.startsWith(n),iv=kI("--"),fN=kI("var(--"),sv=n=>fN(n)?pN.test(n.split("/*")[0].trim()):!1,pN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ic={};function mN(n){for(const e in n)ic[e]=n[e],iv(e)&&(ic[e].isCSSVariable=!0)}const yl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(yl);function NI(n,{layout:e,layoutId:t}){return Vo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!ic[n]||n==="opacity")}const fn=n=>!!(n&&n.getVelocity),DI=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ri=(n,e,t)=>t>e?e:t<n?n:t,vl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},sc={...vl,transform:n=>Ri(0,1,n)},sh={...vl,default:1},wc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),fs=wc("deg"),Gr=wc("%"),be=wc("px"),gN=wc("vh"),yN=wc("vw"),bT={...Gr,parse:n=>Gr.parse(n)/100,transform:n=>Gr.transform(n*100)},vN={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,backgroundPositionX:be,backgroundPositionY:be},_N={rotate:fs,rotateX:fs,rotateY:fs,rotateZ:fs,scale:sh,scaleX:sh,scaleY:sh,scaleZ:sh,skew:fs,skewX:fs,skewY:fs,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:sc,originX:bT,originY:bT,originZ:be},AT={...vl,transform:Math.round},ov={...vN,..._N,zIndex:AT,size:be,fillOpacity:sc,strokeOpacity:sc,numOctaves:AT},wN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TN=yl.length;function EN(n,e,t){let r="",i=!0;for(let o=0;o<TN;o++){const l=yl[o],u=n[l];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(l.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||t){const f=DI(u,ov[l]);if(!c){i=!1;const m=wN[l]||l;r+=`${m}(${f}) `}t&&(e[l]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function av(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let l=!1,u=!1;for(const c in e){const f=e[c];if(Vo.has(c)){l=!0;continue}else if(iv(c)){i[c]=f;continue}else{const m=DI(f,ov[c]);c.startsWith("origin")?(u=!0,o[c]=m):r[c]=m}}if(e.transform||(l||t?r.transform=EN(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:m=0}=o;r.transformOrigin=`${c} ${f} ${m}`}}const lv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MI(n,e,t){for(const r in e)!fn(e[r])&&!NI(r,t)&&(n[r]=e[r])}function SN({transformTemplate:n},e){return K.useMemo(()=>{const t=lv();return av(t,e,n),Object.assign({},t.vars,t.style)},[e])}function xN(n,e){const t=n.style||{},r={};return MI(r,t,n),Object.assign(r,SN(n,e)),r}function IN(n,e){const t={},r=xN(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const CN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uv(n){return typeof n!="string"||n.includes("-")?!1:!!(CN.indexOf(n)>-1||/[A-Z]/u.test(n))}const bN={offset:"stroke-dashoffset",array:"stroke-dasharray"},AN={offset:"strokeDashoffset",array:"strokeDasharray"};function PN(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?bN:AN;n[o.offset]=be.transform(-r);const l=be.transform(e),u=be.transform(t);n[o.array]=`${l} ${u}`}function PT(n,e,t){return typeof n=="string"?n:be.transform(e+t*n)}function RN(n,e,t){const r=PT(e,n.x,n.width),i=PT(t,n.y,n.height);return`${r} ${i}`}function cv(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:c=0,...f},m,g){if(av(n,f,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:w,style:S,dimensions:x}=n;w.transform&&(x&&(S.transform=w.transform),delete w.transform),x&&(i!==void 0||o!==void 0||S.transform)&&(S.transformOrigin=RN(x,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(w.x=e),t!==void 0&&(w.y=t),r!==void 0&&(w.scale=r),l!==void 0&&PN(w,l,u,c,!1)}const LI=()=>({...lv(),attrs:{}}),dv=n=>typeof n=="string"&&n.toLowerCase()==="svg";function kN(n,e,t,r){const i=K.useMemo(()=>{const o=LI();return cv(o,e,dv(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};MI(o,n.style,n),i.style={...o,...i.style}}return i}function NN(n=!1){return(t,r,i,{latestValues:o},l)=>{const c=(uv(t)?kN:IN)(r,o,l,t),f=eN(r,typeof t=="string",n),m=t!==K.Fragment?{...f,...c,ref:i}:{},{children:g}=r,w=K.useMemo(()=>fn(g)?g.get():g,[g]);return K.createElement(t,{...m,children:w})}}function RT(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function hv(n,e,t,r){if(typeof e=="function"){const[i,o]=RT(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=RT(r);e=e(t!==void 0?t:n.custom,i,o)}return e}const Rg=n=>Array.isArray(n),DN=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),MN=n=>Rg(n)?n[n.length-1]||0:n;function Th(n){const e=fn(n)?n.get():n;return DN(e)?e.toValue():e}function LN({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,o){const l={latestValues:ON(r,i,o,n),renderState:e()};return t&&(l.onMount=u=>t({props:r,current:u,...l}),l.onUpdate=u=>t(u)),l}const OI=n=>(e,t)=>{const r=K.useContext(kf),i=K.useContext(Pf),o=()=>LN(n,e,r,i);return t?o():zy(o)};function ON(n,e,t,r){const i={},o=r(n,{});for(const w in o)i[w]=Th(o[w]);let{initial:l,animate:u}=n;const c=Df(n),f=bI(n);e&&f&&!c&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||l===!1;const g=m?u:l;if(g&&typeof g!="boolean"&&!Nf(g)){const w=Array.isArray(g)?g:[g];for(let S=0;S<w.length;S++){const x=hv(n,w[S]);if(x){const{transitionEnd:P,transition:M,...O}=x;for(const R in O){let D=O[R];if(Array.isArray(D)){const B=m?D.length-1:0;D=D[B]}D!==null&&(i[R]=D)}for(const R in P)i[R]=P[R]}}}return i}function fv(n,e,t){const{style:r}=n,i={};for(const o in r)(fn(r[o])||e.style&&fn(e.style[o])||NI(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const VN={useVisualState:OI({scrapeMotionValuesFromProps:fv,createRenderState:lv})};function VI(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function jI(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}const FI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UI(n,e,t,r){jI(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(FI.has(i)?i:rv(i),e.attrs[i])}function BI(n,e,t){const r=fv(n,e,t);for(const i in n)if(fn(n[i])||fn(e[i])){const o=yl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const kT=["x","y","width","height","cx","cy","r"],jN={useVisualState:OI({scrapeMotionValuesFromProps:BI,createRenderState:LI,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let o=!!n.drag;if(!o){for(const u in i)if(Vo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<kT.length;u++){const c=kT[u];n[c]!==e[c]&&(l=!0)}l&&ot.read(()=>{VI(t,r),ot.render(()=>{cv(r,i,dv(t.tagName),n.transformTemplate),UI(t,r)})})}})};function FN(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...uv(r)?jN:VN,preloadedFeatures:n,useRender:NN(i),createVisualElement:e,Component:r};return uN(l)}}function oc(n,e,t){const r=n.getProps();return hv(r,e,t!==void 0?t:r.custom,n)}const zI=new Set(["width","height","top","left","right","bottom",...yl]);function UN(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,nc(t))}function BN(n,e){const t=oc(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const l in o){const u=MN(o[l]);UN(n,l,u)}}function zN(n){return!!(fn(n)&&n.add)}function kg(n,e){const t=n.getValue("willChange");if(zN(t))return t.add(e)}function $I(n){return n.props[AI]}const WI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,$N=1e-7,WN=12;function HN(n,e,t,r,i){let o,l,u=0;do l=e+(t-e)/2,o=WI(l,r,i)-n,o>0?t=l:e=l;while(Math.abs(o)>$N&&++u<WN);return l}function Tc(n,e,t,r){if(n===e&&t===r)return ir;const i=o=>HN(o,0,1,n,t);return o=>o===0||o===1?o:WI(i(o),e,r)}const HI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,GI=n=>e=>1-n(1-e),qI=Tc(.33,1.53,.69,.99),pv=GI(qI),KI=HI(pv),QI=n=>(n*=2)<1?.5*pv(n):.5*(2-Math.pow(2,-10*(n-1))),mv=n=>1-Math.sin(Math.acos(n)),YI=GI(mv),XI=HI(mv),JI=n=>/^0[^.\s]+$/u.test(n);function GN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||JI(n):!0}const Uu=n=>Math.round(n*1e5)/1e5,gv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qN(n){return n==null}const KN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yv=(n,e)=>t=>!!(typeof t=="string"&&KN.test(t)&&t.startsWith(n)||e&&!qN(t)&&Object.prototype.hasOwnProperty.call(t,e)),ZI=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,l,u]=r.match(gv);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},QN=n=>Ri(0,255,n),$m={...vl,transform:n=>Math.round(QN(n))},xo={test:yv("rgb","red"),parse:ZI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+$m.transform(n)+", "+$m.transform(e)+", "+$m.transform(t)+", "+Uu(sc.transform(r))+")"};function YN(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ng={test:yv("#"),parse:YN,transform:xo.transform},Wa={test:yv("hsl","hue"),parse:ZI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Gr.transform(Uu(e))+", "+Gr.transform(Uu(t))+", "+Uu(sc.transform(r))+")"},ln={test:n=>xo.test(n)||Ng.test(n)||Wa.test(n),parse:n=>xo.test(n)?xo.parse(n):Wa.test(n)?Wa.parse(n):Ng.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?xo.transform(n):Wa.transform(n)},XN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function JN(n){return isNaN(n)&&typeof n=="string"&&(n.match(gv)?.length||0)+(n.match(XN)?.length||0)>0}const eC="number",tC="color",ZN="var",eD="var(",NT="${}",tD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ac(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(tD,c=>(ln.test(c)?(r.color.push(o),i.push(tC),t.push(ln.parse(c))):c.startsWith(eD)?(r.var.push(o),i.push(ZN),t.push(c)):(r.number.push(o),i.push(eC),t.push(parseFloat(c))),++o,NT)).split(NT);return{values:t,split:u,indexes:r,types:i}}function nC(n){return ac(n).values}function rC(n){const{split:e,types:t}=ac(n),r=e.length;return i=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],i[l]!==void 0){const u=t[l];u===eC?o+=Uu(i[l]):u===tC?o+=ln.transform(i[l]):o+=i[l]}return o}}const nD=n=>typeof n=="number"?0:n;function rD(n){const e=nC(n);return rC(n)(e.map(nD))}const As={test:JN,parse:nC,createTransformer:rC,getAnimatableNone:rD},iD=new Set(["brightness","contrast","saturate","opacity"]);function sD(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(gv)||[];if(!r)return n;const i=t.replace(r,"");let o=iD.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const oD=/\b([a-z-]*)\(.*?\)/gu,Dg={...As,getAnimatableNone:n=>{const e=n.match(oD);return e?e.map(sD).join(" "):n}},aD={...ov,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:Dg,WebkitFilter:Dg},iC=n=>aD[n];function sC(n,e){let t=iC(n);return t!==Dg&&(t=As),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const lD=new Set(["auto","none","0"]);function uD(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!lD.has(o)&&ac(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=sC(t,i)}const Io=n=>n*180/Math.PI,Mg=n=>{const e=Io(Math.atan2(n[1],n[0]));return Lg(e)},cD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Mg,rotateZ:Mg,skewX:n=>Io(Math.atan(n[1])),skewY:n=>Io(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Lg=n=>(n=n%360,n<0&&(n+=360),n),DT=Mg,MT=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),LT=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),dD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:MT,scaleY:LT,scale:n=>(MT(n)+LT(n))/2,rotateX:n=>Lg(Io(Math.atan2(n[6],n[5]))),rotateY:n=>Lg(Io(Math.atan2(-n[2],n[0]))),rotateZ:DT,rotate:DT,skewX:n=>Io(Math.atan(n[4])),skewY:n=>Io(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function OT(n){return n.includes("scale")?1:0}function Og(n,e){if(!n||n==="none")return OT(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=dD,i=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=cD,i=u}if(!i)return OT(e);const o=r[e],l=i[1].split(",").map(fD);return typeof o=="function"?o(l):l[o]}const hD=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Og(t,e)};function fD(n){return parseFloat(n.trim())}const VT=n=>n===vl||n===be,pD=new Set(["x","y","z"]),mD=yl.filter(n=>!pD.has(n));function gD(n){const e=[];return mD.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const sl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Og(e,"x"),y:(n,{transform:e})=>Og(e,"y")};sl.translateX=sl.x;sl.translateY=sl.y;const Ao=new Set;let Vg=!1,jg=!1;function oC(){if(jg){const n=Array.from(Ao).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=gD(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jg=!1,Vg=!1,Ao.forEach(n=>n.complete()),Ao.clear()}function aC(){Ao.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(jg=!0)})}function yD(){aC(),oC()}class vv{constructor(e,t,r,i,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ao.add(this),Vg||(Vg=!0,ot.read(aC),ot.resolveKeyframes(oC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=i?.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const c=r.readValue(t,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),i&&l===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ao.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ao.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const lC=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),vD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _D(n){const e=vD.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function uC(n,e,t=1){const[r,i]=_D(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return lC(l)?parseFloat(l):l}return sv(i)?uC(i,e,t+1):i}const cC=n=>e=>e.test(n),wD={test:n=>n==="auto",parse:n=>n},dC=[vl,be,Gr,fs,yN,gN,wD],jT=n=>dC.find(cC(n));class hC extends vv{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),sv(f))){const m=uC(f,t.current);m!==void 0&&(e[c]=m),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!zI.has(r)||e.length!==2)return;const[i,o]=e,l=jT(i),u=jT(o);if(l!==u)if(VT(l)&&VT(u))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)GN(e[i])&&r.push(i);r.length&&uD(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=sl[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,c])=>{e.getValue(u).set(c)}),this.resolveNoneKeyframes()}}const FT=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(As.test(n)||n==="0")&&!n.startsWith("url("));function TD(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function ED(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=FT(i,e),u=FT(o,e);return!l||!u?!1:TD(n)||(t==="spring"||Yy(t))&&r}const SD=n=>n!==null;function Mf(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(SD),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const xD=40;class fC{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hr.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>xD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&yD(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Hr.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:l,onComplete:u,onUpdate:c,isGenerator:f}=this.options;if(!f&&!ED(e,r,i,o))if(l)this.options.duration=0;else{c&&c(Mf(e,this.options,t)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,t);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...m},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yt=(n,e,t)=>n+(e-n)*t;function Wm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ID({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,l=0;if(!e)i=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,c=2*t-u;i=Wm(c,u,n+1/3),o=Wm(c,u,n),l=Wm(c,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function jh(n,e){return t=>t>0?e:n}const Hm=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},CD=[Ng,xo,Wa],bD=n=>CD.find(e=>e.test(n));function UT(n){const e=bD(n);if(!e)return!1;let t=e.parse(n);return e===Wa&&(t=ID(t)),t}const BT=(n,e)=>{const t=UT(n),r=UT(e);if(!t||!r)return jh(n,e);const i={...t};return o=>(i.red=Hm(t.red,r.red,o),i.green=Hm(t.green,r.green,o),i.blue=Hm(t.blue,r.blue,o),i.alpha=yt(t.alpha,r.alpha,o),xo.transform(i))},AD=(n,e)=>t=>e(n(t)),Ec=(...n)=>n.reduce(AD),Fg=new Set(["none","hidden"]);function PD(n,e){return Fg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function RD(n,e){return t=>yt(n,e,t)}function _v(n){return typeof n=="number"?RD:typeof n=="string"?sv(n)?jh:ln.test(n)?BT:DD:Array.isArray(n)?pC:typeof n=="object"?ln.test(n)?BT:kD:jh}function pC(n,e){const t=[...n],r=t.length,i=n.map((o,l)=>_v(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=i[l](o);return t}}function kD(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=_v(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function ND(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=n.indexes[o][r[o]],u=n.values[l]??0;t[i]=u,r[o]++}return t}const DD=(n,e)=>{const t=As.createTransformer(e),r=ac(n),i=ac(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Fg.has(n)&&!i.values.length||Fg.has(e)&&!r.values.length?PD(n,e):Ec(pC(ND(r,i),i.values),t):jh(n,e)};function mC(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?yt(n,e,t):_v(n)(n,e)}const MD=5;function gC(n,e,t){const r=Math.max(e-MD,0);return yI(t-n(r),e-r)}const _t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zT=.001;function LD({duration:n=_t.duration,bounce:e=_t.bounce,velocity:t=_t.velocity,mass:r=_t.mass}){let i,o,l=1-e;l=Ri(_t.minDamping,_t.maxDamping,l),n=Ri(_t.minDuration,_t.maxDuration,Wr(n)),l<1?(i=f=>{const m=f*l,g=m*n,w=m-t,S=Ug(f,l),x=Math.exp(-g);return zT-w/S*x},o=f=>{const g=f*l*n,w=g*t+t,S=Math.pow(l,2)*Math.pow(f,2)*n,x=Math.exp(-g),P=Ug(Math.pow(f,2),l);return(-i(f)+zT>0?-1:1)*((w-S)*x)/P}):(i=f=>{const m=Math.exp(-f*n),g=(f-t)*n+1;return-.001+m*g},o=f=>{const m=Math.exp(-f*n),g=(t-f)*(n*n);return m*g});const u=5/n,c=VD(i,o,u);if(n=$r(n),isNaN(c))return{stiffness:_t.stiffness,damping:_t.damping,duration:n};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:n}}}const OD=12;function VD(n,e,t){let r=t;for(let i=1;i<OD;i++)r=r-n(r)/e(r);return r}function Ug(n,e){return n*Math.sqrt(1-e*e)}const jD=["duration","bounce"],FD=["stiffness","damping","mass"];function $T(n,e){return e.some(t=>n[t]!==void 0)}function UD(n){let e={velocity:_t.velocity,stiffness:_t.stiffness,damping:_t.damping,mass:_t.mass,isResolvedFromDuration:!1,...n};if(!$T(n,FD)&&$T(n,jD))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*Ri(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:_t.mass,stiffness:i,damping:o}}else{const t=LD(n);e={...e,...t,mass:_t.mass},e.isResolvedFromDuration=!0}return e}function Fh(n=_t.visualDuration,e=_t.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:f,mass:m,duration:g,velocity:w,isResolvedFromDuration:S}=UD({...t,velocity:-Wr(t.velocity||0)}),x=w||0,P=f/(2*Math.sqrt(c*m)),M=l-o,O=Wr(Math.sqrt(c/m)),R=Math.abs(M)<5;r||(r=R?_t.restSpeed.granular:_t.restSpeed.default),i||(i=R?_t.restDelta.granular:_t.restDelta.default);let D;if(P<1){const z=Ug(O,P);D=W=>{const L=Math.exp(-P*O*W);return l-L*((x+P*O*M)/z*Math.sin(z*W)+M*Math.cos(z*W))}}else if(P===1)D=z=>l-Math.exp(-O*z)*(M+(x+O*M)*z);else{const z=O*Math.sqrt(P*P-1);D=W=>{const L=Math.exp(-P*O*W),C=Math.min(z*W,300);return l-L*((x+P*O*M)*Math.sinh(C)+z*M*Math.cosh(C))/z}}const B={calculatedDuration:S&&g||null,next:z=>{const W=D(z);if(S)u.done=z>=g;else{let L=0;P<1&&(L=z===0?$r(x):gC(D,z,W));const C=Math.abs(L)<=r,A=Math.abs(l-W)<=i;u.done=C&&A}return u.value=u.done?l:W,u},toString:()=>{const z=Math.min(Jy(B),Oh),W=vI(L=>B.next(z*L).value,z,30);return z+"ms "+W},toTransition:()=>{}};return B}Fh.applyToOptions=n=>{const e=j1(n,100,Fh);return n.ease=tc()?e.ease:"easeOut",n.duration=$r(e.duration),n.type="keyframes",n};function WT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:c,restDelta:f=.5,restSpeed:m}){const g=n[0],w={done:!1,value:g},S=C=>u!==void 0&&C<u||c!==void 0&&C>c,x=C=>u===void 0?c:c===void 0||Math.abs(u-C)<Math.abs(c-C)?u:c;let P=t*e;const M=g+P,O=l===void 0?M:l(M);O!==M&&(P=O-g);const R=C=>-P*Math.exp(-C/r),D=C=>O+R(C),B=C=>{const A=R(C),b=D(C);w.done=Math.abs(A)<=f,w.value=w.done?O:b};let z,W;const L=C=>{S(w.value)&&(z=C,W=Fh({keyframes:[w.value,x(w.value)],velocity:gC(D,C,w.value),damping:i,stiffness:o,restDelta:f,restSpeed:m}))};return L(0),{calculatedDuration:null,next:C=>{let A=!1;return!W&&z===void 0&&(A=!0,B(C),L(C)),z!==void 0&&C>=z?W.next(C-z):(!A&&B(C),w)}}}const BD=Tc(.42,0,1,1),zD=Tc(0,0,.58,1),yC=Tc(.42,0,.58,1),$D=n=>Array.isArray(n)&&typeof n[0]!="number",WD={linear:ir,easeIn:BD,easeInOut:yC,easeOut:zD,circIn:mv,circInOut:XI,circOut:YI,backIn:pv,backInOut:KI,backOut:qI,anticipate:QI},HT=n=>{if(Qy(n)){gI(n.length===4);const[e,t,r,i]=n;return Tc(e,t,r,i)}else if(typeof n=="string")return WD[n];return n};function HD(n,e,t){const r=[],i=t||mC,o=n.length-1;for(let l=0;l<o;l++){let u=i(n[l],n[l+1]);if(e){const c=Array.isArray(e)?e[l]||ir:e;u=Ec(c,u)}r.push(u)}return r}function GD(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(gI(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=HD(e,r,i),c=u.length,f=m=>{if(l&&m<n[0])return e[0];let g=0;if(c>1)for(;g<n.length-2&&!(m<n[g+1]);g++);const w=ec(n[g],n[g+1],m);return u[g](w)};return t?m=>f(Ri(n[0],n[o-1],m)):f}function qD(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=ec(0,e,r);n.push(yt(t,1,i))}}function KD(n){const e=[0];return qD(e,n.length-1),e}function QD(n,e){return n.map(t=>t*e)}function YD(n,e){return n.map(()=>e||yC).splice(0,n.length-1)}function Uh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=$D(r)?r.map(HT):HT(r),o={done:!1,value:e[0]},l=QD(t&&t.length===e.length?t:KD(e),n),u=GD(l,e,{ease:Array.isArray(i)?i:YD(e,i)});return{calculatedDuration:n,next:c=>(o.value=u(c),o.done=c>=n,o)}}const XD=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ot.update(e,!0),stop:()=>bs(e),now:()=>Jt.isProcessing?Jt.timestamp:Hr.now()}},JD={decay:WT,inertia:WT,tween:Uh,keyframes:Uh,spring:Fh},ZD=n=>n/100;class wv extends fC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:r,element:i,keyframes:o}=this.options,l=i?.KeyframeResolver||vv,u=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new l(o,u,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=this.options,u=Yy(t)?t:JD[t]||Uh;let c,f;u!==Uh&&typeof e[0]!="number"&&(c=Ec(ZD,mC(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=Jy(m));const{calculatedDuration:g}=m,w=g+i,S=w*(r+1)-i;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:g,resolvedDuration:w,totalDuration:S}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return o.next(0);const{delay:w,repeat:S,repeatType:x,repeatDelay:P,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const O=this.currentTime-w*(this.speed>=0?1:-1),R=this.speed>=0?O<0:O>m;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let D=this.currentTime,B=o;if(S){const C=Math.min(this.currentTime,m)/g;let A=Math.floor(C),b=C%1;!b&&C>=1&&(b=1),b===1&&A--,A=Math.min(A,S+1),!!(A%2)&&(x==="reverse"?(b=1-b,P&&(b-=P/g)):x==="mirror"&&(B=l)),D=Ri(0,1,b)*g}const z=R?{done:!1,value:c[0]}:B.next(D);u&&(z.value=u(z.value));let{done:W}=z;!R&&f!==null&&(W=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return L&&i!==void 0&&(z.value=Mf(c,this.options,i)),M&&M(z.value),L&&this.finish(),z}get duration(){const{resolved:e}=this;return e?Wr(e.calculatedDuration):0}get time(){return Wr(this.currentTime)}set time(e){e=$r(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Wr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=XD,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const eM=new Set(["opacity","clipPath","filter","transform"]),tM=qy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Bh=10,nM=2e4;function rM(n){return Yy(n.type)||n.type==="spring"||!wI(n.ease)}function iM(n,e){const t=new wv({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let o=0;for(;!r.done&&o<nM;)r=t.sample(o),i.push(r.value),o+=Bh;return{times:void 0,keyframes:i,duration:o-Bh,ease:"linear"}}const vC={anticipate:QI,backInOut:KI,circInOut:XI};function sM(n){return n in vC}class GT extends fC{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new hC(o,(l,u)=>this.onKeyframesResolved(l,u),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:o,type:l,motionValue:u,name:c,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&tc()&&sM(o)&&(o=vC[o]),rM(this.options)){const{onComplete:g,onUpdate:w,motionValue:S,element:x,...P}=this.options,M=iM(e,P);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,i=M.times,o=M.ease,l="keyframes"}const m=V1(u.owner.current,c,e,{...this.options,duration:r,times:i,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(wT(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(Mf(e,this.options,t)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:i,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Wr(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Wr(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=$r(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return ir;const{animation:r}=t;wT(r,e)}return ir}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:o,ease:l,times:u}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:w,...S}=this.options,x=new wv({...S,keyframes:r,duration:i,type:o,ease:l,times:u,isGenerator:!0}),P=$r(this.time);f.setWithVelocity(x.sample(P-Bh).value,x.sample(P).value,Bh)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:o,damping:l,type:u}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=t.owner.getProps();return tM()&&r&&eM.has(r)&&(r!=="transform"||!f)&&!c&&!i&&o!=="mirror"&&l!==0&&u!=="inertia"}}const oM={type:"spring",stiffness:500,damping:25,restSpeed:10},aM=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),lM={type:"keyframes",duration:.8},uM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cM=(n,{keyframes:e})=>e.length>2?lM:Vo.has(n)?n.startsWith("scale")?aM(e[1]):oM:uM;function dM({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:u,from:c,elapsed:f,...m}){return!!Object.keys(m).length}const Tv=(n,e,t,r={},i,o)=>l=>{const u=Xy(r,n)||{},c=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-$r(c);let m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:w=>{e.set(w),u.onUpdate&&u.onUpdate(w)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:i};dM(u)||(m={...m,...cM(n,m)}),m.duration&&(m.duration=$r(m.duration)),m.repeatDelay&&(m.repeatDelay=$r(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),m.allowFlatten=!u.type&&!u.ease,g&&!o&&e.get()!==void 0){const w=Mf(m.keyframes,u);if(w!==void 0)return ot.update(()=>{m.onUpdate(w),m.onComplete()}),new M1([])}return!o&&GT.supports(m)?new GT(m):new wv(m)};function hM({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function _C(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const c=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const m in u){const g=n.getValue(m,n.latestValues[m]??null),w=u[m];if(w===void 0||f&&hM(f,m))continue;const S={delay:t,...Xy(o||{},m)};let x=!1;if(window.MotionHandoffAnimation){const M=$I(n);if(M){const O=window.MotionHandoffAnimation(M,m,ot);O!==null&&(S.startTime=O,x=!0)}}kg(n,m),g.start(Tv(m,g,w,n.shouldReduceMotion&&zI.has(m)?{type:!1}:S,n,x));const P=g.animation;P&&c.push(P)}return l&&Promise.all(c).then(()=>{ot.update(()=>{l&&BN(n,l)})}),c}function Bg(n,e,t={}){const r=oc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(_C(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=i;return fM(n,e,f+c,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[c,f]=u==="beforeChildren"?[o,l]:[l,o];return c().then(()=>f())}else return Promise.all([o(),l(t.delay)])}function fM(n,e,t=0,r=0,i=1,o){const l=[],u=(n.variantChildren.size-1)*r,c=i===1?(f=0)=>f*r:(f=0)=>u-f*r;return Array.from(n.variantChildren).sort(pM).forEach((f,m)=>{f.notify("AnimationStart",e),l.push(Bg(f,e,{...o,delay:t+c(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function pM(n,e){return n.sortNodePosition(e)}function mM(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Bg(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=Bg(n,e,t);else{const i=typeof e=="function"?oc(n,e,t.custom):e;r=Promise.all(_C(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function wC(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const gM=nv.length;function TC(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?TC(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<gM;t++){const r=nv[t],i=n.props[r];(rc(i)||i===!1)&&(e[r]=i)}return e}const yM=[...tv].reverse(),vM=tv.length;function _M(n){return e=>Promise.all(e.map(({animation:t,options:r})=>mM(n,t,r)))}function wM(n){let e=_M(n),t=qT(),r=!0;const i=c=>(f,m)=>{const g=oc(n,m,c==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:w,transitionEnd:S,...x}=g;f={...f,...x,...S}}return f};function o(c){e=c(n)}function l(c){const{props:f}=n,m=TC(n.parent)||{},g=[],w=new Set;let S={},x=1/0;for(let M=0;M<vM;M++){const O=yM[M],R=t[O],D=f[O]!==void 0?f[O]:m[O],B=rc(D),z=O===c?R.isActive:null;z===!1&&(x=M);let W=D===m[O]&&D!==f[O]&&B;if(W&&r&&n.manuallyAnimateOnMount&&(W=!1),R.protectedKeys={...S},!R.isActive&&z===null||!D&&!R.prevProp||Nf(D)||typeof D=="boolean")continue;const L=TM(R.prevProp,D);let C=L||O===c&&R.isActive&&!W&&B||M>x&&B,A=!1;const b=Array.isArray(D)?D:[D];let V=b.reduce(i(O),{});z===!1&&(V={});const{prevResolvedValues:U={}}=R,k={...U,...V},ne=he=>{C=!0,w.has(he)&&(A=!0,w.delete(he)),R.needsAnimating[he]=!0;const H=n.getValue(he);H&&(H.liveStyle=!1)};for(const he in k){const H=V[he],ie=U[he];if(S.hasOwnProperty(he))continue;let j=!1;Rg(H)&&Rg(ie)?j=!wC(H,ie):j=H!==ie,j?H!=null?ne(he):w.add(he):H!==void 0&&w.has(he)?ne(he):R.protectedKeys[he]=!0}R.prevProp=D,R.prevResolvedValues=V,R.isActive&&(S={...S,...V}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(W&&L)||A)&&g.push(...b.map(he=>({animation:he,options:{type:O}})))}if(w.size){const M={};if(typeof f.initial!="boolean"){const O=oc(n,Array.isArray(f.initial)?f.initial[0]:f.initial);O&&O.transition&&(M.transition=O.transition)}w.forEach(O=>{const R=n.getBaseTarget(O),D=n.getValue(O);D&&(D.liveStyle=!0),M[O]=R??null}),g.push({animation:M})}let P=!!g.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(g):Promise.resolve()}function u(c,f){if(t[c].isActive===f)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(c,f)),t[c].isActive=f;const m=l(c);for(const g in t)t[g].protectedKeys={};return m}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=qT(),r=!0}}}function TM(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!wC(e,n):!1}function yo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qT(){return{animate:yo(!0),whileInView:yo(),whileHover:yo(),whileTap:yo(),whileDrag:yo(),whileFocus:yo(),exit:yo()}}class js{constructor(e){this.isMounted=!1,this.node=e}update(){}}class EM extends js{constructor(e){super(e),e.animationState||(e.animationState=wM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let SM=0;class xM extends js{constructor(){super(...arguments),this.id=SM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const IM={animation:{Feature:EM},exit:{Feature:xM}};function lc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Sc(n){return{point:{x:n.pageX,y:n.pageY}}}const CM=n=>e=>ev(e)&&n(e,Sc(e));function Bu(n,e,t,r){return lc(n,e,CM(t),r)}function EC({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function bM({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function AM(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const SC=1e-4,PM=1-SC,RM=1+SC,xC=.01,kM=0-xC,NM=0+xC;function wn(n){return n.max-n.min}function DM(n,e,t){return Math.abs(n-e)<=t}function KT(n,e,t,r=.5){n.origin=r,n.originPoint=yt(e.min,e.max,n.origin),n.scale=wn(t)/wn(e),n.translate=yt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=PM&&n.scale<=RM||isNaN(n.scale))&&(n.scale=1),(n.translate>=kM&&n.translate<=NM||isNaN(n.translate))&&(n.translate=0)}function zu(n,e,t,r){KT(n.x,e.x,t.x,r?r.originX:void 0),KT(n.y,e.y,t.y,r?r.originY:void 0)}function QT(n,e,t){n.min=t.min+e.min,n.max=n.min+wn(e)}function MM(n,e,t){QT(n.x,e.x,t.x),QT(n.y,e.y,t.y)}function YT(n,e,t){n.min=e.min-t.min,n.max=n.min+wn(e)}function $u(n,e,t){YT(n.x,e.x,t.x),YT(n.y,e.y,t.y)}const XT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ha=()=>({x:XT(),y:XT()}),JT=()=>({min:0,max:0}),St=()=>({x:JT(),y:JT()});function tr(n){return[n("x"),n("y")]}function Gm(n){return n===void 0||n===1}function zg({scale:n,scaleX:e,scaleY:t}){return!Gm(n)||!Gm(e)||!Gm(t)}function wo(n){return zg(n)||IC(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function IC(n){return ZT(n.x)||ZT(n.y)}function ZT(n){return n&&n!=="0%"}function zh(n,e,t){const r=n-t,i=e*r;return t+i}function eE(n,e,t,r,i){return i!==void 0&&(n=zh(n,i,r)),zh(n,t,r)+e}function $g(n,e=0,t=1,r,i){n.min=eE(n.min,e,t,r,i),n.max=eE(n.max,e,t,r,i)}function CC(n,{x:e,y:t}){$g(n.x,e.translate,e.scale,e.originPoint),$g(n.y,t.translate,t.scale,t.originPoint)}const tE=.999999999999,nE=1.0000000000001;function LM(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,l;for(let u=0;u<i;u++){o=t[u],l=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&qa(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,CC(n,l)),r&&wo(o.latestValues)&&qa(n,o.latestValues))}e.x<nE&&e.x>tE&&(e.x=1),e.y<nE&&e.y>tE&&(e.y=1)}function Ga(n,e){n.min=n.min+e,n.max=n.max+e}function rE(n,e,t,r,i=.5){const o=yt(n.min,n.max,i);$g(n,e,t,o,r)}function qa(n,e){rE(n.x,e.x,e.scaleX,e.scale,e.originX),rE(n.y,e.y,e.scaleY,e.scale,e.originY)}function bC(n,e){return EC(AM(n.getBoundingClientRect(),e))}function OM(n,e,t){const r=bC(n,t),{scroll:i}=e;return i&&(Ga(r.x,i.offset.x),Ga(r.y,i.offset.y)),r}const AC=({current:n})=>n?n.ownerDocument.defaultView:null,iE=(n,e)=>Math.abs(n-e);function VM(n,e){const t=iE(n.x,e.x),r=iE(n.y,e.y);return Math.sqrt(t**2+r**2)}class PC{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Km(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=VM(g.offset,{x:0,y:0})>=3;if(!w&&!S)return;const{point:x}=g,{timestamp:P}=Jt;this.history.push({...x,timestamp:P});const{onStart:M,onMove:O}=this.handlers;w||(M&&M(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,g)},this.handlePointerMove=(g,w)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=qm(w,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(g,w)=>{this.end();const{onEnd:S,onSessionEnd:x,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Km(g.type==="pointercancel"?this.lastMoveEventInfo:qm(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(g,M),x&&x(g,M)},!ev(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const l=Sc(e),u=qm(l,this.transformPagePoint),{point:c}=u,{timestamp:f}=Jt;this.history=[{...c,timestamp:f}];const{onSessionStart:m}=t;m&&m(e,Km(u,this.history)),this.removeListeners=Ec(Bu(this.contextWindow,"pointermove",this.handlePointerMove),Bu(this.contextWindow,"pointerup",this.handlePointerUp),Bu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bs(this.updatePoint)}}function qm(n,e){return e?{point:e(n.point)}:n}function sE(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Km({point:n},e){return{point:n,delta:sE(n,RC(e)),offset:sE(n,jM(e)),velocity:FM(e,.1)}}function jM(n){return n[0]}function RC(n){return n[n.length-1]}function FM(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=RC(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>$r(e)));)t--;if(!r)return{x:0,y:0};const o=Wr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function UM(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?yt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?yt(t,n,r.max):Math.min(n,t)),n}function oE(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function BM(n,{top:e,left:t,bottom:r,right:i}){return{x:oE(n.x,t,i),y:oE(n.y,e,r)}}function aE(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function zM(n,e){return{x:aE(n.x,e.x),y:aE(n.y,e.y)}}function $M(n,e){let t=.5;const r=wn(n),i=wn(e);return i>r?t=ec(e.min,e.max-r,n.min):r>i&&(t=ec(n.min,n.max-i,e.min)),Ri(0,1,t)}function WM(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Wg=.35;function HM(n=Wg){return n===!1?n=0:n===!0&&(n=Wg),{x:lE(n,"left","right"),y:lE(n,"top","bottom")}}function lE(n,e,t){return{min:uE(n,e),max:uE(n,t)}}function uE(n,e){return typeof n=="number"?n:n[e]||0}const GM=new WeakMap;class qM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Sc(m).point)},o=(m,g)=>{const{drag:w,dragPropagation:S,onDragStart:x}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=z1(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),tr(M=>{let O=this.getAxisMotionValue(M).get()||0;if(Gr.test(O)){const{projection:R}=this.visualElement;if(R&&R.layout){const D=R.layout.layoutBox[M];D&&(O=wn(D)*(parseFloat(O)/100))}}this.originPoint[M]=O}),x&&ot.postRender(()=>x(m,g)),kg(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:x,onDrag:P}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:M}=g;if(S&&this.currentDirection===null){this.currentDirection=KM(M),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,M),this.updateAxis("y",g.point,M),this.visualElement.render(),P&&P(m,g)},u=(m,g)=>this.stop(m,g),c=()=>tr(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new PC(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:AC(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ot.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!oh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=UM(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&$a(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=BM(r.layoutBox,e):this.constraints=!1,this.elastic=HM(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&tr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=WM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!$a(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=OM(r,i.root,this.visualElement.getTransformPagePoint());let l=zM(i.layout.layoutBox,o);if(t){const u=t(bM(l));this.hasMutatedConstraints=!!u,u&&(l=EC(u))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=tr(m=>{if(!oh(m,t,this.currentDirection))return;let g=c&&c[m]||{};l&&(g={min:0,max:0});const w=i?200:1e6,S=i?40:1e7,x={type:"inertia",velocity:r?e[m]:0,bounceStiffness:w,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,x)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return kg(this.visualElement,e),r.start(Tv(e,r,0,t,this.visualElement,!1))}stopAnimation(){tr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){tr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){tr(t=>{const{drag:r}=this.getProps();if(!oh(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[t];o.set(e[t]-yt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!$a(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};tr(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const c=u.get();i[l]=$M({min:c,max:c},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),tr(l=>{if(!oh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:c,max:f}=this.constraints[l];u.set(yt(c,f,i[l]))})}addListeners(){if(!this.visualElement.current)return;GM.set(this.visualElement,this);const e=this.visualElement.current,t=Bu(e,"pointerdown",c=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();$a(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ot.read(r);const l=lc(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(tr(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=Wg,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function oh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function KM(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class QM extends js{constructor(e){super(e),this.removeGroupControls=ir,this.removeListeners=ir,this.controls=new qM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ir}unmount(){this.removeGroupControls(),this.removeListeners()}}const cE=n=>(e,t)=>{n&&ot.postRender(()=>n(e,t))};class YM extends js{constructor(){super(...arguments),this.removePointerDownListener=ir}onPointerDown(e){this.session=new PC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cE(e),onStart:cE(t),onMove:r,onEnd:(o,l)=>{delete this.session,i&&ot.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Bu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dE(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Au={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(be.test(n))n=parseFloat(n);else return n;const t=dE(n,e.target.x),r=dE(n,e.target.y);return`${t}% ${r}%`}},XM={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=As.parse(n);if(i.length>5)return r;const o=As.createTransformer(n),l=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,c=t.y.scale*e.y;i[0+l]/=u,i[1+l]/=c;const f=yt(u,c,.5);return typeof i[2+l]=="number"&&(i[2+l]/=f),typeof i[3+l]=="number"&&(i[3+l]/=f),o(i)}};class JM extends K.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;mN(ZM),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||ot.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Zy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kC(n){const[e,t]=mI(),r=K.useContext(By);return T.jsx(JM,{...n,layoutGroup:r,switchLayoutGroup:K.useContext(PI),isPresent:e,safeToRemove:t})}const ZM={borderRadius:{...Au,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Au,borderTopRightRadius:Au,borderBottomLeftRadius:Au,borderBottomRightRadius:Au,boxShadow:XM};function eL(n,e,t){const r=fn(n)?n:nc(n);return r.start(Tv("",r,e,t)),r.animation}function tL(n){return n instanceof SVGElement&&n.tagName!=="svg"}const nL=(n,e)=>n.depth-e.depth;class rL{constructor(){this.children=[],this.isDirty=!1}add(e){Hy(this.children,e),this.isDirty=!0}remove(e){Gy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nL),this.isDirty=!1,this.children.forEach(e)}}function iL(n,e){const t=Hr.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(bs(r),n(o-e))};return ot.read(r,!0),()=>bs(r)}const NC=["TopLeft","TopRight","BottomLeft","BottomRight"],sL=NC.length,hE=n=>typeof n=="string"?parseFloat(n):n,fE=n=>typeof n=="number"||be.test(n);function oL(n,e,t,r,i,o){i?(n.opacity=yt(0,t.opacity!==void 0?t.opacity:1,aL(r)),n.opacityExit=yt(e.opacity!==void 0?e.opacity:1,0,lL(r))):o&&(n.opacity=yt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<sL;l++){const u=`border${NC[l]}Radius`;let c=pE(e,u),f=pE(t,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||fE(c)===fE(f)?(n[u]=Math.max(yt(hE(c),hE(f),r),0),(Gr.test(f)||Gr.test(c))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=yt(e.rotate||0,t.rotate||0,r))}function pE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const aL=DC(0,.5,YI),lL=DC(.5,.95,ir);function DC(n,e,t){return r=>r<n?0:r>e?1:t(ec(n,e,r))}function mE(n,e){n.min=e.min,n.max=e.max}function er(n,e){mE(n.x,e.x),mE(n.y,e.y)}function gE(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function yE(n,e,t,r,i){return n-=e,n=zh(n,1/t,r),i!==void 0&&(n=zh(n,1/i,r)),n}function uL(n,e=0,t=1,r=.5,i,o=n,l=n){if(Gr.test(e)&&(e=parseFloat(e),e=yt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=yt(o.min,o.max,r);n===o&&(u-=e),n.min=yE(n.min,e,t,u,i),n.max=yE(n.max,e,t,u,i)}function vE(n,e,[t,r,i],o,l){uL(n,e[t],e[r],e[i],e.scale,o,l)}const cL=["x","scaleX","originX"],dL=["y","scaleY","originY"];function _E(n,e,t,r){vE(n.x,e,cL,t?t.x:void 0,r?r.x:void 0),vE(n.y,e,dL,t?t.y:void 0,r?r.y:void 0)}function wE(n){return n.translate===0&&n.scale===1}function MC(n){return wE(n.x)&&wE(n.y)}function TE(n,e){return n.min===e.min&&n.max===e.max}function hL(n,e){return TE(n.x,e.x)&&TE(n.y,e.y)}function EE(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function LC(n,e){return EE(n.x,e.x)&&EE(n.y,e.y)}function SE(n){return wn(n.x)/wn(n.y)}function xE(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class fL{constructor(){this.members=[]}add(e){Hy(this.members,e),e.scheduleRender()}remove(e){if(Gy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pL(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((i||o||l)&&(r=`translate3d(${i}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:w,skewX:S,skewY:x}=t;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),w&&(r+=`rotateY(${w}deg) `),S&&(r+=`skewX(${S}deg) `),x&&(r+=`skewY(${x}deg) `)}const u=n.x.scale*e.x,c=n.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const Qm=["","X","Y","Z"],mL={visibility:"hidden"},IE=1e3;let gL=0;function Ym(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function OC(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=$I(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ot,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&OC(r)}function VC({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},u=e?.()){this.id=gL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_L),this.nodes.forEach(xL),this.nodes.forEach(IL),this.nodes.forEach(wL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new rL)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Ky),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const c=this.eventHandlers.get(l);c&&c.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tL(l),this.instance=l;const{layoutId:c,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),n){let g;const w=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=iL(w,250),Eh.hasAnimatedSinceResize&&(Eh.hasAnimatedSinceResize=!1,this.nodes.forEach(bE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:w,hasRelativeLayoutChanged:S,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||m.getDefaultTransition()||RL,{onLayoutAnimationStart:M,onLayoutAnimationComplete:O}=m.getProps(),R=!this.targetLayout||!LC(this.targetLayout,x),D=!w&&S;if(this.options.layoutRoot||this.resumeFrom||D||w&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,D);const B={...Xy(P,"layout"),onPlay:M,onComplete:O};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else w||bE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,bs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CE);return}this.isUpdating||this.nodes.forEach(EL),this.isUpdating=!1,this.nodes.forEach(SL),this.nodes.forEach(yL),this.nodes.forEach(vL),this.clearAllSnapshots();const u=Hr.now();Jt.delta=Ri(0,1e3/60,u-Jt.timestamp),Jt.timestamp=u,Jt.isProcessing=!0,Bm.update.process(Jt),Bm.preRender.process(Jt),Bm.render.process(Jt),Jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TL),this.sharedNodes.forEach(bL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!MC(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&(u||wo(this.latestValues)||m)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return l&&(c=this.removeTransform(c)),kL(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return St();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(NL))){const{scroll:f}=this.root;f&&(Ga(u.x,f.offset.x),Ga(u.y,f.offset.y))}return u}removeElementScroll(l){const u=St();if(er(u,l),this.scroll?.wasRoot)return u;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:m,options:g}=f;f!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&er(u,l),Ga(u.x,m.offset.x),Ga(u.y,m.offset.y))}return u}applyTransform(l,u=!1){const c=St();er(c,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&qa(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),wo(m.latestValues)&&qa(c,m.latestValues)}return wo(this.latestValues)&&qa(c,this.latestValues),c}removeTransform(l){const u=St();er(u,l);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!wo(f.latestValues))continue;zg(f.latestValues)&&f.updateSnapshot();const m=St(),g=f.measurePageBox();er(m,g),_E(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return wo(this.latestValues)&&_E(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Jt.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),$u(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):er(this.target,this.layout.layoutBox),CC(this.target,this.targetDelta)):er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),$u(this.relativeTargetOrigin,this.target,w.target),er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zg(this.parent.latestValues)||IC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Jt.timestamp&&(c=!1),c)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;er(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,w=this.treeScale.y;LM(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=St());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gE(this.prevProjectionDelta.x,this.projectionDelta.x),gE(this.prevProjectionDelta.y,this.projectionDelta.y)),zu(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==w||!xE(this.projectionDelta.x,this.prevProjectionDelta.x)||!xE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ha(),this.projectionDelta=Ha(),this.projectionDeltaWithTransform=Ha()}setAnimationOrigin(l,u=!1){const c=this.snapshot,f=c?c.latestValues:{},m={...this.latestValues},g=Ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const w=St(),S=c?c.source:void 0,x=this.layout?this.layout.source:void 0,P=S!==x,M=this.getStack(),O=!M||M.members.length<=1,R=!!(P&&!O&&this.options.crossfade===!0&&!this.path.some(PL));this.animationProgress=0;let D;this.mixTargetDelta=B=>{const z=B/1e3;AE(g.x,l.x,z),AE(g.y,l.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($u(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AL(this.relativeTarget,this.relativeTargetOrigin,w,z),D&&hL(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=St()),er(D,this.relativeTarget)),P&&(this.animationValues=m,oL(m,f,this.latestValues,z,R,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(bs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Eh.hasAnimatedSinceResize=!0,this.currentAnimation=eL(0,IE,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:m}=l;if(!(!u||!c||!f)){if(this!==l&&this.layout&&f&&jC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||St();const g=wn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+g;const w=wn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+w}er(u,c),qa(u,m),zu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new fL),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const f={};c.z&&Ym("z",l,f,this.animationValues);for(let m=0;m<Qm.length;m++)Ym(`rotate${Qm[m]}`,l,f,this.animationValues),Ym(`skew${Qm[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return mL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Th(l?.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Th(l?.pointerEvents)||""),this.hasProjected&&!wo(this.latestValues)&&(S.transform=c?c({},""):"none",this.hasProjected=!1),S}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=pL(this.projectionDeltaWithTransform,this.treeScale,m),c&&(u.transform=c(m,u.transform));const{x:g,y:w}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,f.animationValues?u.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const S in ic){if(m[S]===void 0)continue;const{correct:x,applyTo:P,isCSSVariable:M}=ic[S],O=u.transform==="none"?m[S]:x(m[S],f);if(P){const R=P.length;for(let D=0;D<R;D++)u[P[D]]=O}else M?this.options.visualElement.renderState.vars[S]=O:u[S]=O}return this.options.layoutId&&(u.pointerEvents=f===this?Th(l?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(CE),this.root.sharedNodes.clear()}}}function yL(n){n.updateLayout()}function vL(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,o=e.source!==n.layout.source;i==="size"?tr(m=>{const g=o?e.measuredBox[m]:e.layoutBox[m],w=wn(g);g.min=t[m].min,g.max=g.min+w}):jC(i,e.layoutBox,t)&&tr(m=>{const g=o?e.measuredBox[m]:e.layoutBox[m],w=wn(t[m]);g.max=g.min+w,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+w)});const l=Ha();zu(l,t,e.layoutBox);const u=Ha();o?zu(u,n.applyTransform(r,!0),e.measuredBox):zu(u,t,e.layoutBox);const c=!MC(l);let f=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:w}=m;if(g&&w){const S=St();$u(S,e.layoutBox,g.layoutBox);const x=St();$u(x,t,w.layoutBox),LC(S,x)||(f=!0),m.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=S,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function _L(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function wL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function TL(n){n.clearSnapshot()}function CE(n){n.clearMeasurements()}function EL(n){n.isLayoutDirty=!1}function SL(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function bE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function xL(n){n.resolveTargetDelta()}function IL(n){n.calcProjection()}function CL(n){n.resetSkewAndRotation()}function bL(n){n.removeLeadSnapshot()}function AE(n,e,t){n.translate=yt(e.translate,0,t),n.scale=yt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function PE(n,e,t,r){n.min=yt(e.min,t.min,r),n.max=yt(e.max,t.max,r)}function AL(n,e,t,r){PE(n.x,e.x,t.x,r),PE(n.y,e.y,t.y,r)}function PL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const RL={duration:.45,ease:[.4,0,.1,1]},RE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),kE=RE("applewebkit/")&&!RE("chrome/")?Math.round:ir;function NE(n){n.min=kE(n.min),n.max=kE(n.max)}function kL(n){NE(n.x),NE(n.y)}function jC(n,e,t){return n==="position"||n==="preserve-aspect"&&!DM(SE(e),SE(t),.2)}function NL(n){return n!==n.root&&n.scroll?.wasRoot}const DL=VC({attachResizeListener:(n,e)=>lc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xm={current:void 0},FC=VC({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Xm.current){const n=new DL({});n.mount(window),n.setOptions({layoutScroll:!0}),Xm.current=n}return Xm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),ML={pan:{Feature:YM},drag:{Feature:QM,ProjectionNode:FC,MeasureLayout:kC}};function DE(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&ot.postRender(()=>o(e,Sc(e)))}class LL extends js{mount(){const{current:e}=this.node;e&&(this.unmount=W1(e,(t,r)=>(DE(this.node,r,"Start"),i=>DE(this.node,i,"End"))))}unmount(){}}class OL extends js{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ec(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ME(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&ot.postRender(()=>o(e,Sc(e)))}class VL extends js{mount(){const{current:e}=this.node;e&&(this.unmount=K1(e,(t,r)=>(ME(this.node,r,"Start"),(i,{success:o})=>ME(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hg=new WeakMap,Jm=new WeakMap,jL=n=>{const e=Hg.get(n.target);e&&e(n)},FL=n=>{n.forEach(jL)};function UL({root:n,...e}){const t=n||document;Jm.has(t)||Jm.set(t,{});const r=Jm.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(FL,{root:n,...e})),r[i]}function BL(n,e,t){const r=UL(e);return Hg.set(n,t),r.observe(n),()=>{Hg.delete(n),r.unobserve(n)}}const zL={some:0,all:1};class $L extends js{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:zL[i]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),w=f?m:g;w&&w(c)};return BL(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(WL(e,t))&&this.startObserver()}unmount(){}}function WL({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const HL={inView:{Feature:$L},tap:{Feature:VL},focus:{Feature:OL},hover:{Feature:LL}},GL={layout:{ProjectionNode:FC,MeasureLayout:kC}},Gg={current:null},UC={current:!1};function qL(){if(UC.current=!0,!!$y)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gg.current=n.matches;n.addListener(e),e()}else Gg.current=!1}const KL=[...dC,ln,As],QL=n=>KL.find(cC(n)),YL=new WeakMap;function XL(n,e,t){for(const r in e){const i=e[r],o=t[r];if(fn(i))n.addValue(r,i);else if(fn(o))n.addValue(r,nc(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=n.getStaticValue(r);n.addValue(r,nc(l!==void 0?l:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const LE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class JL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Hr.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,ot.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:m}=l;this.onUpdate=m,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Df(t),this.isVariantNode=bI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...w}=this.scrapeMotionValuesFromProps(t,{},this);for(const S in w){const x=w[S];c[S]!==void 0&&fn(x)&&x.set(c[S],!1)}}mount(e){this.current=e,YL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),UC.current||qL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),bs(this.notifyUpdate),bs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in il){const t=il[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<LE.length;r++){const i=LE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=e[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=XL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=nc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(lC(r)||JI(r))?r=parseFloat(r):!QL(r)&&As.test(t)&&(r=sC(e,t)),this.setBaseTarget(e,fn(r)?r.get():r)),fn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=hv(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!fn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Ky),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class BC extends JL{constructor(){super(...arguments),this.KeyframeResolver=hC}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function ZL(n){return window.getComputedStyle(n)}class eO extends BC{constructor(){super(...arguments),this.type="html",this.renderInstance=jI}readValueFromInstance(e,t){if(Vo.has(t))return hD(e,t);{const r=ZL(e),i=(iv(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return bC(e,t)}build(e,t,r){av(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return fv(e,t,r)}}class tO extends BC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&VI(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Vo.has(t)){const r=iC(t);return r&&r.default||0}return t=FI.has(t)?t:rv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return BI(e,t,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&ot.postRender(this.updateDimensions)}build(e,t,r){cv(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){UI(e,t,r,i)}mount(e){this.isSVGTag=dv(e.tagName),super.mount(e)}}const nO=(n,e)=>uv(n)?new tO(e):new eO(e,{allowProjection:n!==K.Fragment}),rO=FN({...IM,...HL,...ML,...GL},nO),st=tN(rO);function zC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=zC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function iO(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=zC(n))&&(r&&(r+=" "),r+=e);return r}const Ev="-",sO=n=>{const e=aO(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const u=l.split(Ev);return u[0]===""&&u.length!==1&&u.shift(),$C(u,e)||oO(l)},getConflictingClassGroupIds:(l,u)=>{const c=t[l]||[];return u&&r[l]?[...c,...r[l]]:c}}},$C=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?$C(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(Ev);return e.validators.find(({validator:l})=>l(o))?.classGroupId},OE=/^\[(.+)\]$/,oO=n=>{if(OE.test(n)){const e=OE.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},aO=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)qg(t[i],r,i,e);return r},qg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:VE(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(lO(i)){qg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,l])=>{qg(l,VE(e,o),t,r)})})},VE=(n,e)=>{let t=n;return e.split(Ev).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},lO=n=>n.isThemeGetter,uO=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set(o,l){t.has(o)?t.set(o,l):i(o,l)}}},Kg="!",Qg=":",cO=Qg.length,dO=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let l=0,u=0,c=0,f;for(let x=0;x<i.length;x++){let P=i[x];if(l===0&&u===0){if(P===Qg){o.push(i.slice(c,x)),c=x+cO;continue}if(P==="/"){f=x;continue}}P==="["?l++:P==="]"?l--:P==="("?u++:P===")"&&u--}const m=o.length===0?i:i.substring(c),g=hO(m),w=g!==m,S=f&&f>c?f-c:void 0;return{modifiers:o,hasImportantModifier:w,baseClassName:g,maybePostfixModifierPosition:S}};if(e){const i=e+Qg,o=r;r=l=>l.startsWith(i)?o(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},hO=n=>n.endsWith(Kg)?n.substring(0,n.length-1):n.startsWith(Kg)?n.substring(1):n,fO=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(l=>{l[0]==="["||e[l]?(i.push(...o.sort(),l),o=[]):o.push(l)}),i.push(...o.sort()),i}},pO=n=>({cache:uO(n.cacheSize),parseClassName:dO(n),sortModifiers:fO(n),...sO(n)}),mO=/\s+/,gO=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,l=[],u=n.trim().split(mO);let c="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:g,modifiers:w,hasImportantModifier:S,baseClassName:x,maybePostfixModifierPosition:P}=t(m);if(g){c=m+(c.length>0?" "+c:c);continue}let M=!!P,O=r(M?x.substring(0,P):x);if(!O){if(!M){c=m+(c.length>0?" "+c:c);continue}if(O=r(x),!O){c=m+(c.length>0?" "+c:c);continue}M=!1}const R=o(w).join(":"),D=S?R+Kg:R,B=D+O;if(l.includes(B))continue;l.push(B);const z=i(O,M);for(let W=0;W<z.length;++W){const L=z[W];l.push(D+L)}c=m+(c.length>0?" "+c:c)}return c};function yO(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=WC(e))&&(r&&(r+=" "),r+=t);return r}const WC=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=WC(n[r]))&&(t&&(t+=" "),t+=e);return t};function vO(n,...e){let t,r,i,o=l;function l(c){const f=e.reduce((m,g)=>g(m),n());return t=pO(f),r=t.cache.get,i=t.cache.set,o=u,u(c)}function u(c){const f=r(c);if(f)return f;const m=gO(c,t);return i(c,m),m}return function(){return o(yO.apply(null,arguments))}}const Bt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},HC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,GC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_O=/^\d+\/\d+$/,wO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oa=n=>_O.test(n),Fe=n=>!!n&&!Number.isNaN(Number(n)),vo=n=>!!n&&Number.isInteger(Number(n)),jE=n=>n.endsWith("%")&&Fe(n.slice(0,-1)),ds=n=>wO.test(n),IO=()=>!0,CO=n=>TO.test(n)&&!EO.test(n),Sv=()=>!1,bO=n=>SO.test(n),AO=n=>xO.test(n),PO=n=>!pe(n)&&!me(n),RO=n=>_l(n,QC,Sv),pe=n=>HC.test(n),_o=n=>_l(n,YC,CO),Zm=n=>_l(n,BO,Fe),kO=n=>_l(n,qC,Sv),NO=n=>_l(n,KC,AO),DO=n=>_l(n,Sv,bO),me=n=>GC.test(n),ah=n=>wl(n,YC),MO=n=>wl(n,zO),LO=n=>wl(n,qC),OO=n=>wl(n,QC),VO=n=>wl(n,KC),jO=n=>wl(n,$O,!0),_l=(n,e,t)=>{const r=HC.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},wl=(n,e,t=!1)=>{const r=GC.exec(n);return r?r[1]?e(r[1]):t:!1},qC=n=>n==="position",FO=new Set(["image","url"]),KC=n=>FO.has(n),UO=new Set(["length","size","percentage"]),QC=n=>UO.has(n),YC=n=>n==="length",BO=n=>n==="number",zO=n=>n==="family-name",$O=n=>n==="shadow",WO=()=>{const n=Bt("color"),e=Bt("font"),t=Bt("text"),r=Bt("font-weight"),i=Bt("tracking"),o=Bt("leading"),l=Bt("breakpoint"),u=Bt("container"),c=Bt("spacing"),f=Bt("radius"),m=Bt("shadow"),g=Bt("inset-shadow"),w=Bt("drop-shadow"),S=Bt("blur"),x=Bt("perspective"),P=Bt("aspect"),M=Bt("ease"),O=Bt("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],W=()=>[Oa,"px","full","auto",me,pe,c],L=()=>[vo,"none","subgrid",me,pe],C=()=>["auto",{span:["full",vo,me,pe]},me,pe],A=()=>[vo,"auto",me,pe],b=()=>["auto","min","max","fr",me,pe],V=()=>[me,pe,c],U=()=>["start","end","center","between","around","evenly","stretch","baseline"],k=()=>["start","end","center","stretch"],ne=()=>[me,pe,c],de=()=>["px",...ne()],Ee=()=>["px","auto",...ne()],he=()=>[Oa,"auto","px","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",me,pe,c],H=()=>[n,me,pe],ie=()=>[jE,_o],j=()=>["","none","full",f,me,pe],Z=()=>["",Fe,ah,_o],ce=()=>["solid","dashed","dotted","double"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],De=()=>["","none",S,me,pe],Be=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me,pe],Me=()=>["none",Fe,me,pe],Le=()=>["none",Fe,me,pe],je=()=>[Fe,me,pe],wt=()=>[Oa,"full","px",me,pe,c];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ds],breakpoint:[ds],color:[IO],container:[ds],"drop-shadow":[ds],ease:["in","out","in-out"],font:[PO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ds],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ds],shadow:[ds],spacing:[Fe],text:[ds],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Oa,pe,me,P]}],container:["container"],columns:[{columns:[Fe,pe,me,u]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),pe,me]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[vo,"auto",me,pe]}],basis:[{basis:[Oa,"full","auto",me,pe,u,c]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Fe,Oa,"auto","initial","none",pe]}],grow:[{grow:["",Fe,me,pe]}],shrink:[{shrink:["",Fe,me,pe]}],order:[{order:[vo,"first","last","none",me,pe]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:C()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:C()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":b()}],"auto-rows":[{"auto-rows":b()}],gap:[{gap:V()}],"gap-x":[{"gap-x":V()}],"gap-y":[{"gap-y":V()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...k(),"normal"]}],"justify-self":[{"justify-self":["auto",...k()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...k(),"baseline"]}],"align-self":[{self:["auto",...k(),"baseline"]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...k(),"baseline"]}],"place-self":[{"place-self":["auto",...k()]}],p:[{p:de()}],px:[{px:de()}],py:[{py:de()}],ps:[{ps:de()}],pe:[{pe:de()}],pt:[{pt:de()}],pr:[{pr:de()}],pb:[{pb:de()}],pl:[{pl:de()}],m:[{m:Ee()}],mx:[{mx:Ee()}],my:[{my:Ee()}],ms:[{ms:Ee()}],me:[{me:Ee()}],mt:[{mt:Ee()}],mr:[{mr:Ee()}],mb:[{mb:Ee()}],ml:[{ml:Ee()}],"space-x":[{"space-x":ne()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ne()}],"space-y-reverse":["space-y-reverse"],size:[{size:he()}],w:[{w:[u,"screen",...he()]}],"min-w":[{"min-w":[u,"screen","none",...he()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...he()]}],h:[{h:["screen",...he()]}],"min-h":[{"min-h":["screen","none",...he()]}],"max-h":[{"max-h":["screen",...he()]}],"font-size":[{text:["base",t,ah,_o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,me,Zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",jE,pe]}],"font-family":[{font:[MO,pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,me,pe]}],"line-clamp":[{"line-clamp":[Fe,"none",me,Zm]}],leading:[{leading:[me,pe,o,c]}],"list-image":[{"list-image":["none",me,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",me,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Fe,"from-font","auto",me,_o]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Fe,"auto",me,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:["px",...ne()]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),LO,kO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",OO,RO]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vo,me,pe],radial:["",me,pe],conic:[vo,me,pe]},VO,NO]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:j()}],"rounded-s":[{"rounded-s":j()}],"rounded-e":[{"rounded-e":j()}],"rounded-t":[{"rounded-t":j()}],"rounded-r":[{"rounded-r":j()}],"rounded-b":[{"rounded-b":j()}],"rounded-l":[{"rounded-l":j()}],"rounded-ss":[{"rounded-ss":j()}],"rounded-se":[{"rounded-se":j()}],"rounded-ee":[{"rounded-ee":j()}],"rounded-es":[{"rounded-es":j()}],"rounded-tl":[{"rounded-tl":j()}],"rounded-tr":[{"rounded-tr":j()}],"rounded-br":[{"rounded-br":j()}],"rounded-bl":[{"rounded-bl":j()}],"border-w":[{border:Z()}],"border-w-x":[{"border-x":Z()}],"border-w-y":[{"border-y":Z()}],"border-w-s":[{"border-s":Z()}],"border-w-e":[{"border-e":Z()}],"border-w-t":[{"border-t":Z()}],"border-w-r":[{"border-r":Z()}],"border-w-b":[{"border-b":Z()}],"border-w-l":[{"border-l":Z()}],"divide-x":[{"divide-x":Z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Fe,me,pe]}],"outline-w":[{outline:["",Fe,ah,_o]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",m,jO,DO]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",me,pe,g]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Fe,_o]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":Z()}],"inset-ring-color":[{"inset-ring":H()}],opacity:[{opacity:[Fe,me,pe]}],"mix-blend":[{"mix-blend":[...Se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none",me,pe]}],blur:[{blur:De()}],brightness:[{brightness:[Fe,me,pe]}],contrast:[{contrast:[Fe,me,pe]}],"drop-shadow":[{"drop-shadow":["","none",w,me,pe]}],grayscale:[{grayscale:["",Fe,me,pe]}],"hue-rotate":[{"hue-rotate":[Fe,me,pe]}],invert:[{invert:["",Fe,me,pe]}],saturate:[{saturate:[Fe,me,pe]}],sepia:[{sepia:["",Fe,me,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",me,pe]}],"backdrop-blur":[{"backdrop-blur":De()}],"backdrop-brightness":[{"backdrop-brightness":[Fe,me,pe]}],"backdrop-contrast":[{"backdrop-contrast":[Fe,me,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Fe,me,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Fe,me,pe]}],"backdrop-invert":[{"backdrop-invert":["",Fe,me,pe]}],"backdrop-opacity":[{"backdrop-opacity":[Fe,me,pe]}],"backdrop-saturate":[{"backdrop-saturate":[Fe,me,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Fe,me,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ne()}],"border-spacing-x":[{"border-spacing-x":ne()}],"border-spacing-y":[{"border-spacing-y":ne()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",me,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Fe,"initial",me,pe]}],ease:[{ease:["linear","initial",M,me,pe]}],delay:[{delay:[Fe,me,pe]}],animate:[{animate:["none",O,me,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,me,pe]}],"perspective-origin":[{"perspective-origin":Be()}],rotate:[{rotate:Me()}],"rotate-x":[{"rotate-x":Me()}],"rotate-y":[{"rotate-y":Me()}],"rotate-z":[{"rotate-z":Me()}],scale:[{scale:Le()}],"scale-x":[{"scale-x":Le()}],"scale-y":[{"scale-y":Le()}],"scale-z":[{"scale-z":Le()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[me,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:Be()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:wt()}],"translate-x":[{"translate-x":wt()}],"translate-y":[{"translate-y":wt()}],"translate-z":[{"translate-z":wt()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me,pe]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Fe,ah,_o,Zm]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},HO=vO(WO);function FE(...n){return HO(iO(n))}function GO({children:n,containerClassName:e,className:t,as:r="button",duration:i=1,clockwise:o=!0,...l}){const[u,c]=K.useState(!1),[f,m]=K.useState("TOP"),g=x=>{const P=["TOP","LEFT","BOTTOM","RIGHT"],M=P.indexOf(x),O=o?(M-1+P.length)%P.length:(M+1)%P.length;return P[O]},w={TOP:"radial-gradient(20.7% 50% at 50% 0%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",LEFT:"radial-gradient(16.6% 43.1% at 0% 50%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",BOTTOM:"radial-gradient(20.7% 50% at 50% 100%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",RIGHT:"radial-gradient(16.2% 41.2% at 100% 50%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)"},S="radial-gradient(75% 181.159% at 50% 50%, #a8c0f0 0%, rgba(255, 255, 255, 0) 100%)";return K.useEffect(()=>{if(!u){const x=setInterval(()=>{m(P=>g(P))},i*1e3);return()=>clearInterval(x)}},[u,f]),T.jsxs(r,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:FE("relative flex rounded-full border content-center bg-black/20 hover:bg-black/10 transition duration-500 dark:bg-white/20 items-center flex-col flex-nowrap gap-10 h-min justify-center overflow-visible p-px decoration-clone w-fit",e),...l,children:[T.jsx("div",{className:FE("w-auto text-white z-10 bg-black px-4 py-2 rounded-[inherit]",t),children:n}),T.jsx(st.div,{className:"absolute inset-0 overflow-hidden z-0 rounded-[inherit]",style:{filter:"blur(2px)",width:"100%",height:"100%"},initial:{background:w[f]},animate:{background:u?[w[f],S]:w[f]},transition:{ease:"linear",duration:i}}),T.jsx("div",{className:"bg-black absolute inset-[2px] z-1 rounded-[100px]"})]})}var XC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},UE=nt.createContext&&nt.createContext(XC),qO=["attr","size","title"];function KO(n,e){if(n==null)return{};var t=QO(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function QO(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function $h(){return $h=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$h.apply(this,arguments)}function BE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BE(Object(t),!0).forEach(function(r){YO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YO(n,e,t){return e=XO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XO(n){var e=JO(n,"string");return typeof e=="symbol"?e:e+""}function JO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function JC(n){return n&&n.map((e,t)=>nt.createElement(e.tag,Wh({key:t},e.attr),JC(e.child)))}function Lf(n){return e=>nt.createElement(ZO,$h({attr:Wh({},n.attr)},e),JC(n.child))}function ZO(n){var e=t=>{var{attr:r,size:i,title:o}=n,l=KO(n,qO),u=i||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),nt.createElement("svg",$h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:c,style:Wh(Wh({color:n.color||t.color},t.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&nt.createElement("title",null,o),n.children)};return UE!==void 0?nt.createElement(UE.Consumer,null,t=>e(t)):e(XC)}function e2(n){return Lf({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function zE(n){return Lf({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03L21 4.96 19.25 4l-3.7 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2zM12 2l4 4-4 4-1.41-1.41L12.17 7H8V5h4.17l-1.59-1.59L12 2z"},child:[]}]})(n)}function jo(n){return Lf({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(n)}function t2(n){return Lf({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(n)}const eg={All:["https://i.pinimg.com/474x/25/c9/3d/25c93dd41f16048a836d5837dae4e638.jpg","https://i.pinimg.com/736x/a9/12/73/a91273677b2faec433397d6c1cdf3475.jpg","https://i.pinimg.com/736x/79/c2/41/79c241ffee4456a2b8cc8515d4dc41df.jpg"],Renaissance:["https://i.pinimg.com/736x/4c/ca/32/4cca324472f172eb397189cc667d3cde.jpg","https://i.pinimg.com/736x/7f/29/9d/7f299d29c147e3aaf0362e9b9de2abff.jpg"],Abstract:["https://i.pinimg.com/736x/6a/30/ad/6a30ad236772c6481c42bea92b6b20be.jpg","https://ik.imagekit.io/theartling/prod/original_images/62.jpg?tr=w-950","https://ik.imagekit.io/theartling/prod/original_images/chu_teh_chun.jpg?tr=w-950"],Animal:["https://drawpaintacademy.com/wp-content/uploads/2022/07/Albrecht-Du%E2%95%A0erer-Young-Hare-1502.jpg","https://drawpaintacademy.com/wp-content/uploads/2022/07/Frans-Snyders-Concert-of-Birds-1629-1630.jpg"],"Geometric Art":["https://i0.wp.com/blog.artsper.com/wp-content/uploads/2016/05/18040_1_l.jpg?resize=1024%2C687&ssl=1","https://i0.wp.com/blog.artsper.com/wp-content/uploads/2016/05/geo1.jpg?w=517&ssl=1","https://i0.wp.com/blog.artsper.com/wp-content/uploads/2016/05/geo4.jpg?resize=1024%2C1024&ssl=1"],Modern:["https://images.unsplash.com/photo-1558865869-c93f6f8482af?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bW9kZXJuJTIwYXJ0fGVufDB8fDB8fHww","https://images.unsplash.com/photo-1583407723467-9b2d22504831?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8bW9kZXJuJTIwYXJ0fGVufDB8fDB8fHww"]};function n2({onSeeMoreClick:n}){const[e,t]=K.useState("Renaissance"),[r,i]=K.useState(eg[e]||[]),[o,l]=K.useState(!1);K.useEffect(()=>{l(!0),setTimeout(()=>{i(eg[e]||[]),l(!1)},5)},[e]);const u=Object.keys(eg);return T.jsxs("div",{className:"bg-black h-screen w-screen flex flex-col justify-start items-center text-white m-0 p-0 gap-6",children:[T.jsx("div",{className:"text-4xl font-semibold mt-16 self-start ml-10",children:"Artwork For Sale"}),T.jsx("div",{className:"flex space-x-4 text-sm mt-6",children:u.map(c=>T.jsxs("button",{onClick:()=>t(c),className:`relative pb-1 transition-all border-none outline-none focus:outline-none bg-transparent whitespace-nowrap ${e===c?"text-white font-semibold":"text-gray-500 hover:text-gray-300"}`,children:[c,e===c&&T.jsx("span",{className:"absolute left-0 bottom-0 w-full h-0.5 bg-white"})]},c))}),T.jsx(st.div,{className:"grid grid-cols-2 md:grid-cols-3 gap-8 mt-6 overflow-hidden",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.2}}},children:T.jsx(Rf,{mode:"popLayout",children:!o&&r.map((c,f)=>T.jsxs(st.div,{className:"w-80 h-96 bg-gray-800 rounded-xl overflow-hidden shadow-2xl relative",initial:{opacity:0,x:-100},animate:{opacity:1,x:0},transition:{duration:.5,ease:"easeOut",delay:f*.2},children:[T.jsx("button",{className:"absolute bottom-20 left-10 bg-white text-black px-6 py-2 rounded-full shadow-md font-bold text-lg",children:"$300"}),T.jsx("img",{src:c,alt:`Artwork ${f+1}`,className:"w-full h-full object-cover"})]},c))})}),T.jsx("div",{className:"mt-10",children:T.jsx("button",{onClick:n,className:"bg-transparent border-0 p-0 focus:outline-none",children:T.jsxs(GO,{containerClassName:"rounded-3xl p-0.5",className:"text-xs font-semibold px-8 py-2 rounded-xl flex justify-center items-center gap-2 w-auto",children:[T.jsx("span",{children:"See More"}),T.jsx(t2,{className:"text-white text-lg"})]})})})]})}function $E(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function xv(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:$E(e[t])&&$E(n[t])&&Object.keys(e[t]).length>0&&xv(n[t],e[t])})}const ZC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function qr(){const n=typeof document<"u"?document:{};return xv(n,ZC),n}const r2={document:ZC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Tn(){const n=typeof window<"u"?window:{};return xv(n,r2),n}function i2(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function s2(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Yg(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Hh(){return Date.now()}function o2(n){const e=Tn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function a2(n,e){e===void 0&&(e="x");const t=Tn();let r,i,o;const l=o2(n);return t.WebKitCSSMatrix?(i=l.transform||l.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(u=>u.replace(",",".")).join(", ")),o=new t.WebKitCSSMatrix(i==="none"?"":i)):(o=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=o.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?i=o.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function lh(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function l2(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Bn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!l2(r)){const i=Object.keys(Object(r)).filter(o=>e.indexOf(o)<0);for(let o=0,l=i.length;o<l;o+=1){const u=i[o],c=Object.getOwnPropertyDescriptor(r,u);c!==void 0&&c.enumerable&&(lh(n[u])&&lh(r[u])?r[u].__swiper__?n[u]=r[u]:Bn(n[u],r[u]):!lh(n[u])&&lh(r[u])?(n[u]={},r[u].__swiper__?n[u]=r[u]:Bn(n[u],r[u])):n[u]=r[u])}}}return n}function uh(n,e,t){n.style.setProperty(e,t)}function eb(n){let{swiper:e,targetPosition:t,side:r}=n;const i=Tn(),o=-e.translate;let l=null,u;const c=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const f=t>o?"next":"prev",m=(w,S)=>f==="next"&&w>=S||f==="prev"&&w<=S,g=()=>{u=new Date().getTime(),l===null&&(l=u);const w=Math.max(Math.min((u-l)/c,1),0),S=.5-Math.cos(w*Math.PI)/2;let x=o+S*(t-o);if(m(x,t)&&(x=t),e.wrapperEl.scrollTo({[r]:x}),m(x,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:x})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(g)};g()}function Br(n,e){e===void 0&&(e="");const t=Tn(),r=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&r.push(...n.assignedElements()),e?r.filter(i=>i.matches(e)):r}function u2(n,e){const t=[e];for(;t.length>0;){const r=t.shift();if(n===r)return!0;t.push(...r.children,...r.shadowRoot?.children||[],...r.assignedElements?.()||[])}}function c2(n,e){const t=Tn();let r=e.contains(n);return!r&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(n),r||(r=u2(n,e))),r}function Gh(n){try{console.warn(n);return}catch{}}function qh(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:i2(e)),t}function d2(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function h2(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function vs(n,e){return Tn().getComputedStyle(n,null).getPropertyValue(e)}function Kh(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function tb(n,e){const t=[];let r=n.parentElement;for(;r;)e?r.matches(e)&&t.push(r):t.push(r),r=r.parentElement;return t}function Xg(n,e,t){const r=Tn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function $t(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}let tg;function f2(){const n=Tn(),e=qr();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function nb(){return tg||(tg=f2()),tg}let ng;function p2(n){let{userAgent:e}=n===void 0?{}:n;const t=nb(),r=Tn(),i=r.navigator.platform,o=e||r.navigator.userAgent,l={ios:!1,android:!1},u=r.screen.width,c=r.screen.height,f=o.match(/(Android);?[\s\/]+([\d.]+)?/);let m=o.match(/(iPad).*OS\s([\d_]+)/);const g=o.match(/(iPod)(.*OS\s([\d_]+))?/),w=!m&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),S=i==="Win32";let x=i==="MacIntel";const P=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!m&&x&&t.touch&&P.indexOf(`${u}x${c}`)>=0&&(m=o.match(/(Version)\/([\d.]+)/),m||(m=[0,1,"13_0_0"]),x=!1),f&&!S&&(l.os="android",l.android=!0),(m||w||g)&&(l.os="ios",l.ios=!0),l}function rb(n){return n===void 0&&(n={}),ng||(ng=p2(n)),ng}let rg;function m2(){const n=Tn(),e=rb();let t=!1;function r(){const u=n.navigator.userAgent.toLowerCase();return u.indexOf("safari")>=0&&u.indexOf("chrome")<0&&u.indexOf("android")<0}if(r()){const u=String(n.navigator.userAgent);if(u.includes("Version/")){const[c,f]=u.split("Version/")[1].split(" ")[0].split(".").map(m=>Number(m));t=c<16||c===16&&f<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),o=r(),l=o||i&&e.ios;return{isSafari:t||o,needPerspectiveFix:t,need3dFix:l,isWebView:i}}function ib(){return rg||(rg=m2()),rg}function g2(n){let{swiper:e,on:t,emit:r}=n;const i=Tn();let o=null,l=null;const u=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},c=()=>{!e||e.destroyed||!e.initialized||(o=new ResizeObserver(g=>{l=i.requestAnimationFrame(()=>{const{width:w,height:S}=e;let x=w,P=S;g.forEach(M=>{let{contentBoxSize:O,contentRect:R,target:D}=M;D&&D!==e.el||(x=R?R.width:(O[0]||O).inlineSize,P=R?R.height:(O[0]||O).blockSize)}),(x!==w||P!==S)&&u()})}),o.observe(e.el))},f=()=>{l&&i.cancelAnimationFrame(l),o&&o.unobserve&&e.el&&(o.unobserve(e.el),o=null)},m=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){c();return}i.addEventListener("resize",u),i.addEventListener("orientationchange",m)}),t("destroy",()=>{f(),i.removeEventListener("resize",u),i.removeEventListener("orientationchange",m)})}function y2(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const o=[],l=Tn(),u=function(m,g){g===void 0&&(g={});const w=l.MutationObserver||l.WebkitMutationObserver,S=new w(x=>{if(e.__preventObserver__)return;if(x.length===1){i("observerUpdate",x[0]);return}const P=function(){i("observerUpdate",x[0])};l.requestAnimationFrame?l.requestAnimationFrame(P):l.setTimeout(P,0)});S.observe(m,{attributes:typeof g.attributes>"u"?!0:g.attributes,childList:e.isElement||(typeof g.childList>"u"?!0:g).childList,characterData:typeof g.characterData>"u"?!0:g.characterData}),o.push(S)},c=()=>{if(e.params.observer){if(e.params.observeParents){const m=tb(e.hostEl);for(let g=0;g<m.length;g+=1)u(m[g])}u(e.hostEl,{childList:e.params.observeSlideChildren}),u(e.wrapperEl,{attributes:!1})}},f=()=>{o.forEach(m=>{m.disconnect()}),o.splice(0,o.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",c),r("destroy",f)}var v2={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return n.split(" ").forEach(o=>{r.eventsListeners[o]||(r.eventsListeners[o]=[]),r.eventsListeners[o][i](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];e.apply(r,l)}return i.__emitterProxy=e,r.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((i,o)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[r].splice(o,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return typeof o[0]=="string"||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),r=n):(e=o[0].events,t=o[0].data,r=o[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(c=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(f=>{f.apply(r,[c,...t])}),n.eventsListeners&&n.eventsListeners[c]&&n.eventsListeners[c].forEach(f=>{f.apply(r,t)})}),n}};function _2(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(vs(r,"padding-left")||0,10)-parseInt(vs(r,"padding-right")||0,10),t=t-parseInt(vs(r,"padding-top")||0,10)-parseInt(vs(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function w2(){const n=this;function e(b,V){return parseFloat(b.getPropertyValue(n.getDirectionLabel(V))||0)}const t=n.params,{wrapperEl:r,slidesEl:i,size:o,rtlTranslate:l,wrongRTL:u}=n,c=n.virtual&&t.virtual.enabled,f=c?n.virtual.slides.length:n.slides.length,m=Br(i,`.${n.params.slideClass}, swiper-slide`),g=c?n.virtual.slides.length:m.length;let w=[];const S=[],x=[];let P=t.slidesOffsetBefore;typeof P=="function"&&(P=t.slidesOffsetBefore.call(n));let M=t.slidesOffsetAfter;typeof M=="function"&&(M=t.slidesOffsetAfter.call(n));const O=n.snapGrid.length,R=n.slidesGrid.length;let D=t.spaceBetween,B=-P,z=0,W=0;if(typeof o>"u")return;typeof D=="string"&&D.indexOf("%")>=0?D=parseFloat(D.replace("%",""))/100*o:typeof D=="string"&&(D=parseFloat(D)),n.virtualSize=-D,m.forEach(b=>{l?b.style.marginLeft="":b.style.marginRight="",b.style.marginBottom="",b.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(uh(r,"--swiper-centered-offset-before",""),uh(r,"--swiper-centered-offset-after",""));const L=t.grid&&t.grid.rows>1&&n.grid;L?n.grid.initSlides(m):n.grid&&n.grid.unsetSlides();let C;const A=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(b=>typeof t.breakpoints[b].slidesPerView<"u").length>0;for(let b=0;b<g;b+=1){C=0;let V;if(m[b]&&(V=m[b]),L&&n.grid.updateSlide(b,V,m),!(m[b]&&vs(V,"display")==="none")){if(t.slidesPerView==="auto"){A&&(m[b].style[n.getDirectionLabel("width")]="");const U=getComputedStyle(V),k=V.style.transform,ne=V.style.webkitTransform;if(k&&(V.style.transform="none"),ne&&(V.style.webkitTransform="none"),t.roundLengths)C=n.isHorizontal()?Xg(V,"width"):Xg(V,"height");else{const de=e(U,"width"),Ee=e(U,"padding-left"),he=e(U,"padding-right"),H=e(U,"margin-left"),ie=e(U,"margin-right"),j=U.getPropertyValue("box-sizing");if(j&&j==="border-box")C=de+H+ie;else{const{clientWidth:Z,offsetWidth:ce}=V;C=de+Ee+he+H+ie+(ce-Z)}}k&&(V.style.transform=k),ne&&(V.style.webkitTransform=ne),t.roundLengths&&(C=Math.floor(C))}else C=(o-(t.slidesPerView-1)*D)/t.slidesPerView,t.roundLengths&&(C=Math.floor(C)),m[b]&&(m[b].style[n.getDirectionLabel("width")]=`${C}px`);m[b]&&(m[b].swiperSlideSize=C),x.push(C),t.centeredSlides?(B=B+C/2+z/2+D,z===0&&b!==0&&(B=B-o/2-D),b===0&&(B=B-o/2-D),Math.abs(B)<1/1e3&&(B=0),t.roundLengths&&(B=Math.floor(B)),W%t.slidesPerGroup===0&&w.push(B),S.push(B)):(t.roundLengths&&(B=Math.floor(B)),(W-Math.min(n.params.slidesPerGroupSkip,W))%n.params.slidesPerGroup===0&&w.push(B),S.push(B),B=B+C+D),n.virtualSize+=C+D,z=C,W+=1}}if(n.virtualSize=Math.max(n.virtualSize,o)+M,l&&u&&(t.effect==="slide"||t.effect==="coverflow")&&(r.style.width=`${n.virtualSize+D}px`),t.setWrapperSize&&(r.style[n.getDirectionLabel("width")]=`${n.virtualSize+D}px`),L&&n.grid.updateWrapperSize(C,w),!t.centeredSlides){const b=[];for(let V=0;V<w.length;V+=1){let U=w[V];t.roundLengths&&(U=Math.floor(U)),w[V]<=n.virtualSize-o&&b.push(U)}w=b,Math.floor(n.virtualSize-o)-Math.floor(w[w.length-1])>1&&w.push(n.virtualSize-o)}if(c&&t.loop){const b=x[0]+D;if(t.slidesPerGroup>1){const V=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),U=b*t.slidesPerGroup;for(let k=0;k<V;k+=1)w.push(w[w.length-1]+U)}for(let V=0;V<n.virtual.slidesBefore+n.virtual.slidesAfter;V+=1)t.slidesPerGroup===1&&w.push(w[w.length-1]+b),S.push(S[S.length-1]+b),n.virtualSize+=b}if(w.length===0&&(w=[0]),D!==0){const b=n.isHorizontal()&&l?"marginLeft":n.getDirectionLabel("marginRight");m.filter((V,U)=>!t.cssMode||t.loop?!0:U!==m.length-1).forEach(V=>{V.style[b]=`${D}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let b=0;x.forEach(U=>{b+=U+(D||0)}),b-=D;const V=b>o?b-o:0;w=w.map(U=>U<=0?-P:U>V?V+M:U)}if(t.centerInsufficientSlides){let b=0;x.forEach(U=>{b+=U+(D||0)}),b-=D;const V=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(b+V<o){const U=(o-b-V)/2;w.forEach((k,ne)=>{w[ne]=k-U}),S.forEach((k,ne)=>{S[ne]=k+U})}}if(Object.assign(n,{slides:m,snapGrid:w,slidesGrid:S,slidesSizesGrid:x}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){uh(r,"--swiper-centered-offset-before",`${-w[0]}px`),uh(r,"--swiper-centered-offset-after",`${n.size/2-x[x.length-1]/2}px`);const b=-n.snapGrid[0],V=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(U=>U+b),n.slidesGrid=n.slidesGrid.map(U=>U+V)}if(g!==f&&n.emit("slidesLengthChange"),w.length!==O&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),S.length!==R&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!c&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const b=`${t.containerModifierClass}backface-hidden`,V=n.el.classList.contains(b);g<=t.maxBackfaceHiddenSlides?V||n.el.classList.add(b):V&&n.el.classList.remove(b)}}function T2(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let i=0,o;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const l=u=>r?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{t.push(u)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const u=e.activeIndex+o;if(u>e.slides.length&&!r)break;t.push(l(u))}else t.push(l(e.activeIndex));for(o=0;o<t.length;o+=1)if(typeof t[o]<"u"){const u=t[o].offsetHeight;i=u>i?u:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function E2(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}const WE=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function S2(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:i,snapGrid:o}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let l=-n;i&&(l=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=t.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let c=0;c<r.length;c+=1){const f=r[c];let m=f.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(m-=r[0].swiperSlideOffset);const g=(l+(t.centeredSlides?e.minTranslate():0)-m)/(f.swiperSlideSize+u),w=(l-o[0]+(t.centeredSlides?e.minTranslate():0)-m)/(f.swiperSlideSize+u),S=-(l-m),x=S+e.slidesSizesGrid[c],P=S>=0&&S<=e.size-e.slidesSizesGrid[c],M=S>=0&&S<e.size-1||x>1&&x<=e.size||S<=0&&x>=e.size;M&&(e.visibleSlides.push(f),e.visibleSlidesIndexes.push(c)),WE(f,M,t.slideVisibleClass),WE(f,P,t.slideFullyVisibleClass),f.progress=i?-g:g,f.originalProgress=i?-w:w}}function x2(n){const e=this;if(typeof n>"u"){const m=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*m||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:o,isEnd:l,progressLoop:u}=e;const c=o,f=l;if(r===0)i=0,o=!0,l=!0;else{i=(n-e.minTranslate())/r;const m=Math.abs(n-e.minTranslate())<1,g=Math.abs(n-e.maxTranslate())<1;o=m||i<=0,l=g||i>=1,m&&(i=0),g&&(i=1)}if(t.loop){const m=e.getSlideIndexByData(0),g=e.getSlideIndexByData(e.slides.length-1),w=e.slidesGrid[m],S=e.slidesGrid[g],x=e.slidesGrid[e.slidesGrid.length-1],P=Math.abs(n);P>=w?u=(P-w)/x:u=(P+x-S)/x,u>1&&(u-=1)}Object.assign(e,{progress:i,progressLoop:u,isBeginning:o,isEnd:l}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),o&&!c&&e.emit("reachBeginning toEdge"),l&&!f&&e.emit("reachEnd toEdge"),(c&&!o||f&&!l)&&e.emit("fromEdge"),e.emit("progress",i)}const ig=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function I2(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:i}=n,o=n.virtual&&t.virtual.enabled,l=n.grid&&t.grid&&t.grid.rows>1,u=g=>Br(r,`.${t.slideClass}${g}, swiper-slide${g}`)[0];let c,f,m;if(o)if(t.loop){let g=i-n.virtual.slidesBefore;g<0&&(g=n.virtual.slides.length+g),g>=n.virtual.slides.length&&(g-=n.virtual.slides.length),c=u(`[data-swiper-slide-index="${g}"]`)}else c=u(`[data-swiper-slide-index="${i}"]`);else l?(c=e.find(g=>g.column===i),m=e.find(g=>g.column===i+1),f=e.find(g=>g.column===i-1)):c=e[i];c&&(l||(m=h2(c,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!m&&(m=e[0]),f=d2(c,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f===0&&(f=e[e.length-1]))),e.forEach(g=>{ig(g,g===c,t.slideActiveClass),ig(g,g===m,t.slideNextClass),ig(g,g===f,t.slidePrevClass)}),n.emitSlidesClasses()}const Sh=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let i=r.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},sg=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Jg=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const l=i,u=[l-e];u.push(...Array.from({length:e}).map((c,f)=>l+r+f)),n.slides.forEach((c,f)=>{u.includes(c.column)&&sg(n,f)});return}const o=i+r-1;if(n.params.rewind||n.params.loop)for(let l=i-e;l<=o+e;l+=1){const u=(l%t+t)%t;(u<i||u>o)&&sg(n,u)}else for(let l=Math.max(i-e,0);l<=Math.min(o+e,t-1);l+=1)l!==i&&(l>o||l<i)&&sg(n,l)};function C2(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let i;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?r>=e[o]&&r<e[o+1]-(e[o+1]-e[o])/2?i=o:r>=e[o]&&r<e[o+1]&&(i=o+1):r>=e[o]&&(i=o);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function b2(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:l,snapIndex:u}=e;let c=n,f;const m=S=>{let x=S-e.virtual.slidesBefore;return x<0&&(x=e.virtual.slides.length+x),x>=e.virtual.slides.length&&(x-=e.virtual.slides.length),x};if(typeof c>"u"&&(c=C2(e)),r.indexOf(t)>=0)f=r.indexOf(t);else{const S=Math.min(i.slidesPerGroupSkip,c);f=S+Math.floor((c-S)/i.slidesPerGroup)}if(f>=r.length&&(f=r.length-1),c===o&&!e.params.loop){f!==u&&(e.snapIndex=f,e.emit("snapIndexChange"));return}if(c===o&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=m(c);return}const g=e.grid&&i.grid&&i.grid.rows>1;let w;if(e.virtual&&i.virtual.enabled&&i.loop)w=m(c);else if(g){const S=e.slides.find(P=>P.column===c);let x=parseInt(S.getAttribute("data-swiper-slide-index"),10);Number.isNaN(x)&&(x=Math.max(e.slides.indexOf(S),0)),w=Math.floor(x/i.grid.rows)}else if(e.slides[c]){const S=e.slides[c].getAttribute("data-swiper-slide-index");S?w=parseInt(S,10):w=c}else w=c;Object.assign(e,{previousSnapIndex:u,snapIndex:f,previousRealIndex:l,realIndex:w,previousIndex:o,activeIndex:c}),e.initialized&&Jg(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(l!==w&&e.emit("realIndexChange"),e.emit("slideChange"))}function A2(n,e){const t=this,r=t.params;let i=n.closest(`.${r.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(u=>{!i&&u.matches&&u.matches(`.${r.slideClass}, swiper-slide`)&&(i=u)});let o=!1,l;if(i){for(let u=0;u<t.slides.length;u+=1)if(t.slides[u]===i){o=!0,l=u;break}}if(i&&o)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=l;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var P2={updateSize:_2,updateSlides:w2,updateAutoHeight:T2,updateSlidesOffset:E2,updateSlidesProgress:S2,updateProgress:x2,updateSlidesClasses:I2,updateActiveIndex:b2,updateClickedSlide:A2};function R2(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:i,wrapperEl:o}=e;if(t.virtualTranslate)return r?-i:i;if(t.cssMode)return i;let l=a2(o,n);return l+=e.cssOverflowAdjustment(),r&&(l=-l),l||0}function k2(n,e){const t=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:l}=t;let u=0,c=0;const f=0;t.isHorizontal()?u=r?-n:n:c=n,i.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?u:c,i.cssMode?o[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-u:-c:i.virtualTranslate||(t.isHorizontal()?u-=t.cssOverflowAdjustment():c-=t.cssOverflowAdjustment(),o.style.transform=`translate3d(${u}px, ${c}px, ${f}px)`);let m;const g=t.maxTranslate()-t.minTranslate();g===0?m=0:m=(n-t.minTranslate())/g,m!==l&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function N2(){return-this.snapGrid[0]}function D2(){return-this.snapGrid[this.snapGrid.length-1]}function M2(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const o=this,{params:l,wrapperEl:u}=o;if(o.animating&&l.preventInteractionOnTransition)return!1;const c=o.minTranslate(),f=o.maxTranslate();let m;if(r&&n>c?m=c:r&&n<f?m=f:m=n,o.updateProgress(m),l.cssMode){const g=o.isHorizontal();if(e===0)u[g?"scrollLeft":"scrollTop"]=-m;else{if(!o.support.smoothScroll)return eb({swiper:o,targetPosition:-m,side:g?"left":"top"}),!0;u.scrollTo({[g?"left":"top"]:-m,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(m),t&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(m),t&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(w){!o||o.destroyed||w.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,t&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var L2={getTranslate:R2,setTranslate:k2,minTranslate:N2,maxTranslate:D2,translateTo:M2};function O2(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function sb(n){let{swiper:e,runCallbacks:t,direction:r,step:i}=n;const{activeIndex:o,previousIndex:l}=e;let u=r;if(u||(o>l?u="next":o<l?u="prev":u="reset"),e.emit(`transition${i}`),t&&o!==l){if(u==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),u==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function V2(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),sb({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function j2(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),sb({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var F2={setTransition:O2,transitionStart:V2,transitionEnd:j2};function U2(n,e,t,r,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const o=this;let l=n;l<0&&(l=0);const{params:u,snapGrid:c,slidesGrid:f,previousIndex:m,activeIndex:g,rtlTranslate:w,wrapperEl:S,enabled:x}=o;if(!x&&!r&&!i||o.destroyed||o.animating&&u.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=o.params.speed);const P=Math.min(o.params.slidesPerGroupSkip,l);let M=P+Math.floor((l-P)/o.params.slidesPerGroup);M>=c.length&&(M=c.length-1);const O=-c[M];if(u.normalizeSlideIndex)for(let L=0;L<f.length;L+=1){const C=-Math.floor(O*100),A=Math.floor(f[L]*100),b=Math.floor(f[L+1]*100);typeof f[L+1]<"u"?C>=A&&C<b-(b-A)/2?l=L:C>=A&&C<b&&(l=L+1):C>=A&&(l=L)}if(o.initialized&&l!==g&&(!o.allowSlideNext&&(w?O>o.translate&&O>o.minTranslate():O<o.translate&&O<o.minTranslate())||!o.allowSlidePrev&&O>o.translate&&O>o.maxTranslate()&&(g||0)!==l))return!1;l!==(m||0)&&t&&o.emit("beforeSlideChangeStart"),o.updateProgress(O);let R;l>g?R="next":l<g?R="prev":R="reset";const D=o.virtual&&o.params.virtual.enabled;if(!(D&&i)&&(w&&-O===o.translate||!w&&O===o.translate))return o.updateActiveIndex(l),u.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),u.effect!=="slide"&&o.setTranslate(O),R!=="reset"&&(o.transitionStart(t,R),o.transitionEnd(t,R)),!1;if(u.cssMode){const L=o.isHorizontal(),C=w?O:-O;if(e===0)D&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),D&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{S[L?"scrollLeft":"scrollTop"]=C})):S[L?"scrollLeft":"scrollTop"]=C,D&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return eb({swiper:o,targetPosition:C,side:L?"left":"top"}),!0;S.scrollTo({[L?"left":"top"]:C,behavior:"smooth"})}return!0}const W=ib().isSafari;return D&&!i&&W&&o.isElement&&o.virtual.update(!1,!1,l),o.setTransition(e),o.setTranslate(O),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,r),o.transitionStart(t,R),e===0?o.transitionEnd(t,R):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(C){!o||o.destroyed||C.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(t,R))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function B2(n,e,t,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const o=i.grid&&i.params.grid&&i.params.grid.rows>1;let l=n;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)l=l+i.virtual.slidesBefore;else{let u;if(o){const w=l*i.params.grid.rows;u=i.slides.find(S=>S.getAttribute("data-swiper-slide-index")*1===w).column}else u=i.getSlideIndexByData(l);const c=o?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:f}=i.params;let m=i.params.slidesPerView;m==="auto"?m=i.slidesPerViewDynamic():(m=Math.ceil(parseFloat(i.params.slidesPerView,10)),f&&m%2===0&&(m=m+1));let g=c-u<m;if(f&&(g=g||u<Math.ceil(m/2)),r&&f&&i.params.slidesPerView!=="auto"&&!o&&(g=!1),g){const w=f?u<i.activeIndex?"prev":"next":u-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:w,slideTo:!0,activeSlideIndex:w==="next"?u+1:u-c+1,slideRealIndex:w==="next"?i.realIndex:void 0})}if(o){const w=l*i.params.grid.rows;l=i.slides.find(S=>S.getAttribute("data-swiper-slide-index")*1===w).column}else l=i.getSlideIndexByData(l)}return requestAnimationFrame(()=>{i.slideTo(l,e,t,r)}),i}function z2(n,e,t){e===void 0&&(e=!0);const r=this,{enabled:i,params:o,animating:l}=r;if(!i||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);let u=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(u=Math.max(r.slidesPerViewDynamic("current",!0),1));const c=r.activeIndex<o.slidesPerGroupSkip?1:u,f=r.virtual&&o.virtual.enabled;if(o.loop){if(l&&!f&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+c,n,e,t)}),!0}return o.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+c,n,e,t)}function $2(n,e,t){e===void 0&&(e=!0);const r=this,{params:i,snapGrid:o,slidesGrid:l,rtlTranslate:u,enabled:c,animating:f}=r;if(!c||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);const m=r.virtual&&i.virtual.enabled;if(i.loop){if(f&&!m&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const g=u?r.translate:-r.translate;function w(R){return R<0?-Math.floor(Math.abs(R)):Math.floor(R)}const S=w(g),x=o.map(R=>w(R)),P=i.freeMode&&i.freeMode.enabled;let M=o[x.indexOf(S)-1];if(typeof M>"u"&&(i.cssMode||P)){let R;o.forEach((D,B)=>{S>=D&&(R=B)}),typeof R<"u"&&(M=P?o[R]:o[R>0?R-1:R])}let O=0;if(typeof M<"u"&&(O=l.indexOf(M),O<0&&(O=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(O=O-r.slidesPerViewDynamic("previous",!0)+1,O=Math.max(O,0))),i.rewind&&r.isBeginning){const R=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(R,n,e,t)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(O,n,e,t)}),!0;return r.slideTo(O,n,e,t)}function W2(n,e,t){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof n>"u"&&(n=r.params.speed),r.slideTo(r.activeIndex,n,e,t)}function H2(n,e,t,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;if(i.destroyed)return;typeof n>"u"&&(n=i.params.speed);let o=i.activeIndex;const l=Math.min(i.params.slidesPerGroupSkip,o),u=l+Math.floor((o-l)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[u]){const f=i.snapGrid[u],m=i.snapGrid[u+1];c-f>(m-f)*r&&(o+=i.params.slidesPerGroup)}else{const f=i.snapGrid[u-1],m=i.snapGrid[u];c-f<=(m-f)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,n,e,t)}function G2(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.clickedIndex,o;const l=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;o=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<n.loopedSlides-r/2||i>n.slides.length-n.loopedSlides+r/2?(n.loopFix(),i=n.getSlideIndex(Br(t,`${l}[data-swiper-slide-index="${o}"]`)[0]),Yg(()=>{n.slideTo(i)})):n.slideTo(i):i>n.slides.length-r?(n.loopFix(),i=n.getSlideIndex(Br(t,`${l}[data-swiper-slide-index="${o}"]`)[0]),Yg(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var q2={slideTo:U2,slideToLoop:B2,slideNext:z2,slidePrev:$2,slideReset:W2,slideToClosest:H2,slideToClickedSlide:G2};function K2(n){const e=this,{params:t,slidesEl:r}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const i=()=>{Br(r,`.${t.slideClass}, swiper-slide`).forEach((g,w)=>{g.setAttribute("data-swiper-slide-index",w)})},o=e.grid&&t.grid&&t.grid.rows>1,l=t.slidesPerGroup*(o?t.grid.rows:1),u=e.slides.length%l!==0,c=o&&e.slides.length%t.grid.rows!==0,f=m=>{for(let g=0;g<m;g+=1){const w=e.isElement?qh("swiper-slide",[t.slideBlankClass]):qh("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(w)}};if(u){if(t.loopAddBlankSlides){const m=l-e.slides.length%l;f(m),e.recalcSlides(),e.updateSlides()}else Gh("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(t.loopAddBlankSlides){const m=t.grid.rows-e.slides.length%t.grid.rows;f(m),e.recalcSlides(),e.updateSlides()}else Gh("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function Q2(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:i,activeSlideIndex:o,byController:l,byMousewheel:u}=n===void 0?{}:n;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:f,allowSlidePrev:m,allowSlideNext:g,slidesEl:w,params:S}=c,{centeredSlides:x}=S;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&S.virtual.enabled){t&&(!S.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):S.centeredSlides&&c.snapIndex<S.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=m,c.allowSlideNext=g,c.emit("loopFix");return}let P=S.slidesPerView;P==="auto"?P=c.slidesPerViewDynamic():(P=Math.ceil(parseFloat(S.slidesPerView,10)),x&&P%2===0&&(P=P+1));const M=S.slidesPerGroupAuto?P:S.slidesPerGroup;let O=M;O%M!==0&&(O+=M-O%M),O+=S.loopAdditionalSlides,c.loopedSlides=O;const R=c.grid&&S.grid&&S.grid.rows>1;f.length<P+O?Gh("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):R&&S.grid.fill==="row"&&Gh("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const D=[],B=[];let z=c.activeIndex;typeof o>"u"?o=c.getSlideIndex(f.find(k=>k.classList.contains(S.slideActiveClass))):z=o;const W=r==="next"||!r,L=r==="prev"||!r;let C=0,A=0;const b=R?Math.ceil(f.length/S.grid.rows):f.length,U=(R?f[o].column:o)+(x&&typeof i>"u"?-P/2+.5:0);if(U<O){C=Math.max(O-U,M);for(let k=0;k<O-U;k+=1){const ne=k-Math.floor(k/b)*b;if(R){const de=b-ne-1;for(let Ee=f.length-1;Ee>=0;Ee-=1)f[Ee].column===de&&D.push(Ee)}else D.push(b-ne-1)}}else if(U+P>b-O){A=Math.max(U-(b-O*2),M);for(let k=0;k<A;k+=1){const ne=k-Math.floor(k/b)*b;R?f.forEach((de,Ee)=>{de.column===ne&&B.push(Ee)}):B.push(ne)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),L&&D.forEach(k=>{f[k].swiperLoopMoveDOM=!0,w.prepend(f[k]),f[k].swiperLoopMoveDOM=!1}),W&&B.forEach(k=>{f[k].swiperLoopMoveDOM=!0,w.append(f[k]),f[k].swiperLoopMoveDOM=!1}),c.recalcSlides(),S.slidesPerView==="auto"?c.updateSlides():R&&(D.length>0&&L||B.length>0&&W)&&c.slides.forEach((k,ne)=>{c.grid.updateSlide(ne,k,c.slides)}),S.watchSlidesProgress&&c.updateSlidesOffset(),t){if(D.length>0&&L){if(typeof e>"u"){const k=c.slidesGrid[z],de=c.slidesGrid[z+C]-k;u?c.setTranslate(c.translate-de):(c.slideTo(z+Math.ceil(C),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-de,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-de))}else if(i){const k=R?D.length/S.grid.rows:D.length;c.slideTo(c.activeIndex+k,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(B.length>0&&W)if(typeof e>"u"){const k=c.slidesGrid[z],de=c.slidesGrid[z-A]-k;u?c.setTranslate(c.translate-de):(c.slideTo(z-A,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-de,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-de))}else{const k=R?B.length/S.grid.rows:B.length;c.slideTo(c.activeIndex-k,0,!1,!0)}}if(c.allowSlidePrev=m,c.allowSlideNext=g,c.controller&&c.controller.control&&!l){const k={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:o,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(ne=>{!ne.destroyed&&ne.params.loop&&ne.loopFix({...k,slideTo:ne.params.slidesPerView===S.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...k,slideTo:c.controller.control.params.slidesPerView===S.slidesPerView?t:!1})}c.emit("loopFix")}function Y2(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(i=>{const o=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[o]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var X2={loopCreate:K2,loopFix:Q2,loopDestroy:Y2};function J2(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function Z2(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var eV={setGrabCursor:J2,unsetGrabCursor:Z2};function tV(n,e){e===void 0&&(e=this);function t(r){if(!r||r===qr()||r===Tn())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(n);return!i&&!r.getRootNode?null:i||t(r.getRootNode().host)}return t(e)}function HE(n,e,t){const r=Tn(),{params:i}=n,o=i.edgeSwipeDetection,l=i.edgeSwipeThreshold;return o&&(t<=l||t>=r.innerWidth-l)?o==="prevent"?(e.preventDefault(),!0):!1:!0}function nV(n){const e=this,t=qr();let r=n;r.originalEvent&&(r=r.originalEvent);const i=e.touchEventsData;if(r.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(i.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){HE(e,r,r.targetTouches[0].pageX);return}const{params:o,touches:l,enabled:u}=e;if(!u||!o.simulateTouch&&r.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let c=r.target;if(o.touchEventsTarget==="wrapper"&&!c2(c,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||i.isTouched&&i.isMoved)return;const f=!!o.noSwipingClass&&o.noSwipingClass!=="",m=r.composedPath?r.composedPath():r.path;f&&r.target&&r.target.shadowRoot&&m&&(c=m[0]);const g=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,w=!!(r.target&&r.target.shadowRoot);if(o.noSwiping&&(w?tV(g,c):c.closest(g))){e.allowClick=!0;return}if(o.swipeHandler&&!c.closest(o.swipeHandler))return;l.currentX=r.pageX,l.currentY=r.pageY;const S=l.currentX,x=l.currentY;if(!HE(e,r,S))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=S,l.startY=x,i.touchStartTime=Hh(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1);let P=!0;c.matches(i.focusableElements)&&(P=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==c&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!c.matches(i.focusableElements))&&t.activeElement.blur();const M=P&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||M)&&!c.isContentEditable&&r.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function rV(n){const e=qr(),t=this,r=t.touchEventsData,{params:i,touches:o,rtlTranslate:l,enabled:u}=t;if(!u||!i.simulateTouch&&n.pointerType==="mouse")return;let c=n;if(c.originalEvent&&(c=c.originalEvent),c.type==="pointermove"&&(r.touchId!==null||c.pointerId!==r.pointerId))return;let f;if(c.type==="touchmove"){if(f=[...c.changedTouches].find(z=>z.identifier===r.touchId),!f||f.identifier!==r.touchId)return}else f=c;if(!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",c);return}const m=f.pageX,g=f.pageY;if(c.preventedByNestedSwiper){o.startX=m,o.startY=g;return}if(!t.allowTouchMove){c.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(o,{startX:m,startY:g,currentX:m,currentY:g}),r.touchStartTime=Hh());return}if(i.touchReleaseOnEdges&&!i.loop){if(t.isVertical()){if(g<o.startY&&t.translate<=t.maxTranslate()||g>o.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(m<o.startX&&t.translate<=t.maxTranslate()||m>o.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==c.target&&c.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&c.target===e.activeElement&&c.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}r.allowTouchCallbacks&&t.emit("touchMove",c),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=m,o.currentY=g;const w=o.currentX-o.startX,S=o.currentY-o.startY;if(t.params.threshold&&Math.sqrt(w**2+S**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let z;t.isHorizontal()&&o.currentY===o.startY||t.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:w*w+S*S>=25&&(z=Math.atan2(Math.abs(S),Math.abs(w))*180/Math.PI,r.isScrolling=t.isHorizontal()?z>i.touchAngle:90-z>i.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",c),typeof r.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(r.startMoving=!0),r.isScrolling||c.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!i.cssMode&&c.cancelable&&c.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&c.stopPropagation();let x=t.isHorizontal()?w:S,P=t.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;i.oneWayMovement&&(x=Math.abs(x)*(l?1:-1),P=Math.abs(P)*(l?1:-1)),o.diff=x,x*=i.touchRatio,l&&(x=-x,P=-P);const M=t.touchesDirection;t.swipeDirection=x>0?"prev":"next",t.touchesDirection=P>0?"prev":"next";const O=t.params.loop&&!i.cssMode,R=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(O&&R&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const z=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(z)}r.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",c)}if(new Date().getTime(),i._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&M!==t.touchesDirection&&O&&R&&Math.abs(x)>=1){Object.assign(o,{startX:m,startY:g,currentX:m,currentY:g,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}t.emit("sliderMove",c),r.isMoved=!0,r.currentTranslate=x+r.startTranslate;let D=!0,B=i.resistanceRatio;if(i.touchReleaseOnEdges&&(B=0),x>0?(O&&R&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(D=!1,i.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+x)**B))):x<0&&(O&&R&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(D=!1,i.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-x)**B))),D&&(c.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(x)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,o.diff=t.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function iV(n){const e=this,t=e.touchEventsData;let r=n;r.originalEvent&&(r=r.originalEvent);let i;if(r.type==="touchend"||r.type==="touchcancel"){if(i=[...r.changedTouches].find(z=>z.identifier===t.touchId),!i||i.identifier!==t.touchId)return}else{if(t.touchId!==null||r.pointerId!==t.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:l,touches:u,rtlTranslate:c,slidesGrid:f,enabled:m}=e;if(!m||!l.simulateTouch&&r.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",r),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&l.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}l.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const g=Hh(),w=g-t.touchStartTime;if(e.allowClick){const z=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(z&&z[0]||r.target,z),e.emit("tap click",r),w<300&&g-t.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(t.lastClickTime=Hh(),Yg(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||u.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let S;if(l.followFinger?S=c?e.translate:-e.translate:S=-t.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:S});return}const x=S>=-e.maxTranslate()&&!e.params.loop;let P=0,M=e.slidesSizesGrid[0];for(let z=0;z<f.length;z+=z<l.slidesPerGroupSkip?1:l.slidesPerGroup){const W=z<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof f[z+W]<"u"?(x||S>=f[z]&&S<f[z+W])&&(P=z,M=f[z+W]-f[z]):(x||S>=f[z])&&(P=z,M=f[f.length-1]-f[f.length-2])}let O=null,R=null;l.rewind&&(e.isBeginning?R=l.virtual&&l.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(O=0));const D=(S-f[P])/M,B=P<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(w>l.longSwipesMs){if(!l.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(D>=l.longSwipesRatio?e.slideTo(l.rewind&&e.isEnd?O:P+B):e.slideTo(P)),e.swipeDirection==="prev"&&(D>1-l.longSwipesRatio?e.slideTo(P+B):R!==null&&D<0&&Math.abs(D)>l.longSwipesRatio?e.slideTo(R):e.slideTo(P))}else{if(!l.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(P+B):e.slideTo(P):(e.swipeDirection==="next"&&e.slideTo(O!==null?O:P+B),e.swipeDirection==="prev"&&e.slideTo(R!==null?R:P))}}function GE(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=n,l=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const u=l&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!u?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!l?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=r,n.params.watchOverflow&&o!==n.snapGrid&&n.checkOverflow()}function sV(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function oV(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const o=n.maxTranslate()-n.minTranslate();o===0?i=0:i=(n.translate-n.minTranslate())/o,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function aV(n){const e=this;Sh(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function lV(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const ob=(n,e)=>{const t=qr(),{params:r,el:i,wrapperEl:o,device:l}=n,u=!!r.nested,c=e==="on"?"addEventListener":"removeEventListener",f=e;!i||typeof i=="string"||(t[c]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:u}),i[c]("touchstart",n.onTouchStart,{passive:!1}),i[c]("pointerdown",n.onTouchStart,{passive:!1}),t[c]("touchmove",n.onTouchMove,{passive:!1,capture:u}),t[c]("pointermove",n.onTouchMove,{passive:!1,capture:u}),t[c]("touchend",n.onTouchEnd,{passive:!0}),t[c]("pointerup",n.onTouchEnd,{passive:!0}),t[c]("pointercancel",n.onTouchEnd,{passive:!0}),t[c]("touchcancel",n.onTouchEnd,{passive:!0}),t[c]("pointerout",n.onTouchEnd,{passive:!0}),t[c]("pointerleave",n.onTouchEnd,{passive:!0}),t[c]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[c]("click",n.onClick,!0),r.cssMode&&o[c]("scroll",n.onScroll),r.updateOnWindowResize?n[f](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",GE,!0):n[f]("observerUpdate",GE,!0),i[c]("load",n.onLoad,{capture:!0}))};function uV(){const n=this,{params:e}=n;n.onTouchStart=nV.bind(n),n.onTouchMove=rV.bind(n),n.onTouchEnd=iV.bind(n),n.onDocumentTouchStart=lV.bind(n),e.cssMode&&(n.onScroll=oV.bind(n)),n.onClick=sV.bind(n),n.onLoad=aV.bind(n),ob(n,"on")}function cV(){ob(this,"off")}var dV={attachEvents:uV,detachEvents:cV};const qE=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function hV(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,o=r.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const l=qr(),u=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",c=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?n.el:l.querySelector(r.breakpointsBase),f=n.getBreakpoint(o,u,c);if(!f||n.currentBreakpoint===f)return;const g=(f in o?o[f]:void 0)||n.originalParams,w=qE(n,r),S=qE(n,g),x=n.params.grabCursor,P=g.grabCursor,M=r.enabled;w&&!S?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!w&&S&&(i.classList.add(`${r.containerModifierClass}grid`),(g.grid.fill&&g.grid.fill==="column"||!g.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),x&&!P?n.unsetGrabCursor():!x&&P&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(W=>{if(typeof g[W]>"u")return;const L=r[W]&&r[W].enabled,C=g[W]&&g[W].enabled;L&&!C&&n[W].disable(),!L&&C&&n[W].enable()});const O=g.direction&&g.direction!==r.direction,R=r.loop&&(g.slidesPerView!==r.slidesPerView||O),D=r.loop;O&&t&&n.changeDirection(),Bn(n.params,g);const B=n.params.enabled,z=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),M&&!B?n.disable():!M&&B&&n.enable(),n.currentBreakpoint=f,n.emit("_beforeBreakpoint",g),t&&(R?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!D&&z?(n.loopCreate(e),n.updateSlides()):D&&!z&&n.loopDestroy()),n.emit("breakpoint",g)}function fV(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const i=Tn(),o=e==="window"?i.innerHeight:t.clientHeight,l=Object.keys(n).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const c=parseFloat(u.substr(1));return{value:o*c,point:u}}return{value:u,point:u}});l.sort((u,c)=>parseInt(u.value,10)-parseInt(c.value,10));for(let u=0;u<l.length;u+=1){const{point:c,value:f}=l[u];e==="window"?i.matchMedia(`(min-width: ${f}px)`).matches&&(r=c):f<=t.clientWidth&&(r=c)}return r||"max"}var pV={setBreakpoint:hV,getBreakpoint:fV};function mV(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&t.push(e+i)}):typeof r=="string"&&t.push(e+r)}),t}function gV(){const n=this,{classNames:e,params:t,rtl:r,el:i,device:o}=n,l=mV(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...l),i.classList.add(...e),n.emitContainerClasses()}function yV(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var vV={addClasses:gV,removeClasses:yV};function _V(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const i=n.slides.length-1,o=n.slidesGrid[i]+n.slidesSizesGrid[i]+r*2;n.isLocked=n.size>o}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var wV={checkOverflow:_V},Zg={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function TV(n,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],o=r[i];if(typeof o!="object"||o===null){Bn(e,r);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in o)){Bn(e,r);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),Bn(e,r)}}const og={eventsEmitter:v2,update:P2,translate:L2,transition:F2,slide:q2,loop:X2,grabCursor:eV,events:dV,breakpoints:pV,checkOverflow:wV,classes:vV},ag={};let Iv=class Ti{constructor(){let e,t;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=Bn({},t),e&&!t.el&&(t.el=e);const l=qr();if(t.el&&typeof t.el=="string"&&l.querySelectorAll(t.el).length>1){const m=[];return l.querySelectorAll(t.el).forEach(g=>{const w=Bn({},t,{el:g});m.push(new Ti(w))}),m}const u=this;u.__swiper__=!0,u.support=nb(),u.device=rb({userAgent:t.userAgent}),u.browser=ib(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],t.modules&&Array.isArray(t.modules)&&u.modules.push(...t.modules);const c={};u.modules.forEach(m=>{m({params:t,swiper:u,extendParams:TV(t,c),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const f=Bn({},Zg,c);return u.params=Bn({},f,ag,t),u.originalParams=Bn({},u.params),u.passedParams=Bn({},t),u.params&&u.params.on&&Object.keys(u.params.on).forEach(m=>{u.on(m,u.params.on[m])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:r}=this,i=Br(t,`.${r.slideClass}, swiper-slide`),o=Kh(i[0]);return Kh(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=Br(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),l=(r.maxTranslate()-i)*e+i;r.translateTo(l,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);t.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:i,slides:o,slidesGrid:l,slidesSizesGrid:u,size:c,activeIndex:f}=r;let m=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let g=o[f]?Math.ceil(o[f].swiperSlideSize):0,w;for(let S=f+1;S<o.length;S+=1)o[S]&&!w&&(g+=Math.ceil(o[S].swiperSlideSize),m+=1,g>c&&(w=!0));for(let S=f-1;S>=0;S-=1)o[S]&&!w&&(g+=o[S].swiperSlideSize,m+=1,g>c&&(w=!0))}else if(e==="current")for(let g=f+1;g<o.length;g+=1)(t?l[g]+u[g]-l[f]<c:l[g]-l[f]<c)&&(m+=1);else for(let g=f-1;g>=0;g-=1)l[f]-l[g]<c&&(m+=1);return m}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&Sh(e,l)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const l=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(l,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const l=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(l.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||i()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Br(r,i())[0];return!l&&t.params.createElements&&(l=qh("div",t.params.wrapperClass),r.append(l),Br(r,`.${t.params.slideClass}`).forEach(u=>{l.append(u)})),Object.assign(t,{el:r,wrapperEl:l,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:l,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||vs(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||vs(r,"direction")==="rtl"),wrongRTL:vs(l,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(o=>{o.complete?Sh(t,o):o.addEventListener("load",l=>{Sh(t,l.target)})}),Jg(t),t.initialized=!0,Jg(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:i,el:o,wrapperEl:l,slides:u}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),l&&l.removeAttribute("style"),u&&u.length&&u.forEach(c=>{c.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(c=>{r.off(c)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),s2(r)),r.destroyed=!0),null}static extendDefaults(e){Bn(ag,e)}static get extendedDefaults(){return ag}static get defaults(){return Zg}static installModule(e){Ti.prototype.__modules__||(Ti.prototype.__modules__=[]);const t=Ti.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Ti.installModule(t)),Ti):(Ti.installModule(e),Ti)}};Object.keys(og).forEach(n=>{Object.keys(og[n]).forEach(e=>{Iv.prototype[e]=og[n][e]})});Iv.use([g2,y2]);const ab=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Ro(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Xa(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:Ro(e[r])&&Ro(n[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?n[r]=e[r]:Xa(n[r],e[r]):n[r]=e[r]})}function lb(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function ub(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function cb(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function db(n){n===void 0&&(n="");const e=n.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function EV(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function SV(n){let{swiper:e,slides:t,passedParams:r,changedParams:i,nextEl:o,prevEl:l,scrollbarEl:u,paginationEl:c}=n;const f=i.filter(A=>A!=="children"&&A!=="direction"&&A!=="wrapperClass"),{params:m,pagination:g,navigation:w,scrollbar:S,virtual:x,thumbs:P}=e;let M,O,R,D,B,z,W,L;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&m.thumbs&&(!m.thumbs.swiper||m.thumbs.swiper.destroyed)&&(M=!0),i.includes("controller")&&r.controller&&r.controller.control&&m.controller&&!m.controller.control&&(O=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||c)&&(m.pagination||m.pagination===!1)&&g&&!g.el&&(R=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||u)&&(m.scrollbar||m.scrollbar===!1)&&S&&!S.el&&(D=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||l)&&(r.navigation.nextEl||o)&&(m.navigation||m.navigation===!1)&&w&&!w.prevEl&&!w.nextEl&&(B=!0);const C=A=>{e[A]&&(e[A].destroy(),A==="navigation"?(e.isElement&&(e[A].prevEl.remove(),e[A].nextEl.remove()),m[A].prevEl=void 0,m[A].nextEl=void 0,e[A].prevEl=void 0,e[A].nextEl=void 0):(e.isElement&&e[A].el.remove(),m[A].el=void 0,e[A].el=void 0))};i.includes("loop")&&e.isElement&&(m.loop&&!r.loop?z=!0:!m.loop&&r.loop?W=!0:L=!0),f.forEach(A=>{if(Ro(m[A])&&Ro(r[A]))Object.assign(m[A],r[A]),(A==="navigation"||A==="pagination"||A==="scrollbar")&&"enabled"in r[A]&&!r[A].enabled&&C(A);else{const b=r[A];(b===!0||b===!1)&&(A==="navigation"||A==="pagination"||A==="scrollbar")?b===!1&&C(A):m[A]=r[A]}}),f.includes("controller")&&!O&&e.controller&&e.controller.control&&m.controller&&m.controller.control&&(e.controller.control=m.controller.control),i.includes("children")&&t&&x&&m.virtual.enabled?(x.slides=t,x.update(!0)):i.includes("virtual")&&x&&m.virtual.enabled&&(t&&(x.slides=t),x.update(!0)),i.includes("children")&&t&&m.loop&&(L=!0),M&&P.init()&&P.update(!0),O&&(e.controller.control=m.controller.control),R&&(e.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),e.el.appendChild(c)),c&&(m.pagination.el=c),g.init(),g.render(),g.update()),D&&(e.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-scrollbar"),u.part.add("scrollbar"),e.el.appendChild(u)),u&&(m.scrollbar.el=u),S.init(),S.updateSize(),S.setTranslate()),B&&(e.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=e.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),e.el.appendChild(o)),(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-prev"),l.innerHTML=e.hostEl.constructor.prevButtonSvg,l.part.add("button-prev"),e.el.appendChild(l))),o&&(m.navigation.nextEl=o),l&&(m.navigation.prevEl=l),w.init(),w.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&e.changeDirection(r.direction,!1),(z||L)&&e.loopDestroy(),(W||L)&&e.loopCreate(),e.update()}function xV(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},r={},i={};Xa(t,Zg),t._emitClasses=!0,t.init=!1;const o={},l=ab.map(c=>c.replace(/_/,"")),u=Object.assign({},n);return Object.keys(u).forEach(c=>{typeof n[c]>"u"||(l.indexOf(c)>=0?Ro(n[c])?(t[c]={},i[c]={},Xa(t[c],n[c]),Xa(i[c],n[c])):(t[c]=n[c],i[c]=n[c]):c.search(/on[A-Z]/)===0&&typeof n[c]=="function"?e?r[`${c[2].toLowerCase()}${c.substr(3)}`]=n[c]:t.on[`${c[2].toLowerCase()}${c.substr(3)}`]=n[c]:o[c]=n[c])}),["navigation","pagination","scrollbar"].forEach(c=>{t[c]===!0&&(t[c]={}),t[c]===!1&&delete t[c]}),{params:t,passedParams:i,rest:o,events:r}}function IV(n,e){let{el:t,nextEl:r,prevEl:i,paginationEl:o,scrollbarEl:l,swiper:u}=n;lb(e)&&r&&i&&(u.params.navigation.nextEl=r,u.originalParams.navigation.nextEl=r,u.params.navigation.prevEl=i,u.originalParams.navigation.prevEl=i),ub(e)&&o&&(u.params.pagination.el=o,u.originalParams.pagination.el=o),cb(e)&&l&&(u.params.scrollbar.el=l,u.originalParams.scrollbar.el=l),u.init(t)}function CV(n,e,t,r,i){const o=[];if(!e)return o;const l=c=>{o.indexOf(c)<0&&o.push(c)};if(t&&r){const c=r.map(i),f=t.map(i);c.join("")!==f.join("")&&l("children"),r.length!==t.length&&l("children")}return ab.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in n&&c in e)if(Ro(n[c])&&Ro(e[c])){const f=Object.keys(n[c]),m=Object.keys(e[c]);f.length!==m.length?l(c):(f.forEach(g=>{n[c][g]!==e[c][g]&&l(c)}),m.forEach(g=>{n[c][g]!==e[c][g]&&l(c)}))}else n[c]!==e[c]&&l(c)}),o}const bV=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function Qh(){return Qh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qh.apply(this,arguments)}function hb(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function fb(n){const e=[];return nt.Children.toArray(n).forEach(t=>{hb(t)?e.push(t):t.props&&t.props.children&&fb(t.props.children).forEach(r=>e.push(r))}),e}function AV(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return nt.Children.toArray(n).forEach(r=>{if(hb(r))e.push(r);else if(r.props&&r.props.slot&&t[r.props.slot])t[r.props.slot].push(r);else if(r.props&&r.props.children){const i=fb(r.props.children);i.length>0?i.forEach(o=>e.push(o)):t["container-end"].push(r)}else t["container-end"].push(r)}),{slides:e,slots:t}}function PV(n,e,t){if(!t)return null;const r=m=>{let g=m;return m<0?g=e.length+m:g>=e.length&&(g=g-e.length),g},i=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:o,to:l}=t,u=n.params.loop?-e.length:0,c=n.params.loop?e.length*2:e.length,f=[];for(let m=u;m<c;m+=1)m>=o&&m<=l&&f.push(e[r(m)]);return f.map((m,g)=>nt.cloneElement(m,{swiper:n,style:i,key:m.props.virtualIndex||m.key||`slide-${g}`}))}function Wu(n,e){return typeof window>"u"?K.useEffect(n,e):K.useLayoutEffect(n,e)}const KE=K.createContext(null),RV=K.createContext(null),pb=K.forwardRef(function(n,e){let{className:t,tag:r="div",wrapperTag:i="div",children:o,onSwiper:l,...u}=n===void 0?{}:n,c=!1;const[f,m]=K.useState("swiper"),[g,w]=K.useState(null),[S,x]=K.useState(!1),P=K.useRef(!1),M=K.useRef(null),O=K.useRef(null),R=K.useRef(null),D=K.useRef(null),B=K.useRef(null),z=K.useRef(null),W=K.useRef(null),L=K.useRef(null),{params:C,passedParams:A,rest:b,events:V}=xV(u),{slides:U,slots:k}=AV(o),ne=()=>{x(!S)};Object.assign(C.on,{_containerClasses(ie,j){m(j)}});const de=()=>{Object.assign(C.on,V),c=!0;const ie={...C};if(delete ie.wrapperClass,O.current=new Iv(ie),O.current.virtual&&O.current.params.virtual.enabled){O.current.virtual.slides=U;const j={cache:!1,slides:U,renderExternal:w,renderExternalUpdate:!1};Xa(O.current.params.virtual,j),Xa(O.current.originalParams.virtual,j)}};M.current||de(),O.current&&O.current.on("_beforeBreakpoint",ne);const Ee=()=>{c||!V||!O.current||Object.keys(V).forEach(ie=>{O.current.on(ie,V[ie])})},he=()=>{!V||!O.current||Object.keys(V).forEach(ie=>{O.current.off(ie,V[ie])})};K.useEffect(()=>()=>{O.current&&O.current.off("_beforeBreakpoint",ne)}),K.useEffect(()=>{!P.current&&O.current&&(O.current.emitSlidesClasses(),P.current=!0)}),Wu(()=>{if(e&&(e.current=M.current),!!M.current)return O.current.destroyed&&de(),IV({el:M.current,nextEl:B.current,prevEl:z.current,paginationEl:W.current,scrollbarEl:L.current,swiper:O.current},C),l&&!O.current.destroyed&&l(O.current),()=>{O.current&&!O.current.destroyed&&O.current.destroy(!0,!1)}},[]),Wu(()=>{Ee();const ie=CV(A,R.current,U,D.current,j=>j.key);return R.current=A,D.current=U,ie.length&&O.current&&!O.current.destroyed&&SV({swiper:O.current,slides:U,passedParams:A,changedParams:ie,nextEl:B.current,prevEl:z.current,scrollbarEl:L.current,paginationEl:W.current}),()=>{he()}}),Wu(()=>{bV(O.current)},[g]);function H(){return C.virtual?PV(O.current,U,g):U.map((ie,j)=>nt.cloneElement(ie,{swiper:O.current,swiperSlideIndex:j}))}return nt.createElement(r,Qh({ref:M,className:db(`${f}${t?` ${t}`:""}`)},b),nt.createElement(RV.Provider,{value:O.current},k["container-start"],nt.createElement(i,{className:EV(C.wrapperClass)},k["wrapper-start"],H(),k["wrapper-end"]),lb(C)&&nt.createElement(nt.Fragment,null,nt.createElement("div",{ref:z,className:"swiper-button-prev"}),nt.createElement("div",{ref:B,className:"swiper-button-next"})),cb(C)&&nt.createElement("div",{ref:L,className:"swiper-scrollbar"}),ub(C)&&nt.createElement("div",{ref:W,className:"swiper-pagination"}),k["container-end"]))});pb.displayName="Swiper";const mb=K.forwardRef(function(n,e){let{tag:t="div",children:r,className:i="",swiper:o,zoom:l,lazy:u,virtualIndex:c,swiperSlideIndex:f,...m}=n===void 0?{}:n;const g=K.useRef(null),[w,S]=K.useState("swiper-slide"),[x,P]=K.useState(!1);function M(B,z,W){z===g.current&&S(W)}Wu(()=>{if(typeof f<"u"&&(g.current.swiperSlideIndex=f),e&&(e.current=g.current),!(!g.current||!o)){if(o.destroyed){w!=="swiper-slide"&&S("swiper-slide");return}return o.on("_slideClass",M),()=>{o&&o.off("_slideClass",M)}}}),Wu(()=>{o&&g.current&&!o.destroyed&&S(o.getSlideClasses(g.current))},[o]);const O={isActive:w.indexOf("swiper-slide-active")>=0,isVisible:w.indexOf("swiper-slide-visible")>=0,isPrev:w.indexOf("swiper-slide-prev")>=0,isNext:w.indexOf("swiper-slide-next")>=0},R=()=>typeof r=="function"?r(O):r,D=()=>{P(!0)};return nt.createElement(t,Qh({ref:g,className:db(`${w}${i?` ${i}`:""}`),"data-swiper-slide-index":c,onLoad:D},m),l&&nt.createElement(KE.Provider,{value:O},nt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof l=="number"?l:void 0},R(),u&&!x&&nt.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&nt.createElement(KE.Provider,{value:O},R(),u&&!x&&nt.createElement("div",{className:"swiper-lazy-preloader"})))});mb.displayName="SwiperSlide";function gb(n,e,t,r){return n.params.createElements&&Object.keys(r).forEach(i=>{if(!t[i]&&t.auto===!0){let o=Br(n.el,`.${r[i]}`)[0];o||(o=qh("div",r[i]),o.className=r[i],n.el.append(o)),t[i]=o,e[i]=o}}),t}function kV(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function o(x){let P;return x&&typeof x=="string"&&e.isElement&&(P=e.el.querySelector(x)||e.hostEl.querySelector(x),P)?P:(x&&(typeof x=="string"&&(P=[...document.querySelectorAll(x)]),e.params.uniqueNavElements&&typeof x=="string"&&P&&P.length>1&&e.el.querySelectorAll(x).length===1?P=e.el.querySelector(x):P&&P.length===1&&(P=P[0])),x&&!P?x:P)}function l(x,P){const M=e.params.navigation;x=$t(x),x.forEach(O=>{O&&(O.classList[P?"add":"remove"](...M.disabledClass.split(" ")),O.tagName==="BUTTON"&&(O.disabled=P),e.params.watchOverflow&&e.enabled&&O.classList[e.isLocked?"add":"remove"](M.lockClass))})}function u(){const{nextEl:x,prevEl:P}=e.navigation;if(e.params.loop){l(P,!1),l(x,!1);return}l(P,e.isBeginning&&!e.params.rewind),l(x,e.isEnd&&!e.params.rewind)}function c(x){x.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function f(x){x.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function m(){const x=e.params.navigation;if(e.params.navigation=gb(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(x.nextEl||x.prevEl))return;let P=o(x.nextEl),M=o(x.prevEl);Object.assign(e.navigation,{nextEl:P,prevEl:M}),P=$t(P),M=$t(M);const O=(R,D)=>{R&&R.addEventListener("click",D==="next"?f:c),!e.enabled&&R&&R.classList.add(...x.lockClass.split(" "))};P.forEach(R=>O(R,"next")),M.forEach(R=>O(R,"prev"))}function g(){let{nextEl:x,prevEl:P}=e.navigation;x=$t(x),P=$t(P);const M=(O,R)=>{O.removeEventListener("click",R==="next"?f:c),O.classList.remove(...e.params.navigation.disabledClass.split(" "))};x.forEach(O=>M(O,"next")),P.forEach(O=>M(O,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?S():(m(),u())}),r("toEdge fromEdge lock unlock",()=>{u()}),r("destroy",()=>{g()}),r("enable disable",()=>{let{nextEl:x,prevEl:P}=e.navigation;if(x=$t(x),P=$t(P),e.enabled){u();return}[...x,...P].filter(M=>!!M).forEach(M=>M.classList.add(e.params.navigation.lockClass))}),r("click",(x,P)=>{let{nextEl:M,prevEl:O}=e.navigation;M=$t(M),O=$t(O);const R=P.target;let D=O.includes(R)||M.includes(R);if(e.isElement&&!D){const B=P.path||P.composedPath&&P.composedPath();B&&(D=B.find(z=>M.includes(z)||O.includes(z)))}if(e.params.navigation.hideOnClick&&!D){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===R||e.pagination.el.contains(R)))return;let B;M.length?B=M[0].classList.contains(e.params.navigation.hiddenClass):O.length&&(B=O[0].classList.contains(e.params.navigation.hiddenClass)),i(B===!0?"navigationShow":"navigationHide"),[...M,...O].filter(z=>!!z).forEach(z=>z.classList.toggle(e.params.navigation.hiddenClass))}});const w=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),m(),u()},S=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),g()};Object.assign(e.navigation,{enable:w,disable:S,update:u,init:m,destroy:g})}function Pu(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function NV(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const o="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:R=>R,formatFractionTotal:R=>R,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),e.pagination={el:null,bullets:[]};let l,u=0;function c(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function f(R,D){const{bulletActiveClass:B}=e.params.pagination;R&&(R=R[`${D==="prev"?"previous":"next"}ElementSibling`],R&&(R.classList.add(`${B}-${D}`),R=R[`${D==="prev"?"previous":"next"}ElementSibling`],R&&R.classList.add(`${B}-${D}-${D}`)))}function m(R,D,B){if(R=R%B,D=D%B,D===R+1)return"next";if(D===R-1)return"previous"}function g(R){const D=R.target.closest(Pu(e.params.pagination.bulletClass));if(!D)return;R.preventDefault();const B=Kh(D)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===B)return;const z=m(e.realIndex,B,e.slides.length);z==="next"?e.slideNext():z==="previous"?e.slidePrev():e.slideToLoop(B)}else e.slideTo(B)}function w(){const R=e.rtl,D=e.params.pagination;if(c())return;let B=e.pagination.el;B=$t(B);let z,W;const L=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,C=e.params.loop?Math.ceil(L/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(W=e.previousRealIndex||0,z=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(z=e.snapIndex,W=e.previousSnapIndex):(W=e.previousIndex||0,z=e.activeIndex||0),D.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const A=e.pagination.bullets;let b,V,U;if(D.dynamicBullets&&(l=Xg(A[0],e.isHorizontal()?"width":"height"),B.forEach(k=>{k.style[e.isHorizontal()?"width":"height"]=`${l*(D.dynamicMainBullets+4)}px`}),D.dynamicMainBullets>1&&W!==void 0&&(u+=z-(W||0),u>D.dynamicMainBullets-1?u=D.dynamicMainBullets-1:u<0&&(u=0)),b=Math.max(z-u,0),V=b+(Math.min(A.length,D.dynamicMainBullets)-1),U=(V+b)/2),A.forEach(k=>{const ne=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(de=>`${D.bulletActiveClass}${de}`)].map(de=>typeof de=="string"&&de.includes(" ")?de.split(" "):de).flat();k.classList.remove(...ne)}),B.length>1)A.forEach(k=>{const ne=Kh(k);ne===z?k.classList.add(...D.bulletActiveClass.split(" ")):e.isElement&&k.setAttribute("part","bullet"),D.dynamicBullets&&(ne>=b&&ne<=V&&k.classList.add(...`${D.bulletActiveClass}-main`.split(" ")),ne===b&&f(k,"prev"),ne===V&&f(k,"next"))});else{const k=A[z];if(k&&k.classList.add(...D.bulletActiveClass.split(" ")),e.isElement&&A.forEach((ne,de)=>{ne.setAttribute("part",de===z?"bullet-active":"bullet")}),D.dynamicBullets){const ne=A[b],de=A[V];for(let Ee=b;Ee<=V;Ee+=1)A[Ee]&&A[Ee].classList.add(...`${D.bulletActiveClass}-main`.split(" "));f(ne,"prev"),f(de,"next")}}if(D.dynamicBullets){const k=Math.min(A.length,D.dynamicMainBullets+4),ne=(l*k-l)/2-U*l,de=R?"right":"left";A.forEach(Ee=>{Ee.style[e.isHorizontal()?de:"top"]=`${ne}px`})}}B.forEach((A,b)=>{if(D.type==="fraction"&&(A.querySelectorAll(Pu(D.currentClass)).forEach(V=>{V.textContent=D.formatFractionCurrent(z+1)}),A.querySelectorAll(Pu(D.totalClass)).forEach(V=>{V.textContent=D.formatFractionTotal(C)})),D.type==="progressbar"){let V;D.progressbarOpposite?V=e.isHorizontal()?"vertical":"horizontal":V=e.isHorizontal()?"horizontal":"vertical";const U=(z+1)/C;let k=1,ne=1;V==="horizontal"?k=U:ne=U,A.querySelectorAll(Pu(D.progressbarFillClass)).forEach(de=>{de.style.transform=`translate3d(0,0,0) scaleX(${k}) scaleY(${ne})`,de.style.transitionDuration=`${e.params.speed}ms`})}D.type==="custom"&&D.renderCustom?(A.innerHTML=D.renderCustom(e,z+1,C),b===0&&i("paginationRender",A)):(b===0&&i("paginationRender",A),i("paginationUpdate",A)),e.params.watchOverflow&&e.enabled&&A.classList[e.isLocked?"add":"remove"](D.lockClass)})}function S(){const R=e.params.pagination;if(c())return;const D=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let B=e.pagination.el;B=$t(B);let z="";if(R.type==="bullets"){let W=e.params.loop?Math.ceil(D/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&W>D&&(W=D);for(let L=0;L<W;L+=1)R.renderBullet?z+=R.renderBullet.call(e,L,R.bulletClass):z+=`<${R.bulletElement} ${e.isElement?'part="bullet"':""} class="${R.bulletClass}"></${R.bulletElement}>`}R.type==="fraction"&&(R.renderFraction?z=R.renderFraction.call(e,R.currentClass,R.totalClass):z=`<span class="${R.currentClass}"></span> / <span class="${R.totalClass}"></span>`),R.type==="progressbar"&&(R.renderProgressbar?z=R.renderProgressbar.call(e,R.progressbarFillClass):z=`<span class="${R.progressbarFillClass}"></span>`),e.pagination.bullets=[],B.forEach(W=>{R.type!=="custom"&&(W.innerHTML=z||""),R.type==="bullets"&&e.pagination.bullets.push(...W.querySelectorAll(Pu(R.bulletClass)))}),R.type!=="custom"&&i("paginationRender",B[0])}function x(){e.params.pagination=gb(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const R=e.params.pagination;if(!R.el)return;let D;typeof R.el=="string"&&e.isElement&&(D=e.el.querySelector(R.el)),!D&&typeof R.el=="string"&&(D=[...document.querySelectorAll(R.el)]),D||(D=R.el),!(!D||D.length===0)&&(e.params.uniqueNavElements&&typeof R.el=="string"&&Array.isArray(D)&&D.length>1&&(D=[...e.el.querySelectorAll(R.el)],D.length>1&&(D=D.find(B=>tb(B,".swiper")[0]===e.el))),Array.isArray(D)&&D.length===1&&(D=D[0]),Object.assign(e.pagination,{el:D}),D=$t(D),D.forEach(B=>{R.type==="bullets"&&R.clickable&&B.classList.add(...(R.clickableClass||"").split(" ")),B.classList.add(R.modifierClass+R.type),B.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass),R.type==="bullets"&&R.dynamicBullets&&(B.classList.add(`${R.modifierClass}${R.type}-dynamic`),u=0,R.dynamicMainBullets<1&&(R.dynamicMainBullets=1)),R.type==="progressbar"&&R.progressbarOpposite&&B.classList.add(R.progressbarOppositeClass),R.clickable&&B.addEventListener("click",g),e.enabled||B.classList.add(R.lockClass)}))}function P(){const R=e.params.pagination;if(c())return;let D=e.pagination.el;D&&(D=$t(D),D.forEach(B=>{B.classList.remove(R.hiddenClass),B.classList.remove(R.modifierClass+R.type),B.classList.remove(e.isHorizontal()?R.horizontalClass:R.verticalClass),R.clickable&&(B.classList.remove(...(R.clickableClass||"").split(" ")),B.removeEventListener("click",g))})),e.pagination.bullets&&e.pagination.bullets.forEach(B=>B.classList.remove(...R.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const R=e.params.pagination;let{el:D}=e.pagination;D=$t(D),D.forEach(B=>{B.classList.remove(R.horizontalClass,R.verticalClass),B.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?O():(x(),S(),w())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&w()}),r("snapIndexChange",()=>{w()}),r("snapGridLengthChange",()=>{S(),w()}),r("destroy",()=>{P()}),r("enable disable",()=>{let{el:R}=e.pagination;R&&(R=$t(R),R.forEach(D=>D.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{w()}),r("click",(R,D)=>{const B=D.target,z=$t(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&z&&z.length>0&&!B.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&B===e.navigation.nextEl||e.navigation.prevEl&&B===e.navigation.prevEl))return;const W=z[0].classList.contains(e.params.pagination.hiddenClass);i(W===!0?"paginationShow":"paginationHide"),z.forEach(L=>L.classList.toggle(e.params.pagination.hiddenClass))}});const M=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:R}=e.pagination;R&&(R=$t(R),R.forEach(D=>D.classList.remove(e.params.pagination.paginationDisabledClass))),x(),S(),w()},O=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:R}=e.pagination;R&&(R=$t(R),R.forEach(D=>D.classList.add(e.params.pagination.paginationDisabledClass))),P()};Object.assign(e.pagination,{enable:M,disable:O,render:S,update:w,init:x,destroy:P})}function DV(n){let{swiper:e,extendParams:t,on:r,emit:i,params:o}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,u,c=o&&o.autoplay?o.autoplay.delay:3e3,f=o&&o.autoplay?o.autoplay.delay:3e3,m,g=new Date().getTime(),w,S,x,P,M,O,R;function D(H){!e||e.destroyed||!e.wrapperEl||H.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",D),!(R||H.detail&&H.detail.bySwiperTouchMove)&&b())}const B=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?w=!0:w&&(f=m,w=!1);const H=e.autoplay.paused?m:g+f-new Date().getTime();e.autoplay.timeLeft=H,i("autoplayTimeLeft",H,H/c),u=requestAnimationFrame(()=>{B()})},z=()=>{let H;return e.virtual&&e.params.virtual.enabled?H=e.slides.find(j=>j.classList.contains("swiper-slide-active")):H=e.slides[e.activeIndex],H?parseInt(H.getAttribute("data-swiper-autoplay"),10):void 0},W=H=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(u),B();let ie=typeof H>"u"?e.params.autoplay.delay:H;c=e.params.autoplay.delay,f=e.params.autoplay.delay;const j=z();!Number.isNaN(j)&&j>0&&typeof H>"u"&&(ie=j,c=j,f=j),m=ie;const Z=e.params.speed,ce=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(Z,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,Z,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(Z,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,Z,!0,!0),i("autoplay")),e.params.cssMode&&(g=new Date().getTime(),requestAnimationFrame(()=>{W()})))};return ie>0?(clearTimeout(l),l=setTimeout(()=>{ce()},ie)):requestAnimationFrame(()=>{ce()}),ie},L=()=>{g=new Date().getTime(),e.autoplay.running=!0,W(),i("autoplayStart")},C=()=>{e.autoplay.running=!1,clearTimeout(l),cancelAnimationFrame(u),i("autoplayStop")},A=(H,ie)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(l),H||(O=!0);const j=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",D):b()};if(e.autoplay.paused=!0,ie){M&&(m=e.params.autoplay.delay),M=!1,j();return}m=(m||e.params.autoplay.delay)-(new Date().getTime()-g),!(e.isEnd&&m<0&&!e.params.loop)&&(m<0&&(m=0),j())},b=()=>{e.isEnd&&m<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(g=new Date().getTime(),O?(O=!1,W(m)):W(),e.autoplay.paused=!1,i("autoplayResume"))},V=()=>{if(e.destroyed||!e.autoplay.running)return;const H=qr();H.visibilityState==="hidden"&&(O=!0,A(!0)),H.visibilityState==="visible"&&b()},U=H=>{H.pointerType==="mouse"&&(O=!0,R=!0,!(e.animating||e.autoplay.paused)&&A(!0))},k=H=>{H.pointerType==="mouse"&&(R=!1,e.autoplay.paused&&b())},ne=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",U),e.el.addEventListener("pointerleave",k))},de=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",U),e.el.removeEventListener("pointerleave",k))},Ee=()=>{qr().addEventListener("visibilitychange",V)},he=()=>{qr().removeEventListener("visibilitychange",V)};r("init",()=>{e.params.autoplay.enabled&&(ne(),Ee(),L())}),r("destroy",()=>{de(),he(),e.autoplay.running&&C()}),r("_freeModeStaticRelease",()=>{(x||O)&&b()}),r("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?C():A(!0,!0)}),r("beforeTransitionStart",(H,ie,j)=>{e.destroyed||!e.autoplay.running||(j||!e.params.autoplay.disableOnInteraction?A(!0,!0):C())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){C();return}S=!0,x=!1,O=!1,P=setTimeout(()=>{O=!0,x=!0,A(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!S)){if(clearTimeout(P),clearTimeout(l),e.params.autoplay.disableOnInteraction){x=!1,S=!1;return}x&&e.params.cssMode&&b(),x=!1,S=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(M=!0)}),Object.assign(e.autoplay,{start:L,stop:C,pause:A,resume:b})}const MV=["https://i.pinimg.com/736x/de/67/e7/de67e76f9daa97097eea8be559d7dff7.jpg","https://i.pinimg.com/736x/88/6c/2d/886c2dd9632df00ec675fdcf6d2fac92.jpg","https://i.pinimg.com/736x/45/3e/23/453e23dc47f1d7e8d63eaa433256538d.jpg"],LV=({onArtistsDirectoryClick:n})=>T.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-100 overflow-hidden",children:[T.jsx("nav",{className:"bg-white shadow-lg w-full fixed top-0 z-10",children:T.jsx("div",{className:"max-w-6xl mx-auto px-4",children:T.jsx("div",{className:"flex justify-between items-center py-4",children:T.jsx("div",{className:"text-2xl font-bold text-gray-800",children:"Art Gallery"})})})}),T.jsxs("div",{className:"flex flex-grow w-full h-screen pt-0",children:[T.jsxs("div",{className:"w-1/2 flex flex-col justify-center px-16 mt-[-20px]",children:[T.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-gray-300 text-center text-gray-700 text-sm mb-4 w-32",children:"New Art Work"}),T.jsxs("h1",{className:"text-5xl font-bold mb-4 text-black cursor-pointer hover:text-gray-700 transition-colors",onClick:n,children:["New Artworks",T.jsx("br",{}),"From Our Artist"]}),T.jsx("p",{className:"text-gray-500 max-w-md",children:"Explore our diverse exhibitions, from stunning paintings to captivating illustrations, thought-provoking installations to beautiful sculptures."})]}),T.jsx("div",{className:"w-1/2 flex justify-center items-center mt-20",children:T.jsx(pb,{modules:[kV,NV,DV],navigation:!0,pagination:{clickable:!0},autoplay:{delay:3e3},className:"w-3/4 h-[65vh] items-center",children:MV.map((e,t)=>T.jsx(mb,{className:"flex justify-center items-center",children:T.jsx("div",{className:"w-80 h-[90%] bg-gray-800 rounded-xl overflow-hidden shadow-s flex justify-center items-center mx-auto",children:T.jsx("img",{src:e,alt:`Artwork ${t+1}`,className:"w-full h-full object-cover"})})},t))})})]})]}),OV=()=>{const[n,e]=K.useState([{id:1,name:"Sarah Johnson",feedback:"The gallery exhibits were breathtaking. I especially loved the modern art section!",stars:5},{id:2,name:"Michael Chen",feedback:"Great collection and very informative guides. Will definitely visit again.",stars:4},{id:3,name:"Emma Rodriguez",feedback:"The special exhibition was well worth the visit. Beautifully curated.",stars:5}]),[t,r]=K.useState({name:"",feedback:"",stars:5}),[i,o]=K.useState(!1),[l,u]=K.useState(""),c=g=>Array(5).fill("").map((w,S)=>T.jsx("span",{style:{color:"#ffd700"},children:S<g?"":""},S)),f=g=>{const{name:w,value:S}=g.target;r(x=>({...x,[w]:S}))},m=g=>{if(g.preventDefault(),!t.name.trim()||!t.feedback.trim()){u("Please fill in all fields");return}const w={id:n.length+1,...t,stars:Number(t.stars)},S=[...n,w].sort((x,P)=>P.stars-x.stars).slice(0,3);e(S),r({name:"",feedback:"",stars:5}),o(!1),u("Your review has been submitted. Thank you!"),setTimeout(()=>u(""),3e3)};return T.jsxs("div",{style:{background:"black",color:"white",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",padding:"20px 0"},children:[T.jsx("h1",{style:{marginBottom:"40px"},children:"Customer Reviews"}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"2rem",maxWidth:"1200px",width:"90%"},children:n.map(g=>T.jsxs("div",{style:{background:"linear-gradient(135deg, white, grey)",color:"black",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 10px 20px rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[T.jsx("p",{children:g.feedback}),T.jsx("div",{style:{margin:"1rem 0"},children:c(g.stars)}),T.jsxs("h4",{children:["- ",g.name]})]},g.id))}),T.jsx("button",{onClick:()=>o(!i),style:{margin:"40px 0",background:"white",color:"black",border:"none",padding:"0.8rem 1.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:i?"Cancel":"Leave a Review"}),l&&T.jsx("div",{style:{background:l.includes("Thank you")?"#4caf50":"#ff6b6b",color:"white",padding:"1rem",borderRadius:"4px",margin:"20px 0",textAlign:"center"},children:l}),i&&T.jsxs("form",{onSubmit:m,style:{background:"#333",padding:"2rem",borderRadius:"10px",width:"90%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center"},children:[T.jsx("input",{type:"text",name:"name",placeholder:"Your Name",value:t.name,onChange:f,required:!0,style:{width:"100%",padding:"0.8rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #555",background:"#222",color:"white"}}),T.jsx("textarea",{name:"feedback",placeholder:"Your Feedback",value:t.feedback,onChange:f,required:!0,rows:"4",style:{width:"100%",padding:"0.8rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #555",background:"#222",color:"white"}}),T.jsxs("select",{name:"stars",value:t.stars,onChange:f,style:{width:"100%",padding:"0.8rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #555",background:"#222",color:"white"},children:[T.jsx("option",{value:"5",children:"5 Stars"}),T.jsx("option",{value:"4",children:"4 Stars"}),T.jsx("option",{value:"3",children:"3 Stars"}),T.jsx("option",{value:"2",children:"2 Stars"}),T.jsx("option",{value:"1",children:"1 Star"})]}),T.jsx("button",{type:"submit",style:{background:"white",color:"black",border:"none",padding:"0.8rem 1.5rem",borderRadius:"4px",cursor:"pointer",margin:"1rem 0",fontSize:"1rem"},children:"Submit Review"})]}),T.jsxs("footer",{style:{background:"#111",color:"#ccc",textAlign:"center",width:"100%",borderTop:"1px solid #444",fontSize:"1rem",padding:"10px 0",marginTop:"auto"},children:[T.jsx("p",{style:{margin:"0.5rem 0"},children:" 2025 Art Gallery. All rights reserved."}),T.jsxs("p",{style:{margin:"0.5rem 0"},children:[T.jsx("a",{href:"#privacy",style:{color:"#ffd700",textDecoration:"none",fontWeight:"bold",marginLeft:"10px"},children:"Privacy Policy"})," |",T.jsx("a",{href:"#terms",style:{color:"#ffd700",textDecoration:"none",fontWeight:"bold",marginLeft:"10px"},children:"Terms of Use"})]})]})]})},VV=""+new URL("image4-DWQAepuP.avif",import.meta.url).href,jV=({onGalleryClick:n})=>T.jsx("div",{children:T.jsxs("header",{style:{backgroundImage:`url(${VV})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",textAlign:"center",marginTop:0},children:[T.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 1, 0.5)",zIndex:-1}}),T.jsxs("div",{style:{position:"relative",zIndex:1,textAlign:"center",maxWidth:"700px"},children:[T.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"450px"},children:"Dive into creativity with our gallery collection"}),T.jsx("p",{style:{fontSize:"1.2rem",lineHeight:"1.5",marginTop:"20px"},children:"Immerse yourself in the captivating stories behind each artwork, as our artists draw inspiration from cultures, nature, and everyday life."}),T.jsxs("div",{style:{marginTop:"15px"},children:[" ",T.jsx("button",{style:{padding:"10px 25px",fontSize:"1.0rem",backgroundColor:"white",color:"black",border:"black",borderRadius:"21px",cursor:"pointer",fontWeight:"bold",transition:"0.3s"},onClick:n,onMouseOver:e=>e.target.style.backgroundColor="#ddd",onMouseOut:e=>e.target.style.backgroundColor="#fff",children:"Visit Gallery"})]})]}),T.jsxs("div",{style:{position:"absolute",bottom:"20px",right:"20px",display:"flex",gap:"10px"},children:[T.jsx("button",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.5)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:""}),T.jsx("button",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"gray",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:""})]})]})}),FV=()=>{};var QE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(n,e){if(!n)throw Tl(e)},Tl=function(n){return new Error("Firebase Database ("+yb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},UV=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],u=n[t++],c=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Cv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,u=l?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let w=(u&15)<<2|f>>6,S=f&63;c||(S=64,l||(w=64)),r.push(t[m],t[g],t[w],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||g==null)throw new BV;const w=o<<2|u>>4;if(r.push(w),f!==64){const S=u<<4&240|f>>2;if(r.push(S),g!==64){const x=f<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _b=function(n){const e=vb(n);return Cv.encodeByteArray(e,!0)},Yh=function(n){return _b(n).replace(/\./g,"")},Xh=function(n){try{return Cv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(n){return wb(void 0,n)}function wb(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!$V(t)||(n[t]=wb(n[t],e[t]));return n}function $V(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=()=>WV().__FIREBASE_DEFAULTS__,GV=()=>{if(typeof process>"u"||typeof QE>"u")return;const n=QE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Xh(n[1]);return e&&JSON.parse(e)},Of=()=>{try{return FV()||HV()||GV()||qV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Tb=n=>{var e,t;return(t=(e=Of())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bv=n=>{const e=Tb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Eb=()=>{var n;return(n=Of())===null||n===void 0?void 0:n.config},Sb=n=>{var e;return(e=Of())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yh(JSON.stringify(t)),Yh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function KV(){var n;const e=(n=Of())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YV(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XV(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function JV(){return yb.NODE_ADMIN===!0}function ZV(){return!KV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ej(){try{return typeof indexedDB=="object"}catch{return!1}}function tj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function E$(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="FirebaseError";class ti extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=nj,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?rj(o,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new ti(i,u,r)}}function rj(n,e){return n.replace(ij,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ij=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(n){return JSON.parse(n)}function Zt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=function(n){let e={},t={},r={},i="";try{const o=n.split(".");e=uc(Xh(o[0])||""),t=uc(Xh(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},sj=function(n){const e=Ib(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},oj=function(n){const e=Ib(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ol(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ey(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jh(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Ps(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(YE(o)&&YE(l)){if(!Ps(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function YE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)r[g]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let g=0;g<16;g++)r[g]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let g=16;g<80;g++){const w=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(w<<1|w>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],c=this.chain_[4],f,m;for(let g=0;g<80;g++){g<40?g<20?(f=u^o&(l^u),m=1518500249):(f=o^l^u,m=1859775393):g<60?(f=o&l|u&(o|l),m=2400959708):(f=o^l^u,m=3395469782);const w=(i<<5|i>>>27)+f+c+m+r[g]&4294967295;c=u,u=l,l=(o<<30|o>>>2)&4294967295,o=i,i=w}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const o=this.buf_;let l=this.inbuf_;for(;i<t;){if(l===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[l]=e.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}else for(;i<t;)if(o[l]=e[i],++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}function lj(n,e){const t=new uj(n,e);return t.subscribe.bind(t)}class uj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");cj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=lg),i.error===void 0&&(i.error=lg),i.complete===void 0&&(i.complete=lg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lg(){}function dj(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,ue(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;i=65536+(o<<10)+l}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Vf=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=1e3,pj=2,mj=4*60*60*1e3,gj=.5;function S$(n,e=fj,t=pj){const r=e*Math.pow(t,n),i=Math.round(gj*r*(Math.random()-.5)*2);return Math.min(mj,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n){return n&&n._delegate?n._delegate:n}class ki{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Av;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_j(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vj(n){return n===To?void 0:n}function _j(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const Tj={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Ej=Ve.INFO,Sj={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},xj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Sj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jf{constructor(e){this.name=e,this._logLevel=Ej,this._logHandler=xj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Ij=(n,e)=>e.some(t=>n instanceof t);let XE,JE;function Cj(){return XE||(XE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bj(){return JE||(JE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cb=new WeakMap,ty=new WeakMap,bb=new WeakMap,ug=new WeakMap,kv=new WeakMap;function Aj(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ws(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Cb.set(t,n)}).catch(()=>{}),kv.set(e,n),e}function Pj(n){if(ty.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});ty.set(n,e)}let ny={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ty.get(n);if(e==="objectStoreNames")return n.objectStoreNames||bb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Rj(n){ny=n(ny)}function kj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cg(this),e,...t);return bb.set(r,e.sort?e.sort():[e]),ws(r)}:bj().includes(n)?function(...e){return n.apply(cg(this),e),ws(Cb.get(this))}:function(...e){return ws(n.apply(cg(this),e))}}function Nj(n){return typeof n=="function"?kj(n):(n instanceof IDBTransaction&&Pj(n),Ij(n,Cj())?new Proxy(n,ny):n)}function ws(n){if(n instanceof IDBRequest)return Aj(n);if(ug.has(n))return ug.get(n);const e=Nj(n);return e!==n&&(ug.set(n,e),kv.set(e,n)),e}const cg=n=>kv.get(n);function Dj(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),u=ws(l);return r&&l.addEventListener("upgradeneeded",c=>{r(ws(l.result),c.oldVersion,c.newVersion,ws(l.transaction),c)}),t&&l.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const Mj=["get","getKey","getAll","getAllKeys","count"],Lj=["put","add","delete","clear"],dg=new Map;function ZE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dg.get(e))return dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Lj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Mj.includes(t)))return;const o=async function(l,...u){const c=this.transaction(l,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&c.done]))[0]};return dg.set(e,o),o}Rj(n=>({...n,get:(e,t,r)=>ZE(e,t)||n.get(e,t,r),has:(e,t)=>!!ZE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vj(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Vj(n){const e=n.getComponent();return e?.type==="VERSION"}const ry="@firebase/app",eS="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new jf("@firebase/app"),jj="@firebase/app-compat",Fj="@firebase/analytics-compat",Uj="@firebase/analytics",Bj="@firebase/app-check-compat",zj="@firebase/app-check",$j="@firebase/auth",Wj="@firebase/auth-compat",Hj="@firebase/database",Gj="@firebase/data-connect",qj="@firebase/database-compat",Kj="@firebase/functions",Qj="@firebase/functions-compat",Yj="@firebase/installations",Xj="@firebase/installations-compat",Jj="@firebase/messaging",Zj="@firebase/messaging-compat",eF="@firebase/performance",tF="@firebase/performance-compat",nF="@firebase/remote-config",rF="@firebase/remote-config-compat",iF="@firebase/storage",sF="@firebase/storage-compat",oF="@firebase/firestore",aF="@firebase/vertexai",lF="@firebase/firestore-compat",uF="firebase",cF="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="[DEFAULT]",dF={[ry]:"fire-core",[jj]:"fire-core-compat",[Uj]:"fire-analytics",[Fj]:"fire-analytics-compat",[zj]:"fire-app-check",[Bj]:"fire-app-check-compat",[$j]:"fire-auth",[Wj]:"fire-auth-compat",[Hj]:"fire-rtdb",[Gj]:"fire-data-connect",[qj]:"fire-rtdb-compat",[Kj]:"fire-fn",[Qj]:"fire-fn-compat",[Yj]:"fire-iid",[Xj]:"fire-iid-compat",[Jj]:"fire-fcm",[Zj]:"fire-fcm-compat",[eF]:"fire-perf",[tF]:"fire-perf-compat",[nF]:"fire-rc",[rF]:"fire-rc-compat",[iF]:"fire-gcs",[sF]:"fire-gcs-compat",[oF]:"fire-fst",[lF]:"fire-fst-compat",[aF]:"fire-vertex","fire-js":"fire-js",[uF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Map,hF=new Map,sy=new Map;function tS(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){const e=n.name;if(sy.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,n);for(const t of Zh.values())tS(t,n);for(const t of hF.values())tS(t,n);return!0}function Ic(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new xc("app","Firebase",fF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=cF;function Ff(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:iy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ts.create("bad-app-name",{appName:String(i)});if(t||(t=Eb()),!t)throw Ts.create("no-options");const o=Zh.get(i);if(o){if(Ps(t,o.options)&&Ps(r,o.config))return o;throw Ts.create("duplicate-app",{appName:i})}const l=new wj(i);for(const c of sy.values())l.addComponent(c);const u=new pF(t,r,l);return Zh.set(i,u),u}function Uf(n=iy){const e=Zh.get(n);if(!e&&n===iy&&Eb())return Ff();if(!e)throw Ts.create("no-app",{appName:n});return e}function sr(n,e,t){var r;let i=(r=dF[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(u.join(" "));return}Rs(new ki(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF="firebase-heartbeat-database",gF=1,cc="firebase-heartbeat-store";let hg=null;function Ab(){return hg||(hg=Dj(mF,gF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),hg}async function yF(n){try{const t=(await Ab()).transaction(cc),r=await t.objectStore(cc).get(Pb(n));return await t.done,r}catch(e){if(e instanceof ti)Ni.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(t.message)}}}async function nS(n,e){try{const r=(await Ab()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,Pb(n)),await r.done}catch(t){if(t instanceof ti)Ni.warn(t.message);else{const r=Ts.create("idb-set",{originalErrorMessage:t?.message});Ni.warn(r.message)}}}function Pb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=1024,_F=30;class wF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>_F){const l=SF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ni.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rS(),{heartbeatsToSend:r,unsentEntries:i}=TF(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ni.warn(t),""}}}function rS(){return new Date().toISOString().substring(0,10)}function TF(n,e=vF){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),iS(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class EF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ej()?tj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return nS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return nS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function iS(n){return Yh(JSON.stringify({version:2,heartbeats:n})).length}function SF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(n){Rs(new ki("platform-logger",e=>new Oj(e),"PRIVATE")),Rs(new ki("heartbeat",e=>new wF(e),"PRIVATE")),sr(ry,eS,n),sr(ry,eS,"esm2017"),sr("fire-js","")}xF("");var sS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Rb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,C){function A(){}A.prototype=C.prototype,L.D=C.prototype,L.prototype=new A,L.prototype.constructor=L,L.C=function(b,V,U){for(var k=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)k[ne-2]=arguments[ne];return C.prototype[V].apply(b,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,C,A){A||(A=0);var b=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)b[V]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(V=0;16>V;++V)b[V]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=L.g[0],A=L.g[1],V=L.g[2];var U=L.g[3],k=C+(U^A&(V^U))+b[0]+3614090360&4294967295;C=A+(k<<7&4294967295|k>>>25),k=U+(V^C&(A^V))+b[1]+3905402710&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(A^U&(C^A))+b[2]+606105819&4294967295,V=U+(k<<17&4294967295|k>>>15),k=A+(C^V&(U^C))+b[3]+3250441966&4294967295,A=V+(k<<22&4294967295|k>>>10),k=C+(U^A&(V^U))+b[4]+4118548399&4294967295,C=A+(k<<7&4294967295|k>>>25),k=U+(V^C&(A^V))+b[5]+1200080426&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(A^U&(C^A))+b[6]+2821735955&4294967295,V=U+(k<<17&4294967295|k>>>15),k=A+(C^V&(U^C))+b[7]+4249261313&4294967295,A=V+(k<<22&4294967295|k>>>10),k=C+(U^A&(V^U))+b[8]+1770035416&4294967295,C=A+(k<<7&4294967295|k>>>25),k=U+(V^C&(A^V))+b[9]+2336552879&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(A^U&(C^A))+b[10]+4294925233&4294967295,V=U+(k<<17&4294967295|k>>>15),k=A+(C^V&(U^C))+b[11]+2304563134&4294967295,A=V+(k<<22&4294967295|k>>>10),k=C+(U^A&(V^U))+b[12]+1804603682&4294967295,C=A+(k<<7&4294967295|k>>>25),k=U+(V^C&(A^V))+b[13]+4254626195&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(A^U&(C^A))+b[14]+2792965006&4294967295,V=U+(k<<17&4294967295|k>>>15),k=A+(C^V&(U^C))+b[15]+1236535329&4294967295,A=V+(k<<22&4294967295|k>>>10),k=C+(V^U&(A^V))+b[1]+4129170786&4294967295,C=A+(k<<5&4294967295|k>>>27),k=U+(A^V&(C^A))+b[6]+3225465664&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^A&(U^C))+b[11]+643717713&4294967295,V=U+(k<<14&4294967295|k>>>18),k=A+(U^C&(V^U))+b[0]+3921069994&4294967295,A=V+(k<<20&4294967295|k>>>12),k=C+(V^U&(A^V))+b[5]+3593408605&4294967295,C=A+(k<<5&4294967295|k>>>27),k=U+(A^V&(C^A))+b[10]+38016083&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^A&(U^C))+b[15]+3634488961&4294967295,V=U+(k<<14&4294967295|k>>>18),k=A+(U^C&(V^U))+b[4]+3889429448&4294967295,A=V+(k<<20&4294967295|k>>>12),k=C+(V^U&(A^V))+b[9]+568446438&4294967295,C=A+(k<<5&4294967295|k>>>27),k=U+(A^V&(C^A))+b[14]+3275163606&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^A&(U^C))+b[3]+4107603335&4294967295,V=U+(k<<14&4294967295|k>>>18),k=A+(U^C&(V^U))+b[8]+1163531501&4294967295,A=V+(k<<20&4294967295|k>>>12),k=C+(V^U&(A^V))+b[13]+2850285829&4294967295,C=A+(k<<5&4294967295|k>>>27),k=U+(A^V&(C^A))+b[2]+4243563512&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^A&(U^C))+b[7]+1735328473&4294967295,V=U+(k<<14&4294967295|k>>>18),k=A+(U^C&(V^U))+b[12]+2368359562&4294967295,A=V+(k<<20&4294967295|k>>>12),k=C+(A^V^U)+b[5]+4294588738&4294967295,C=A+(k<<4&4294967295|k>>>28),k=U+(C^A^V)+b[8]+2272392833&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^A)+b[11]+1839030562&4294967295,V=U+(k<<16&4294967295|k>>>16),k=A+(V^U^C)+b[14]+4259657740&4294967295,A=V+(k<<23&4294967295|k>>>9),k=C+(A^V^U)+b[1]+2763975236&4294967295,C=A+(k<<4&4294967295|k>>>28),k=U+(C^A^V)+b[4]+1272893353&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^A)+b[7]+4139469664&4294967295,V=U+(k<<16&4294967295|k>>>16),k=A+(V^U^C)+b[10]+3200236656&4294967295,A=V+(k<<23&4294967295|k>>>9),k=C+(A^V^U)+b[13]+681279174&4294967295,C=A+(k<<4&4294967295|k>>>28),k=U+(C^A^V)+b[0]+3936430074&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^A)+b[3]+3572445317&4294967295,V=U+(k<<16&4294967295|k>>>16),k=A+(V^U^C)+b[6]+76029189&4294967295,A=V+(k<<23&4294967295|k>>>9),k=C+(A^V^U)+b[9]+3654602809&4294967295,C=A+(k<<4&4294967295|k>>>28),k=U+(C^A^V)+b[12]+3873151461&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^A)+b[15]+530742520&4294967295,V=U+(k<<16&4294967295|k>>>16),k=A+(V^U^C)+b[2]+3299628645&4294967295,A=V+(k<<23&4294967295|k>>>9),k=C+(V^(A|~U))+b[0]+4096336452&4294967295,C=A+(k<<6&4294967295|k>>>26),k=U+(A^(C|~V))+b[7]+1126891415&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~A))+b[14]+2878612391&4294967295,V=U+(k<<15&4294967295|k>>>17),k=A+(U^(V|~C))+b[5]+4237533241&4294967295,A=V+(k<<21&4294967295|k>>>11),k=C+(V^(A|~U))+b[12]+1700485571&4294967295,C=A+(k<<6&4294967295|k>>>26),k=U+(A^(C|~V))+b[3]+2399980690&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~A))+b[10]+4293915773&4294967295,V=U+(k<<15&4294967295|k>>>17),k=A+(U^(V|~C))+b[1]+2240044497&4294967295,A=V+(k<<21&4294967295|k>>>11),k=C+(V^(A|~U))+b[8]+1873313359&4294967295,C=A+(k<<6&4294967295|k>>>26),k=U+(A^(C|~V))+b[15]+4264355552&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~A))+b[6]+2734768916&4294967295,V=U+(k<<15&4294967295|k>>>17),k=A+(U^(V|~C))+b[13]+1309151649&4294967295,A=V+(k<<21&4294967295|k>>>11),k=C+(V^(A|~U))+b[4]+4149444226&4294967295,C=A+(k<<6&4294967295|k>>>26),k=U+(A^(C|~V))+b[11]+3174756917&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~A))+b[2]+718787259&4294967295,V=U+(k<<15&4294967295|k>>>17),k=A+(U^(V|~C))+b[9]+3951481745&4294967295,L.g[0]=L.g[0]+C&4294967295,L.g[1]=L.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,L.g[2]=L.g[2]+V&4294967295,L.g[3]=L.g[3]+U&4294967295}r.prototype.u=function(L,C){C===void 0&&(C=L.length);for(var A=C-this.blockSize,b=this.B,V=this.h,U=0;U<C;){if(V==0)for(;U<=A;)i(this,L,U),U+=this.blockSize;if(typeof L=="string"){for(;U<C;)if(b[V++]=L.charCodeAt(U++),V==this.blockSize){i(this,b),V=0;break}}else for(;U<C;)if(b[V++]=L[U++],V==this.blockSize){i(this,b),V=0;break}}this.h=V,this.o+=C},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var C=1;C<L.length-8;++C)L[C]=0;var A=8*this.o;for(C=L.length-8;C<L.length;++C)L[C]=A&255,A/=256;for(this.u(L),L=Array(16),C=A=0;4>C;++C)for(var b=0;32>b;b+=8)L[A++]=this.g[C]>>>b&255;return L};function o(L,C){var A=u;return Object.prototype.hasOwnProperty.call(A,L)?A[L]:A[L]=C(L)}function l(L,C){this.h=C;for(var A=[],b=!0,V=L.length-1;0<=V;V--){var U=L[V]|0;b&&U==C||(A[V]=U,b=!1)}this.g=A}var u={};function c(L){return-128<=L&&128>L?o(L,function(C){return new l([C|0],0>C?-1:0)}):new l([L|0],0>L?-1:0)}function f(L){if(isNaN(L)||!isFinite(L))return g;if(0>L)return M(f(-L));for(var C=[],A=1,b=0;L>=A;b++)C[b]=L/A|0,A*=4294967296;return new l(C,0)}function m(L,C){if(L.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(L.charAt(0)=="-")return M(m(L.substring(1),C));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(C,8)),b=g,V=0;V<L.length;V+=8){var U=Math.min(8,L.length-V),k=parseInt(L.substring(V,V+U),C);8>U?(U=f(Math.pow(C,U)),b=b.j(U).add(f(k))):(b=b.j(A),b=b.add(f(k)))}return b}var g=c(0),w=c(1),S=c(16777216);n=l.prototype,n.m=function(){if(P(this))return-M(this).m();for(var L=0,C=1,A=0;A<this.g.length;A++){var b=this.i(A);L+=(0<=b?b:4294967296+b)*C,C*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(x(this))return"0";if(P(this))return"-"+M(this).toString(L);for(var C=f(Math.pow(L,6)),A=this,b="";;){var V=B(A,C).g;A=O(A,V.j(C));var U=((0<A.g.length?A.g[0]:A.h)>>>0).toString(L);if(A=V,x(A))return U+b;for(;6>U.length;)U="0"+U;b=U+b}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function x(L){if(L.h!=0)return!1;for(var C=0;C<L.g.length;C++)if(L.g[C]!=0)return!1;return!0}function P(L){return L.h==-1}n.l=function(L){return L=O(this,L),P(L)?-1:x(L)?0:1};function M(L){for(var C=L.g.length,A=[],b=0;b<C;b++)A[b]=~L.g[b];return new l(A,~L.h).add(w)}n.abs=function(){return P(this)?M(this):this},n.add=function(L){for(var C=Math.max(this.g.length,L.g.length),A=[],b=0,V=0;V<=C;V++){var U=b+(this.i(V)&65535)+(L.i(V)&65535),k=(U>>>16)+(this.i(V)>>>16)+(L.i(V)>>>16);b=k>>>16,U&=65535,k&=65535,A[V]=k<<16|U}return new l(A,A[A.length-1]&-2147483648?-1:0)};function O(L,C){return L.add(M(C))}n.j=function(L){if(x(this)||x(L))return g;if(P(this))return P(L)?M(this).j(M(L)):M(M(this).j(L));if(P(L))return M(this.j(M(L)));if(0>this.l(S)&&0>L.l(S))return f(this.m()*L.m());for(var C=this.g.length+L.g.length,A=[],b=0;b<2*C;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var V=0;V<L.g.length;V++){var U=this.i(b)>>>16,k=this.i(b)&65535,ne=L.i(V)>>>16,de=L.i(V)&65535;A[2*b+2*V]+=k*de,R(A,2*b+2*V),A[2*b+2*V+1]+=U*de,R(A,2*b+2*V+1),A[2*b+2*V+1]+=k*ne,R(A,2*b+2*V+1),A[2*b+2*V+2]+=U*ne,R(A,2*b+2*V+2)}for(b=0;b<C;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=C;b<2*C;b++)A[b]=0;return new l(A,0)};function R(L,C){for(;(L[C]&65535)!=L[C];)L[C+1]+=L[C]>>>16,L[C]&=65535,C++}function D(L,C){this.g=L,this.h=C}function B(L,C){if(x(C))throw Error("division by zero");if(x(L))return new D(g,g);if(P(L))return C=B(M(L),C),new D(M(C.g),M(C.h));if(P(C))return C=B(L,M(C)),new D(M(C.g),C.h);if(30<L.g.length){if(P(L)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var A=w,b=C;0>=b.l(L);)A=z(A),b=z(b);var V=W(A,1),U=W(b,1);for(b=W(b,2),A=W(A,2);!x(b);){var k=U.add(b);0>=k.l(L)&&(V=V.add(A),U=k),b=W(b,1),A=W(A,1)}return C=O(L,V.j(C)),new D(V,C)}for(V=g;0<=L.l(C);){for(A=Math.max(1,Math.floor(L.m()/C.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),U=f(A),k=U.j(C);P(k)||0<k.l(L);)A-=b,U=f(A),k=U.j(C);x(U)&&(U=w),V=V.add(U),L=O(L,k)}return new D(V,L)}n.A=function(L){return B(this,L).h},n.and=function(L){for(var C=Math.max(this.g.length,L.g.length),A=[],b=0;b<C;b++)A[b]=this.i(b)&L.i(b);return new l(A,this.h&L.h)},n.or=function(L){for(var C=Math.max(this.g.length,L.g.length),A=[],b=0;b<C;b++)A[b]=this.i(b)|L.i(b);return new l(A,this.h|L.h)},n.xor=function(L){for(var C=Math.max(this.g.length,L.g.length),A=[],b=0;b<C;b++)A[b]=this.i(b)^L.i(b);return new l(A,this.h^L.h)};function z(L){for(var C=L.g.length+1,A=[],b=0;b<C;b++)A[b]=L.i(b)<<1|L.i(b-1)>>>31;return new l(A,L.h)}function W(L,C){var A=C>>5;C%=32;for(var b=L.g.length-A,V=[],U=0;U<b;U++)V[U]=0<C?L.i(U+A)>>>C|L.i(U+A+1)<<32-C:L.i(U+A);return new l(V,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Rb=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,Es=l}).apply(typeof sS<"u"?sS:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kb,Ou,Nb,xh,oy,Db,Mb,Lb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(h,v){if(v)e:{var E=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var q=h[N];if(!(q in E))break e;E=E[q]}h=h[h.length-1],N=E[h],v=v(N),v!=N&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var E=0,N=!1,q={next:function(){if(!N&&E<h.length){var J=E++;return{value:v(J,h[J]),done:!1}}return N=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(h){return h||function(){return o(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function f(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function m(h,v,E){return h.call.apply(h.bind,arguments)}function g(h,v,E){if(!h)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,N),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function w(h,v,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,w.apply(null,arguments)}function S(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function x(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(N,q,J){for(var le=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)le[Ze-2]=arguments[Ze];return v.prototype[q].apply(N,le)}}function P(h){const v=h.length;if(0<v){const E=Array(v);for(let N=0;N<v;N++)E[N]=h[N];return E}return[]}function M(h,v){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(c(N)){const q=h.length||0,J=N.length||0;h.length=q+J;for(let le=0;le<J;le++)h[q+le]=N[le]}else h.push(N)}}class O{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function R(h){return/^[\s\xa0]*$/.test(h)}function D(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function B(h){return B[" "](h),h}B[" "]=function(){};var z=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function W(h,v,E){for(const N in h)v.call(E,h[N],N,h)}function L(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function C(h){const v={};for(const E in h)v[E]=h[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(h,v){let E,N;for(let q=1;q<arguments.length;q++){N=arguments[q];for(E in N)h[E]=N[E];for(let J=0;J<A.length;J++)E=A[J],Object.prototype.hasOwnProperty.call(N,E)&&(h[E]=N[E])}}function V(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function U(h){u.setTimeout(()=>{throw h},0)}function k(){var h=ie;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ne{constructor(){this.h=this.g=null}add(v,E){const N=de.get();N.set(v,E),this.h?this.h.next=N:this.g=N,this.h=N}}var de=new O(()=>new Ee,h=>h.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let he,H=!1,ie=new ne,j=()=>{const h=u.Promise.resolve(void 0);he=()=>{h.then(Z)}};var Z=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(E){U(E)}var v=de;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}H=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,v),u.removeEventListener("test",E,v)}catch{}return h}();function Be(h,v){if(Se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(z){e:{try{B(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Me[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Be.aa.h.call(this)}}x(Be,Se);var Me={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),je=0;function wt(h,v,E,N,q){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!N,this.ha=q,this.key=++je,this.da=this.fa=!1}function $o(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ri(h){this.src=h,this.g={},this.h=0}ri.prototype.add=function(h,v,E,N,q){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var le=Ui(h,v,N,q);return-1<le?(v=h[le],E||(v.fa=!1)):(v=new wt(v,this.src,J,!!N,q),v.fa=E,h.push(v)),v};function Wo(h,v){var E=v.type;if(E in h.g){var N=h.g[E],q=Array.prototype.indexOf.call(N,v,void 0),J;(J=0<=q)&&Array.prototype.splice.call(N,q,1),J&&($o(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ui(h,v,E,N){for(var q=0;q<h.length;++q){var J=h[q];if(!J.da&&J.listener==v&&J.capture==!!E&&J.ha==N)return q}return-1}var zs="closure_lm_"+(1e6*Math.random()|0),Ho={};function Dl(h,v,E,N,q){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Dl(h,v[J],E,N,q);return null}return E=Ol(E),h&&h[Le]?h.K(v,E,f(N)?!!N.capture:!1,q):Ml(h,v,E,!1,N,q)}function Ml(h,v,E,N,q,J){if(!v)throw Error("Invalid event type");var le=f(q)?!!q.capture:!!q,Ze=qo(h);if(Ze||(h[zs]=Ze=new ri(h)),E=Ze.add(v,E,N,le,J),E.proxy)return E;if(N=Bc(),E.proxy=N,N.src=h,N.listener=E,h.addEventListener)De||(q=le),q===void 0&&(q=!1),h.addEventListener(v.toString(),N,q);else if(h.attachEvent)h.attachEvent(si(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Bc(){function h(E){return v.call(h.src,h.listener,E)}const v=Ll;return h}function Go(h,v,E,N,q){if(Array.isArray(v))for(var J=0;J<v.length;J++)Go(h,v[J],E,N,q);else N=f(N)?!!N.capture:!!N,E=Ol(E),h&&h[Le]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],E=Ui(J,E,N,q),-1<E&&($o(J[E]),Array.prototype.splice.call(J,E,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=qo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ui(v,E,N,q)),(E=-1<h?v[h]:null)&&ii(E))}function ii(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Le])Wo(v.i,h);else{var E=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(E,N,h.capture):v.detachEvent?v.detachEvent(si(E),N):v.addListener&&v.removeListener&&v.removeListener(N),(E=qo(v))?(Wo(E,h),E.h==0&&(E.src=null,v[zs]=null)):$o(h)}}}function si(h){return h in Ho?Ho[h]:Ho[h]="on"+h}function Ll(h,v){if(h.da)h=!0;else{v=new Be(v,this);var E=h.listener,N=h.ha||h.src;h.fa&&ii(h),h=E.call(N,v)}return h}function qo(h){return h=h[zs],h instanceof ri?h:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ol(h){return typeof h=="function"?h:(h[Ko]||(h[Ko]=function(v){return h.handleEvent(v)}),h[Ko])}function Rt(){ce.call(this),this.i=new ri(this),this.M=this,this.F=null}x(Rt,ce),Rt.prototype[Le]=!0,Rt.prototype.removeEventListener=function(h,v,E,N){Go(this,h,v,E,N)};function kt(h,v){var E,N=h.F;if(N)for(E=[];N;N=N.F)E.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new Se(v,h);else if(v instanceof Se)v.target=v.target||h;else{var q=v;v=new Se(N,h),b(v,q)}if(q=!0,E)for(var J=E.length-1;0<=J;J--){var le=v.g=E[J];q=oi(le,N,!0,v)&&q}if(le=v.g=h,q=oi(le,N,!0,v)&&q,q=oi(le,N,!1,v)&&q,E)for(J=0;J<E.length;J++)le=v.g=E[J],q=oi(le,N,!1,v)&&q}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],N=0;N<E.length;N++)$o(E[N]);delete h.g[v],h.h--}}this.F=null},Rt.prototype.K=function(h,v,E,N){return this.i.add(String(h),v,!1,E,N)},Rt.prototype.L=function(h,v,E,N){return this.i.add(String(h),v,!0,E,N)};function oi(h,v,E,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,J=0;J<v.length;++J){var le=v[J];if(le&&!le.da&&le.capture==E){var Ze=le.listener,Nt=le.ha||le.src;le.fa&&Wo(h.i,le),q=Ze.call(Nt,N)!==!1&&q}}return q&&!N.defaultPrevented}function Vl(h,v,E){if(typeof h=="function")E&&(h=w(h,E));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(h,v||0)}function Bi(h){h.g=Vl(()=>{h.g=null,h.i&&(h.i=!1,Bi(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class $s extends ce{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Bi(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ws(h){ce.call(this),this.h=h,this.g={}}x(Ws,ce);var jl=[];function Fl(h){W(h.g,function(v,E){this.g.hasOwnProperty(E)&&ii(v)},h),h.g={}}Ws.prototype.N=function(){Ws.aa.N.call(this),Fl(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ul=u.JSON.stringify,Bl=u.JSON.parse,zl=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Hs(){}Hs.prototype.h=null;function Qo(h){return h.h||(h.h=h.i())}function Yo(){}var Wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){Se.call(this,"d")}x(Pr,Se);function Xo(){Se.call(this,"c")}x(Xo,Se);var Rr={},$l=null;function Gs(){return $l=$l||new Rt}Rr.La="serverreachability";function Wl(h){Se.call(this,Rr.La,h)}x(Wl,Se);function ai(h){const v=Gs();kt(v,new Wl(v))}Rr.STAT_EVENT="statevent";function Hl(h,v){Se.call(this,Rr.STAT_EVENT,h),this.stat=v}x(Hl,Se);function Tt(h){const v=Gs();kt(v,new Hl(v,h))}Rr.Ma="timingevent";function Jo(h,v){Se.call(this,Rr.Ma,h),this.size=v}x(Jo,Se);function ar(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function qs(){this.g=!0}qs.prototype.xa=function(){this.g=!1};function Ks(h,v,E,N,q,J){h.info(function(){if(h.g)if(J)for(var le="",Ze=J.split("&"),Nt=0;Nt<Ze.length;Nt++){var He=Ze[Nt].split("=");if(1<He.length){var Vt=He[0];He=He[1];var It=Vt.split("_");le=2<=It.length&&It[1]=="type"?le+(Vt+"="+He+"&"):le+(Vt+"=redacted&")}}else le=null;else le=J;return"XMLHTTP REQ ("+N+") [attempt "+q+"]: "+v+`
`+E+`
`+le})}function Zo(h,v,E,N,q,J,le){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+q+"]: "+v+`
`+E+`
`+J+" "+le})}function lr(h,v,E,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+cp(h,E)+(N?" "+N:"")})}function Gl(h,v){h.info(function(){return"TIMEOUT: "+v})}qs.prototype.info=function(){};function cp(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var N=E[h];if(!(2>N.length)){var q=N[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var le=1;le<q.length;le++)q[le]=""}}}}return Ul(E)}catch{return v}}var ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ur;function Qs(){}x(Qs,Hs),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},ur=new Qs;function cr(h,v,E,N){this.j=h,this.i=v,this.l=E,this.R=N||1,this.U=new Ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $c}function $c(){this.i=null,this.g="",this.h=!1}var ql={},ta={};function na(h,v,E){h.L=1,h.v=Gi(Ln(v)),h.m=E,h.P=!0,Kl(h,null)}function Kl(h,v){h.F=Date.now(),rt(h),h.A=Ln(h.v);var E=h.A,N=h.R;Array.isArray(N)||(N=[String(N)]),Ki(E.i,"t",N),h.C=0,E=h.j.J,h.h=new $c,h.g=ad(h.j,E?v:null,!h.m),0<h.O&&(h.M=new $s(w(h.Y,h,h.g),h.O)),v=h.U,E=h.g,N=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(jl[0]=q.toString()),q=jl);for(var J=0;J<q.length;J++){var le=Dl(E,q[J],N||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=h.H?C(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ai(),Ks(h.i,h.u,h.A,h.l,h.R,h.m)}cr.prototype.ca=function(h){h=h.target;const v=this.M;v&&Sn(h)==3?v.j():this.Y(h)},cr.prototype.Y=function(h){try{if(h==this.g)e:{const It=Sn(this.g);var v=this.g.Ba();const qn=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||eu(this.g)))){this.J||It!=4||v==7||(v==8||0>=qn?ai(3):ai(2)),Ys(this);var E=this.g.Z();this.X=E;t:if(Wc(this)){var N=eu(this.g);h="";var q=N.length,J=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),zi(this);var le="";break t}this.h.i=new u.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(N[v],{stream:!(J&&v==q-1)});N.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=E==200,Zo(this.i,this.u,this.A,this.l,this.R,It,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Nt=this.g;if((Ze=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Ze)){var He=Ze;break t}}He=null}if(E=He)lr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ql(this,E);else{this.o=!1,this.s=3,Tt(12),Hn(this),zi(this);break e}}if(this.P){E=!0;let Vn;for(;!this.J&&this.C<le.length;)if(Vn=dp(this,le),Vn==ta){It==4&&(this.s=4,Tt(14),E=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==ql){this.s=4,Tt(15),lr(this.i,this.l,le,"[Invalid Chunk]"),E=!1;break}else lr(this.i,this.l,Vn,null),Ql(this,Vn);if(Wc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||le.length!=0||this.h.h||(this.s=1,Tt(16),E=!1),this.o=this.o&&E,!E)lr(this.i,this.l,le,"[Invalid Chunked Response]"),Hn(this),zi(this);else if(0<le.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),nu(Vt),Vt.M=!0,Tt(11))}}else lr(this.i,this.l,le,null),Ql(this,le);It==4&&Hn(this),this.o&&!this.J&&(It==4?fa(this.j,this):(this.o=!1,rt(this)))}else la(this.g),E==400&&0<le.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Hn(this),zi(this)}}}catch{}finally{}};function Wc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function dp(h,v){var E=h.C,N=v.indexOf(`
`,E);return N==-1?ta:(E=Number(v.substring(E,N)),isNaN(E)?ql:(N+=1,N+E>v.length?ta:(v=v.slice(N,N+E),h.C=N+E,v)))}cr.prototype.cancel=function(){this.J=!0,Hn(this)};function rt(h){h.S=Date.now()+h.I,Hc(h,h.I)}function Hc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ar(w(h.ba,h),v)}function Ys(h){h.B&&(u.clearTimeout(h.B),h.B=null)}cr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Gl(this.i,this.A),this.L!=2&&(ai(),Tt(17)),Hn(this),this.s=2,zi(this)):Hc(this,this.S-h)};function zi(h){h.j.G==0||h.J||fa(h.j,h)}function Hn(h){Ys(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Fl(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Ql(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||gn(E.h,h))){if(!h.K&&gn(E.h,h)&&E.G==3){try{var N=E.Da.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var q=N;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)ha(E),mr(E);else break e;da(E),Tt(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=ar(w(E.Za,E),6e3));if(1>=qc(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else hi(E,11)}else if((h.K||E.g==h)&&ha(E),!R(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let He=q[v];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const Vt=He[3];Vt!=null&&(E.la=Vt,E.j.info("VER="+E.la));const It=He[4];It!=null&&(E.Aa=It,E.j.info("SVER="+E.Aa));const qn=He[5];qn!=null&&typeof qn=="number"&&0<qn&&(N=1.5*qn,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const Vn=h.g;if(Vn){const ro=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var J=N.h;J.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Yl(J,J.h),J.h=null))}if(N.D){const ma=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ma&&(N.ya=ma,tt(N.I,N.D,ma))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var le=h;if(N.qa=od(N,N.J?N.ia:null,N.W),le.K){Kc(N.h,le);var Ze=le,Nt=N.L;Nt&&(Ze.I=Nt),Ze.B&&(Ys(Ze),rt(Ze)),N.g=le}else no(N);0<E.i.length&&Mr(E)}else He[0]!="stop"&&He[0]!="close"||hi(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?hi(E,7):Qt(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}ai(4)}catch{}}var Gc=class{constructor(h,v){this.g=h,this.map=v}};function Xs(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qc(h){return h.h?1:h.g?h.g.size:0}function gn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Yl(h,v){h.g?h.g.add(v):h.h=v}function Kc(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Xs.prototype.cancel=function(){if(this.i=Qc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Qc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return P(h.i)}function ra(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var v=[],E=h.length,N=0;N<E;N++)v.push(h[N]);return v}v=[],E=0;for(N in h)v[E++]=h[N];return v}function ia(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const N in h)v[E++]=N;return v}}}function $i(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=ia(h),N=ra(h),q=N.length,J=0;J<q;J++)v.call(void 0,N[J],E&&E[J],h)}var Js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hp(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var N=h[E].indexOf("="),q=null;if(0<=N){var J=h[E].substring(0,N);q=h[E].substring(N+1)}else J=h[E];v(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function li(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof li){this.h=h.h,Zs(this,h.j),this.o=h.o,this.g=h.g,Wi(this,h.s),this.l=h.l;var v=h.i,E=new kr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Hi(this,E),this.m=h.m}else h&&(v=String(h).match(Js))?(this.h=!1,Zs(this,v[1]||"",!0),this.o=ze(v[2]||""),this.g=ze(v[3]||"",!0),Wi(this,v[4]),this.l=ze(v[5]||"",!0),Hi(this,v[6]||"",!0),this.m=ze(v[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}li.prototype.toString=function(){var h=[],v=this.j;v&&h.push(qi(v,sa,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(qi(v,sa,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(qi(E,E.charAt(0)=="/"?Jc:Xc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",qi(E,Xl)),h.join("")};function Ln(h){return new li(h)}function Zs(h,v,E){h.j=E?ze(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Wi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Hi(h,v,E){v instanceof kr?(h.i=v,Nr(h.i,h.h)):(E||(v=qi(v,Zc)),h.i=new kr(v,h.h))}function tt(h,v,E){h.i.set(v,E)}function Gi(h){return tt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ze(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qi(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Yc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var sa=/[#\/\?@]/g,Xc=/[#\?:]/g,Jc=/[#\?]/g,Zc=/[#\?@]/g,Xl=/#/g;function kr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&hp(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=kr.prototype,n.add=function(h,v){Kt(this),this.i=null,h=Gn(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function dr(h,v){Kt(h),v=Gn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function hr(h,v){return Kt(h),v=Gn(h,v),h.g.has(v)}n.forEach=function(h,v){Kt(this),this.g.forEach(function(E,N){E.forEach(function(q){h.call(v,q,N,this)},this)},this)},n.na=function(){Kt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let N=0;N<v.length;N++){const q=h[N];for(let J=0;J<q.length;J++)E.push(v[N])}return E},n.V=function(h){Kt(this);let v=[];if(typeof h=="string")hr(this,h)&&(v=v.concat(this.g.get(Gn(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},n.set=function(h,v){return Kt(this),this.i=null,h=Gn(this,h),hr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Ki(h,v,E){dr(h,v),0<E.length&&(h.i=null,h.g.set(Gn(h,v),P(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var N=v[E];const J=encodeURIComponent(String(N)),le=this.V(N);for(N=0;N<le.length;N++){var q=J;le[N]!==""&&(q+="="+encodeURIComponent(String(le[N]))),h.push(q)}}return this.i=h.join("&")};function Gn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Nr(h,v){v&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(E,N){var q=N.toLowerCase();N!=q&&(dr(this,N),Ki(this,q,E))},h)),h.j=v}function fp(h,v){const E=new qs;if(u.Image){const N=new Image;N.onload=S(En,E,"TestLoadImage: loaded",!0,v,N),N.onerror=S(En,E,"TestLoadImage: error",!1,v,N),N.onabort=S(En,E,"TestLoadImage: abort",!1,v,N),N.ontimeout=S(En,E,"TestLoadImage: timeout",!1,v,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function ed(h,v){const E=new qs,N=new AbortController,q=setTimeout(()=>{N.abort(),En(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(J=>{clearTimeout(q),J.ok?En(E,"TestPingServer: ok",!0,v):En(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),En(E,"TestPingServer: error",!1,v)})}function En(h,v,E,N,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),N(E)}catch{}}function pp(){this.g=new zl}function td(h,v,E){const N=E||"";try{$i(h,function(q,J){let le=q;f(q)&&(le=Ul(q)),v.push(N+J+"="+encodeURIComponent(le))})}catch(q){throw v.push(N+"type="+encodeURIComponent("_badmap")),q}}function ui(h){this.l=h.Ub||null,this.j=h.eb||!1}x(ui,Hs),ui.prototype.g=function(){return new eo(this.l,this.j)},ui.prototype.i=function(h){return function(){return h}}({});function eo(h,v){Rt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(eo,Rt),n=eo.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,pr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function nd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?fr(this):pr(this),this.readyState==3&&nd(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,fr(this))},n.Qa=function(h){this.g&&(this.response=h,fr(this))},n.ga=function(){this.g&&fr(this)};function fr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,pr(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function pr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ci(h){let v="";return W(h,function(E,N){v+=N,v+=":",v+=E,v+=`\r
`}),v}function Qi(h,v,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=ci(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):tt(h,v,E))}function ft(h){Rt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ft,Rt);var mp=/^https?$/i,Jl=["POST","PUT"];n=ft.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ur.g(),this.v=this.o?Qo(this.o):Qo(ur),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){to(this,J);return}if(h=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var q in N)E.set(q,N[q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const J of N.keys())E.set(J,N.get(J));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Jl,v,void 0))||N||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,le]of E)this.g.setRequestHeader(J,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aa(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){to(this,J)}};function to(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,oa(h),On(h)}function oa(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,kt(this,"complete"),kt(this,"abort"),On(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Zl(this):this.bb())},n.bb=function(){Zl(this)};function Zl(h){if(h.h&&typeof l<"u"&&(!h.v[1]||Sn(h)!=4||h.Z()!=2)){if(h.u&&Sn(h)==4)Vl(h.Ea,0,h);else if(kt(h,"readystatechange"),Sn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var N;if(N=le===0){var q=String(h.D).match(Js)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),N=!mp.test(q?q.toLowerCase():"")}E=N}if(E)kt(h,"complete"),kt(h,"success");else{h.m=6;try{var J=2<Sn(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",oa(h)}}finally{On(h)}}}}function On(h,v){if(h.g){aa(h);const E=h.g,N=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||kt(h,"ready");try{E.onreadystatechange=N}catch{}}}function aa(h){h.I&&(u.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Sn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Bl(v)}};function eu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function la(h){const v={};h=(h.g&&2<=Sn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(R(h[N]))continue;var E=V(h[N]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=v[q]||[];v[q]=J,J.push(E)}L(v,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function tu(h){this.Aa=0,this.i=[],this.j=new qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,h),this.cb=Dr("retryDelaySeedMs",1e4,h),this.Wa=Dr("forwardChannelMaxRetries",2,h),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Xs(h&&h.concurrentRequestLimit),this.Da=new pp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tu.prototype,n.la=8,n.G=1,n.connect=function(h,v,E,N){Tt(0),this.W=h,this.H=v||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=od(this,null,this.W),Mr(this)};function Qt(h){if(ua(h),h.G==3){var v=h.U++,E=Ln(h.I);if(tt(E,"SID",h.K),tt(E,"RID",v),tt(E,"TYPE","terminate"),di(h,E),v=new cr(h,h.j,v),v.L=2,v.v=Gi(Ln(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=v.v,E=!0),E||(v.g=ad(v.j,null),v.g.ea(v.v)),v.F=Date.now(),rt(v)}sd(h)}function mr(h){h.g&&(nu(h),h.g.cancel(),h.g=null)}function ua(h){mr(h),h.u&&(u.clearTimeout(h.u),h.u=null),ha(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Mr(h){if(!Mn(h.h)&&!h.s){h.s=!0;var v=h.Ga;he||j(),H||(he(),H=!0),ie.add(v,h),h.B=0}}function gp(h,v){return qc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ar(w(h.Ga,h,v),id(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new cr(this,this.j,h);let J=this.o;if(this.S&&(J?(J=C(J),b(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Yi(this,q,v),E=Ln(this.I),tt(E,"RID",h),tt(E,"CVER",22),this.D&&tt(E,"X-HTTP-Session-Id",this.D),di(this,E),J&&(this.O?v="headers="+encodeURIComponent(String(ci(J)))+"&"+v:this.m&&Qi(E,this.m,J)),Yl(this.h,q),this.Ua&&tt(E,"TYPE","init"),this.P?(tt(E,"$req",v),tt(E,"SID","null"),q.T=!0,na(q,E,null)):na(q,E,v),this.G=2}}else this.G==3&&(h?ca(this,h):this.i.length==0||Mn(this.h)||ca(this))};function ca(h,v){var E;v?E=v.l:E=h.U++;const N=Ln(h.I);tt(N,"SID",h.K),tt(N,"RID",E),tt(N,"AID",h.T),di(h,N),h.m&&h.o&&Qi(N,h.m,h.o),E=new cr(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Yi(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Yl(h.h,E),na(E,N,v)}function di(h,v){h.H&&W(h.H,function(E,N){tt(v,N,E)}),h.l&&$i({},function(E,N){tt(v,N,E)})}function Yi(h,v,E){E=Math.min(h.i.length,E);var N=h.l?w(h.l.Na,h.l,h):null;e:{var q=h.i;let J=-1;for(;;){const le=["count="+E];J==-1?0<E?(J=q[0].g,le.push("ofs="+J)):J=0:le.push("ofs="+J);let Ze=!0;for(let Nt=0;Nt<E;Nt++){let He=q[Nt].g;const Vt=q[Nt].map;if(He-=J,0>He)J=Math.max(0,q[Nt].g-100),Ze=!1;else try{td(Vt,le,"req"+He+"_")}catch{N&&N(Vt)}}if(Ze){N=le.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,N}function no(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;he||j(),H||(he(),H=!0),ie.add(v,h),h.v=0}}function da(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ar(w(h.Fa,h),id(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ar(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),mr(this),rd(this))};function nu(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function rd(h){h.g=new cr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Ln(h.qa);tt(v,"RID","rpc"),tt(v,"SID",h.K),tt(v,"AID",h.T),tt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&tt(v,"TO",h.ja),tt(v,"TYPE","xmlhttp"),di(h,v),h.m&&h.o&&Qi(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Gi(Ln(v)),E.m=null,E.P=!0,Kl(E,h)}n.Za=function(){this.C!=null&&(this.C=null,mr(this),da(this),Tt(19))};function ha(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function fa(h,v){var E=null;if(h.g==v){ha(h),nu(h),h.g=null;var N=2}else if(gn(h.h,v))E=v.D,Kc(h.h,v),N=1;else return;if(h.G!=0){if(v.o)if(N==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;N=Gs(),kt(N,new Jo(N,E)),Mr(h)}else no(h);else if(q=v.s,q==3||q==0&&0<v.X||!(N==1&&gp(h,v)||N==2&&da(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),q){case 1:hi(h,5);break;case 4:hi(h,10);break;case 3:hi(h,6);break;default:hi(h,2)}}}function id(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function hi(h,v){if(h.j.info("Error code "+v),v==2){var E=w(h.fb,h),N=h.Xa;const q=!N;N=new li(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Zs(N,"https"),Gi(N),q?fp(N.toString(),E):ed(N.toString(),E)}else Tt(2);h.G=0,h.l&&h.l.sa(v),sd(h),ua(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function sd(h){if(h.G=0,h.ka=[],h.l){const v=Qc(h.h);(v.length!=0||h.i.length!=0)&&(M(h.ka,v),M(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function od(h,v,E){var N=E instanceof li?Ln(E):new li(E);if(N.g!="")v&&(N.g=v+"."+N.g),Wi(N,N.s);else{var q=u.location;N=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var J=new li(null);N&&Zs(J,N),v&&(J.g=v),q&&Wi(J,q),E&&(J.l=E),N=J}return E=h.D,v=h.ya,E&&v&&tt(N,E,v),tt(N,"VER",h.la),di(h,N),N}function ad(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new ft(new ui({eb:E})):new ft(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}n=ru.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pa(){}pa.prototype.g=function(h,v){return new yn(h,v)};function yn(h,v){Rt.call(this),this.g=new tu(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!R(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Lr(this)}x(yn,Rt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Qt(this.g)},yn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Ul(h),h=E);v.i.push(new Gc(v.Ya++,h)),v.G==3&&Mr(v)},yn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,yn.aa.N.call(this)};function ld(h){Pr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}x(ld,Pr);function ud(){Xo.call(this),this.status=1}x(ud,Xo);function Lr(h){this.g=h}x(Lr,ru),Lr.prototype.ua=function(){kt(this.g,"a")},Lr.prototype.ta=function(h){kt(this.g,new ld(h))},Lr.prototype.sa=function(h){kt(this.g,new ud)},Lr.prototype.ra=function(){kt(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Lb=function(){return new pa},Mb=function(){return Gs()},Db=Rr,oy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,xh=ea,zc.COMPLETE="complete",Nb=zc,Yo.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Ou=Yo,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,kb=ft}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const oS="@firebase/firestore",aS="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new jf("@firebase/firestore");function Fa(){return ko.logLevel}function ge(n,...e){if(ko.logLevel<=Ve.DEBUG){const t=e.map(Nv);ko.debug(`Firestore (${Sl}): ${n}`,...t)}}function Di(n,...e){if(ko.logLevel<=Ve.ERROR){const t=e.map(Nv);ko.error(`Firestore (${Sl}): ${n}`,...t)}}function al(n,...e){if(ko.logLevel<=Ve.WARN){const t=e.map(Nv);ko.warn(`Firestore (${Sl}): ${n}`,...t)}}function Nv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function Je(n,e){n||Ae()}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(un.UNAUTHENTICATED))}shutdown(){}}class CF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bF{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bi,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new Ob(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new un(e)}}class AF{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class PF{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new AF(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RF{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,nr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new lS(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string"),this.R=t.token,new lS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=kF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function $e(n,e){return n<e?-1:n>e?1:0}function ll(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=-62135596800,cS=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cS);return new Lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uS)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cS}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-uS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Lt(0,0))}static max(){return new ke(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="__name__";class Ur{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ur.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=Ur.isNumericId(e),i=Ur.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ur.extractNumericId(e).compare(Ur.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class dt extends Ur{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const NF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ur{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return NF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dS}static keyField(){return new en([dS])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ve(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ve(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(o(),i++)}if(o(),l)throw new ve(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(dt.fromString(e))}static fromName(e){return new xe(dt.fromString(e).popFirst(5))}static empty(){return new xe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function DF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new ks(i,xe.empty(),e)}function MF(n){return new ks(n.readTime,n.key,dc)}class ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ks(ke.min(),xe.empty(),dc)}static max(){return new ks(ke.max(),xe.empty(),dc)}}function LF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==OF)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,o=0,l=!1;e.forEach(u=>{++i,u.next(()=>{++o,l&&o===i&&t()},c=>r(c))}),l=!0,o===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;t(e[f]).next(m=>{l[f]=m,++u,u===o&&r(l)},m=>i(m))}})}static doWhile(e,t){return new ee((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function jF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Il(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Bf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=-1;function zf(n){return n==null}function ef(n){return n===0&&1/n==-1/0}function FF(n){return typeof n=="number"&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="";function UF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hS(e)),e=BF(n.get(t),e);return hS(e)}function BF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case jb:t+="";break;default:t+=o}}return t}function hS(n){return n+jb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Us(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pt=class ay{constructor(e,t){this.comparator=e,this.root=t||Ss.EMPTY}insert(e,t){return new ay(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new ay(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}},dh=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ss=class Ei{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Ei.RED,this.left=i??Ei.EMPTY,this.right=o??Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Ei(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}};Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1;Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new zn([])}unionWith(e){let t=new Ot(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ub("Invalid base64 string: "+o):o}}(e);return new tn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const zF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(n){if(Je(!!n),typeof n=="string"){let e=0;const t=zF.exec(n);if(Je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ds(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="server_timestamp",zb="__type__",$b="__previous_value__",Wb="__local_write_time__";function Mv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zb])===null||t===void 0?void 0:t.stringValue)===Bb}function $f(n){const e=n.mapValue.fields[$b];return Mv(e)?$f(e):e}function hc(n){const e=Ns(n.mapValue.fields[Wb].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,t,r,i,o,l,u,c,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f}}const tf="(default)";class fc{constructor(e,t){this.projectId=e,this.database=t||tf}static empty(){return new fc("","")}get isDefaultDatabase(){return this.database===tf}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="__type__",WF="__max__",hh={mapValue:{}},Gb="__vector__",nf="value";function Ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mv(n)?4:GF(n)?9007199254740991:HF(n)?10:11:Ae()}function Zr(n,e){if(n===e)return!0;const t=Ms(n);if(t!==Ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hc(n).isEqual(hc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ns(i.timestampValue),u=Ns(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ds(i.bytesValue).isEqual(Ds(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return xt(i.geoPointValue.latitude)===xt(o.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return xt(i.integerValue)===xt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=xt(i.doubleValue),u=xt(o.doubleValue);return l===u?ef(l)===ef(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return ll(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(fS(l)!==fS(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!Zr(l[c],u[c])))return!1;return!0}(n,e);default:return Ae()}}function pc(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function ul(n,e){if(n===e)return 0;const t=Ms(n),r=Ms(e);if(t!==r)return $e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return function(o,l){const u=xt(o.integerValue||o.doubleValue),c=xt(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return mS(n.timestampValue,e.timestampValue);case 4:return mS(hc(n),hc(e));case 5:return $e(n.stringValue,e.stringValue);case 6:return function(o,l){const u=Ds(o),c=Ds(l);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let f=0;f<u.length&&f<c.length;f++){const m=$e(u[f],c[f]);if(m!==0)return m}return $e(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const u=$e(xt(o.latitude),xt(l.latitude));return u!==0?u:$e(xt(o.longitude),xt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return gS(n.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,f,m;const g=o.fields||{},w=l.fields||{},S=(u=g[nf])===null||u===void 0?void 0:u.arrayValue,x=(c=w[nf])===null||c===void 0?void 0:c.arrayValue,P=$e(((f=S?.values)===null||f===void 0?void 0:f.length)||0,((m=x?.values)===null||m===void 0?void 0:m.length)||0);return P!==0?P:gS(S,x)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===hh.mapValue&&l===hh.mapValue)return 0;if(o===hh.mapValue)return 1;if(l===hh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=l.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const w=$e(c[g],m[g]);if(w!==0)return w;const S=ul(u[c[g]],f[m[g]]);if(S!==0)return S}return $e(c.length,m.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function mS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);const t=Ns(n),r=Ns(e),i=$e(t.seconds,r.seconds);return i!==0?i:$e(t.nanos,r.nanos)}function gS(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=ul(t[i],r[i]);if(o)return o}return $e(t.length,r.length)}function cl(n){return ly(n)}function ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ns(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ds(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=ly(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${ly(t.fields[l])}`;return i+"}"}(n.mapValue):Ae()}function Ih(n){switch(Ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(n);return e?16+Ih(e):16;case 5:return 2*n.stringValue.length;case 6:return Ds(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ih(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Us(r.fields,(o,l)=>{i+=o.length+Ih(l)}),i}(n.mapValue);default:throw Ae()}}function yS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uy(n){return!!n&&"integerValue"in n}function Lv(n){return!!n&&"arrayValue"in n}function vS(n){return!!n&&"nullValue"in n}function _S(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ch(n){return!!n&&"mapValue"in n}function HF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hb])===null||t===void 0?void 0:t.stringValue)===Gb}function Hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Us(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function GF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===WF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=en.emptyPath(),r={},i=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}l?r[u.lastSegment()]=Hu(l):i.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Us(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new kn(Hu(this.value))}}function qb(n){const e=[];return Us(n.fields,(t,r)=>{const i=new en([t]);if(Ch(r)){const o=qb(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,r,i,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new cn(e,0,ke.min(),ke.min(),ke.min(),kn.empty(),0)}static newFoundDocument(e,t,r,i){return new cn(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new cn(e,2,t,ke.min(),ke.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,ke.min(),ke.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t){this.position=e,this.inclusive=t}}function wS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=xe.comparator(xe.fromName(l.referenceValue),t.key):r=ul(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function TS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t="asc"){this.field=e,this.dir=t}}function qF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{}class At extends Kb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new QF(e,t,r):t==="array-contains"?new JF(e,r):t==="in"?new ZF(e,r):t==="not-in"?new e4(e,r):t==="array-contains-any"?new t4(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YF(e,r):new XF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ul(t,this.value)):t!==null&&Ms(this.value)===Ms(t)&&this.matchesComparison(ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends Kb{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ar(e,t)}matches(e){return Qb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Qb(n){return n.op==="and"}function Yb(n){return KF(n)&&Qb(n)}function KF(n){for(const e of n.filters)if(e instanceof Ar)return!1;return!0}function cy(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+cl(n.value);if(Yb(n))return n.filters.map(e=>cy(e)).join(",");{const e=n.filters.map(t=>cy(t)).join(",");return`${n.op}(${e})`}}function Xb(n,e){return n instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(n,e):n instanceof Ar?function(r,i){return i instanceof Ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,u)=>o&&Xb(l,i.filters[u]),!0):!1}(n,e):void Ae()}function Jb(n){return n instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`}(n):n instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(Jb).join(" ,")+"}"}(n):"Filter"}class QF extends At{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class YF extends At{constructor(e,t){super(e,"in",t),this.keys=Zb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XF extends At{constructor(e,t){super(e,"not-in",t),this.keys=Zb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>xe.fromName(r.referenceValue))}class JF extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lv(t)&&pc(t.arrayValue,this.value)}}class ZF extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pc(this.value.arrayValue,t)}}class e4 extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!pc(this.value.arrayValue,t)}}class t4 extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,t=null,r=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function ES(n,e=null,t=[],r=[],i=null,o=null,l=null){return new n4(n,e,t,r,i,o,l)}function Ov(n){const e=Ne(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cl(r)).join(",")),e.le=t}return e.le}function Vv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TS(n.startAt,e.startAt)&&TS(n.endAt,e.endAt)}function dy(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t=null,r=[],i=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function r4(n,e,t,r,i,o,l,u){return new Cc(n,e,t,r,i,o,l,u)}function jv(n){return new Cc(n)}function SS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eA(n){return n.collectionGroup!==null}function Gu(n){const e=Ne(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ot(en.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new sf(o,r))}),t.has(en.keyField().canonicalString())||e.he.push(new sf(en.keyField(),r))}return e.he}function Kr(n){const e=Ne(n);return e.Pe||(e.Pe=i4(e,Gu(n))),e.Pe}function i4(n,e){if(n.limitType==="F")return ES(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new sf(i.field,o)});const t=n.endAt?new rf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rf(n.startAt.position,n.startAt.inclusive):null;return ES(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function hy(n,e){const t=n.filters.concat([e]);return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fy(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wf(n,e){return Vv(Kr(n),Kr(e))&&n.limitType===e.limitType}function tA(n){return`${Ov(Kr(n))}|lt:${n.limitType}`}function Ua(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Jb(i)).join(", ")}]`),zf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cl(i)).join(",")),`Target(${r})`}(Kr(n))}; limitType=${n.limitType})`}function Hf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Gu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,u,c){const f=wS(l,u,c);return l.inclusive?f<=0:f<0}(r.startAt,Gu(r),i)||r.endAt&&!function(l,u,c){const f=wS(l,u,c);return l.inclusive?f>=0:f>0}(r.endAt,Gu(r),i))}(n,e)}function s4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nA(n){return(e,t)=>{let r=!1;for(const i of Gu(n)){const o=o4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function o4(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):function(o,l,u){const c=l.data.field(o),f=u.data.field(o);return c!==null&&f!==null?ul(c,f):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Fb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=new Pt(xe.comparator);function Mi(){return a4}const rA=new Pt(xe.comparator);function Vu(...n){let e=rA;for(const t of n)e=e.insert(t.key,t);return e}function iA(n){let e=rA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Co(){return qu()}function sA(){return qu()}function qu(){return new Fo(n=>n.toString(),(n,e)=>n.isEqual(e))}const l4=new Pt(xe.comparator),u4=new Ot(xe.comparator);function Ue(...n){let e=u4;for(const t of n)e=e.add(t);return e}const c4=new Ot($e);function d4(){return c4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function oA(n){return{integerValue:""+n}}function h4(n,e){return FF(e)?oA(e):Fv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this._=void 0}}function f4(n,e,t){return n instanceof of?function(i,o){const l={fields:{[zb]:{stringValue:Bb},[Wb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Mv(o)&&(o=$f(o)),o&&(l.fields[$b]=o),{mapValue:l}}(t,e):n instanceof mc?lA(n,e):n instanceof gc?uA(n,e):function(i,o){const l=aA(i,o),u=xS(l)+xS(i.Ie);return uy(l)&&uy(i.Ie)?oA(u):Fv(i.serializer,u)}(n,e)}function p4(n,e,t){return n instanceof mc?lA(n,e):n instanceof gc?uA(n,e):t}function aA(n,e){return n instanceof af?function(r){return uy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class of extends Gf{}class mc extends Gf{constructor(e){super(),this.elements=e}}function lA(n,e){const t=cA(e);for(const r of n.elements)t.some(i=>Zr(i,r))||t.push(r);return{arrayValue:{values:t}}}class gc extends Gf{constructor(e){super(),this.elements=e}}function uA(n,e){let t=cA(e);for(const r of n.elements)t=t.filter(i=>!Zr(i,r));return{arrayValue:{values:t}}}class af extends Gf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function xS(n){return xt(n.integerValue||n.doubleValue)}function cA(n){return Lv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function m4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mc&&i instanceof mc||r instanceof gc&&i instanceof gc?ll(r.elements,i.elements,Zr):r instanceof af&&i instanceof af?Zr(r.Ie,i.Ie):r instanceof of&&i instanceof of}(n.transform,e.transform)}class g4{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qf{}function dA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Uv(n.key,Cr.none()):new bc(n.key,n.data,Cr.none());{const t=n.data,r=kn.empty();let i=new Ot(en.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Bs(n.key,r,new zn(i.toArray()),Cr.none())}}function y4(n,e,t){n instanceof bc?function(i,o,l){const u=i.value.clone(),c=CS(i.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Bs?function(i,o,l){if(!bh(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=CS(i.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(hA(i)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Ku(n,e,t,r){return n instanceof bc?function(o,l,u,c){if(!bh(o.precondition,l))return u;const f=o.value.clone(),m=bS(o.fieldTransforms,c,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bs?function(o,l,u,c){if(!bh(o.precondition,l))return u;const f=bS(o.fieldTransforms,c,l),m=l.data;return m.setAll(hA(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,l,u){return bh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function v4(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=aA(r.transform,i||null);o!=null&&(t===null&&(t=kn.empty()),t.set(r.field,o))}return t||null}function IS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ll(r,i,(o,l)=>m4(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bc extends qf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bs extends qf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CS(n,e,t){const r=new Map;Je(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,u=e.data.field(o.field);r.set(o.field,p4(l,u,t[i]))}return r}function bS(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,f4(o,l,e))}return r}class Uv extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _4 extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&y4(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sA();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const c=dA(l,u);c!==null&&r.set(i.key,c),l.isValidDocument()||l.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(t,r)=>IS(t,r))&&ll(this.baseMutations,e.baseMutations,(t,r)=>IS(t,r))}}class Bv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Je(e.mutations.length===r.length);let i=function(){return l4}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Bv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ge;function S4(n){switch(n){case te.OK:return Ae();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae()}}function fA(n){if(n===void 0)return Di("GRPC error has no .code"),te.UNKNOWN;switch(n){case bt.OK:return te.OK;case bt.CANCELLED:return te.CANCELLED;case bt.UNKNOWN:return te.UNKNOWN;case bt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case bt.INTERNAL:return te.INTERNAL;case bt.UNAVAILABLE:return te.UNAVAILABLE;case bt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case bt.NOT_FOUND:return te.NOT_FOUND;case bt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case bt.ABORTED:return te.ABORTED;case bt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case bt.DATA_LOSS:return te.DATA_LOSS;default:return Ae()}}(Ge=bt||(bt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new Es([4294967295,4294967295],0);function AS(n){const e=x4().encode(n),t=new Rb;return t.update(e),new Uint8Array(t.digest())}function PS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Es([t,r],0),new Es([i,o],0)]}class zv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(r<0)throw new ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Es.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(Es.fromNumber(r)));return i.compare(I4)===1&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=AS(e),[r,i]=PS(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,i,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new zv(o,i,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=AS(e),[r,i]=PS(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,i,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kf(ke.min(),i,new Pt($e),Mi(),Ue())}}class Ac{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ac(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class pA{constructor(e,t){this.targetId=e,this.ge=t}}class mA{constructor(e,t,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class RS{constructor(){this.pe=0,this.ye=kS(),this.we=tn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ue(),t=Ue(),r=Ue();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new Ac(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=kS()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Je(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class C4{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Mi(),this.$e=fh(),this.Ke=fh(),this.Ue=new Pt($e)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const o=i.target;if(dy(o))if(r===0){const l=new xe(o.path);this.ze(t,l,cn.newNoDocument(l,ke.min()))}else Je(r===1);else{const l=this.et(t);if(l!==r){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,f)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=Ds(r).toUint8Array()}catch(c){if(c instanceof Ub)return al("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new zv(l,i,o)}catch(c){return al(c instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&dy(u.target)){const c=new xe(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,cn.newNoDocument(c,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Ue();this.Ke.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const f=this.Xe(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const i=new Kf(e,t,this.Ue,this.Qe,r);return this.Qe=Mi(),this.$e=fh(),this.Ke=fh(),this.Ue=new Pt($e),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new RS,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Ot($e),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ot($e),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new RS),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function fh(){return new Pt(xe.comparator)}function kS(){return new Pt(xe.comparator)}const b4={asc:"ASCENDING",desc:"DESCENDING"},A4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P4={and:"AND",or:"OR"};class R4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function py(n,e){return n.useProto3Json||zf(e)?e:{value:e}}function lf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function k4(n,e){return lf(n,e.toTimestamp())}function Qr(n){return Je(!!n),ke.fromTimestamp(function(t){const r=Ns(t);return new Lt(r.seconds,r.nanos)}(n))}function $v(n,e){return my(n,e).canonicalString()}function my(n,e){const t=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function yA(n){const e=dt.fromString(n);return Je(EA(e)),e}function gy(n,e){return $v(n.databaseId,e.path)}function fg(n,e){const t=yA(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(_A(t))}function vA(n,e){return $v(n.databaseId,e)}function N4(n){const e=yA(n);return e.length===4?dt.emptyPath():_A(e)}function yy(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _A(n){return Je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function NS(n,e,t){return{name:gy(n,e),fields:t.value.mapValue.fields}}function D4(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Je(m===void 0||typeof m=="string"),tn.fromBase64String(m||"")):(Je(m===void 0||m instanceof Buffer||m instanceof Uint8Array),tn.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const m=f.code===void 0?te.UNKNOWN:fA(f.code);return new ve(m,f.message||"")}(l);t=new mA(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fg(n,r.document.name),o=Qr(r.document.updateTime),l=r.document.createTime?Qr(r.document.createTime):ke.min(),u=new kn({mapValue:{fields:r.document.fields}}),c=cn.newFoundDocument(i,o,l,u),f=r.targetIds||[],m=r.removedTargetIds||[];t=new Ah(f,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fg(n,r.document),o=r.readTime?Qr(r.readTime):ke.min(),l=cn.newNoDocument(i,o),u=r.removedTargetIds||[];t=new Ah([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fg(n,r.document),o=r.removedTargetIds||[];t=new Ah([],o,i,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new E4(i,o),u=r.targetId;t=new pA(u,l)}}return t}function M4(n,e){let t;if(e instanceof bc)t={update:NS(n,e.key,e.value)};else if(e instanceof Uv)t={delete:gy(n,e.key)};else if(e instanceof Bs)t={update:NS(n,e.key,e.data),updateMask:$4(e.fieldMask)};else{if(!(e instanceof _4))return Ae();t={verify:gy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof of)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof mc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof gc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof af)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:k4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(n,e.precondition)),t}function L4(n,e){return n&&n.length>0?(Je(e!==void 0),n.map(t=>function(i,o){let l=i.updateTime?Qr(i.updateTime):Qr(o);return l.isEqual(ke.min())&&(l=Qr(o)),new g4(l,i.transformResults||[])}(t,e))):[]}function O4(n,e){return{documents:[vA(n,e.path)]}}function V4(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vA(n,i);const o=function(f){if(f.length!==0)return TA(Ar.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(m=>function(w){return{field:Ba(w.field),direction:U4(w.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=py(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:t,parent:i}}function j4(n){let e=N4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Je(r===1);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(g){const w=wA(g);return w instanceof Ar&&Yb(w)?w.getFilters():[w]}(t.where));let l=[];t.orderBy&&(l=function(g){return g.map(w=>function(x){return new sf(za(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(w))}(t.orderBy));let u=null;t.limit&&(u=function(g){let w;return w=typeof g=="object"?g.value:g,zf(w)?null:w}(t.limit));let c=null;t.startAt&&(c=function(g){const w=!!g.before,S=g.values||[];return new rf(S,w)}(t.startAt));let f=null;return t.endAt&&(f=function(g){const w=!g.before,S=g.values||[];return new rf(S,w)}(t.endAt)),r4(e,i,l,o,u,"F",c,f)}function F4(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=za(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=za(t.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=za(t.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=za(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return At.create(za(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(r=>wA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function U4(n){return b4[n]}function B4(n){return A4[n]}function z4(n){return P4[n]}function Ba(n){return{fieldPath:n.canonicalString()}}function za(n){return en.fromServerFormat(n.fieldPath)}function TA(n){return n instanceof At?function(t){if(t.op==="=="){if(_S(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NAN"}};if(vS(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_S(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NAN"}};if(vS(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(t.field),op:B4(t.op),value:t.value}}}(n):n instanceof Ar?function(t){const r=t.getFilters().map(i=>TA(i));return r.length===1?r[0]:{compositeFilter:{op:z4(t.op),filters:r}}}(n):Ae()}function $4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function EA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,r,i,o=ke.min(),l=ke.min(),u=tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.Tt=e}}function H4(n){const e=j4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.Tn=new q4}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ks.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class q4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ot(dt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SA=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(SA,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new dl(0)}static Un(){return new dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="LruGarbageCollector",K4=1048576;function LS([n,e],[t,r]){const i=$e(n,t);return i===0?$e(e,r):i}class Q4{constructor(e){this.Hn=e,this.buffer=new Ot(LS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(MS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Il(t)?ge(MS,"Ignoring IndexedDB error during garbage collection: ",t):await xl(t)}await this.er(3e5)})}}class X4{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Bf.ae);const r=new Q4(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(DS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,l,u,c,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(f=Date.now(),Fa()<=Ve.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-m}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}function J4(n,e){return new X4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.changes=new Fo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ku(r.mutation,i,zn.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ue()){const i=Co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Vu();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ue()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,i){let o=Mi();const l=qu(),u=function(){return qu()}();return t.forEach((c,f)=>{const m=r.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof Bs)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Ku(m.mutation,f,m.mutation.getFieldMask(),Lt.now())):l.set(f.key,zn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,m)=>l.set(f,m)),t.forEach((f,m)=>{var g;return u.set(f,new eU(m,(g=l.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=qu();let i=new Pt((l,u)=>l-u),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(c=>{const f=t.get(c);if(f===null)return;let m=r.get(c)||zn.empty();m=u.applyToLocalView(f,m),r.set(c,m);const g=(i.get(u.batchId)||Ue()).add(c);i=i.insert(u.batchId,g)})}).next(()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,m=c.value,g=sA();m.forEach(w=>{if(!o.has(w)){const S=dA(t.get(w),r.get(w));S!==null&&g.set(w,S),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,g))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return xe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ee.resolve(Co());let u=dc,c=o;return l.next(f=>ee.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?ee.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{c=c.insert(m,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,Ue())).next(m=>({batchId:u,changes:iA(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(r=>{let i=Vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Vu();return this.indexManager.getCollectionParents(e,o).next(u=>ee.forEach(u,c=>{const f=function(g,w){return new Cc(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(m=>{m.forEach((g,w)=>{l=l.insert(g,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((c,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,cn.newInvalidDocument(m)))});let u=Vu();return l.forEach((c,f)=>{const m=o.get(c);m!==void 0&&Ku(m.mutation,f,zn.empty(),Lt.now()),Hf(t,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qr(i.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:H4(i.bundledQuery),readTime:Qr(i.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.overlays=new Pt(xe.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Co();return ee.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=Co(),o=t.length+1,l=new xe(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pt((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=Co(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Co(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=i)););return ee.resolve(u)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new T4(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ue(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.Vr=new Ot(Wt.mr),this.gr=new Ot(Wt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Wt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Wt(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new xe(new dt([])),r=new Wt(t,e),i=new Wt(t,e+1),o=[];return this.gr.forEachInRange([r,i],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new xe(new dt([])),r=new Wt(t,e),i=new Wt(t,e+1);let o=Ue();return this.gr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Wt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return xe.comparator(e.key,t.key)||$e(e.Cr,t.Cr)}static pr(e,t){return $e(e.Cr,t.Cr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ot(Wt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new w4(o,t,r,i);this.mutationQueue.push(l);for(const u of i)this.Mr=this.Mr.add(new Wt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),o=i<0?0:i;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Dv:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wt(t,0),i=new Wt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],l=>{const u=this.Or(l.Cr);o.push(u)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot($e);return t.forEach(i=>{const o=new Wt(i,0),l=new Wt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),ee.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const l=new Wt(new xe(o),0);let u=new Ot($e);return this.Mr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Cr)),!0)},l),ee.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Je(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ee.forEach(t.mutations,i=>{const o=new Wt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Wt(t,0),i=this.Mr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.kr=e,this.docs=function(){return new Pt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=Mi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Mi();const l=t.path,u=new xe(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||LF(MF(m),r)<=0||(i.has(m.key)||Hf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ae()}qr(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aU(this)}getSize(e){return ee.resolve(this.size)}}class aU extends Z4{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.persistence=e,this.Qr=new Fo(t=>Ov(t),Vv),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Wv,this.targetCount=0,this.Ur=dl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new dl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ee.waitFor(o).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Bf(0),this.zr=!1,this.zr=!0,this.jr=new iU,this.referenceDelegate=e(this),this.Hr=new lU(this),this.indexManager=new G4,this.remoteDocumentCache=function(i){return new oU(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new W4(t),this.Yr=new nU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new sU(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new uU(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return ee.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class uU extends VF{constructor(e){super(),this.currentSequenceNumber=e}}class Hv{constructor(e){this.persistence=e,this.ti=new Wv,this.ni=null}static ri(e){return new Hv(e)}get ii(){if(this.ni)return this.ni;throw Ae()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,r=>{const i=xe.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ke.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.oi=new Fo(r=>UF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=J4(this,t)}static ri(e,t){return new uf(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?ee.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,l=>this.ar(e,l,t).next(u=>{u||(r++,o.removeEntry(l,ke.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ih(e.data.value)),t}ar(e,t,r){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Ue(),i=Ue();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Gv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ZV()?8:jF(mn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new cU;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Fa()<=Ve.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(Fa()<=Ve.DEBUG&&ge("QueryEngine","Query:",Ua(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Fa()<=Ve.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):ee.resolve())}rs(e,t){if(SS(t))return ee.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fy(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ue(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.cs(t,u);return this.ls(t,f,l,c.readTime)?this.rs(e,fy(t,null,"F")):this.hs(e,f,t,c)}))})))}ss(e,t,r,i){return SS(t)||i.isEqual(ke.min())?ee.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,i)?ee.resolve(null):(Fa()<=Ve.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ua(t)),this.hs(e,l,t,DF(i,dc)).next(u=>u))})}cs(e,t){let r=new Ot(nA(e));return t.forEach((i,o)=>{Hf(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return Fa()<=Ve.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ua(t)),this.ns.getDocumentsMatchingQuery(e,t,ks.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="LocalStore",hU=3e8;class fU{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Pt($e),this.Is=new Fo(o=>Ov(o),Vv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tU(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function pU(n,e,t,r){return new fU(n,e,t,r)}async function IA(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let c=Ue();for(const f of i){l.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}return t.localDocuments.getDocuments(r,c).next(f=>({Rs:f,removedBatchIds:l,addedBatchIds:u}))})})}function mU(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,f,m){const g=f.batch,w=g.keys();let S=ee.resolve();return w.forEach(x=>{S=S.next(()=>m.getEntry(c,x)).next(P=>{const M=f.docVersions.get(x);Je(M!==null),P.version.compareTo(M)<0&&(g.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),m.addEntry(P)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=Ue();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function CA(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function gU(n,e){const t=Ne(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const u=[];e.targetChanges.forEach((m,g)=>{const w=i.get(g);if(!w)return;u.push(t.Hr.removeMatchingKeys(o,m.removedDocuments,g).next(()=>t.Hr.addMatchingKeys(o,m.addedDocuments,g)));let S=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(tn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,r)),i=i.insert(g,S),function(P,M,O){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=hU?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(w,S,m)&&u.push(t.Hr.updateTargetData(o,S))});let c=Mi(),f=Ue();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(yU(o,l,e.documentUpdates).next(m=>{c=m.Vs,f=m.fs})),!r.isEqual(ke.min())){const m=t.Hr.getLastRemoteSnapshotVersion(o).next(g=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(m)}return ee.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(t.Ts=i,o))}function yU(n,e,t){let r=Ue(),i=Ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Mi();return t.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):ge(qv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{Vs:l,fs:i}})}function vU(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _U(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,ee.resolve(i)):t.Hr.allocateTargetId(r).next(l=>(i=new _s(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function vy(n,e,t){const r=Ne(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Il(l))throw l;ge(qv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function OS(n,e,t){const r=Ne(n);let i=ke.min(),o=Ue();return r.persistence.runTransaction("Execute query","readwrite",l=>function(c,f,m){const g=Ne(c),w=g.Is.get(m);return w!==void 0?ee.resolve(g.Ts.get(w)):g.Hr.getTargetData(f,m)}(r,l,Kr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?i:ke.min(),t?o:Ue())).next(u=>(wU(r,s4(e),u),{documents:u,gs:o})))}function wU(n,e,t){let r=n.Es.get(e)||ke.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class VS{constructor(){this.activeTargetIds=d4()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TU{constructor(){this.ho=new VS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new VS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="ConnectivityMonitor";class FS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(jS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(jS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph=null;function _y(){return ph===null?ph=function(){return 268435456+Math.round(2147483648*Math.random())}():ph++,"0x"+ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",SU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xU{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===tf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,o){const l=_y(),u=this.So(e,t.toUriEncodedString());ge(pg,`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,o),this.vo(e,u,c,r).then(f=>(ge(pg,`Received RPC '${e}' ${l}: `,f),f),f=>{throw al(pg,`RPC '${e}' ${l} failed with error: `,f,"url: ",u,"request:",r),f})}Co(e,t,r,i,o,l){return this.bo(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}So(e,t){const r=SU[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class CU extends xU{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const o=_y();return new Promise((l,u)=>{const c=new kb;c.setWithCredentials(!0),c.listenOnce(Nb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xh.NO_ERROR:const m=c.getResponseJson();ge(an,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case xh.TIMEOUT:ge(an,`RPC '${e}' ${o} timed out`),u(new ve(te.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const g=c.getStatus();if(ge(an,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const x=function(M){const O=M.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(O)>=0?O:te.UNKNOWN}(S.status);u(new ve(x,S.message))}else u(new ve(te.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ve(te.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ge(an,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);ge(an,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",f,r,15)})}Wo(e,t,r){const i=_y(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Lb(),u=Mb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const m=o.join("");ge(an,`Creating RPC '${e}' stream ${i}: ${m}`,c);const g=l.createWebChannel(m,c);let w=!1,S=!1;const x=new IU({Fo:M=>{S?ge(an,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(w||(ge(an,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),ge(an,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},Mo:()=>g.close()}),P=(M,O,R)=>{M.listen(O,D=>{try{R(D)}catch(B){setTimeout(()=>{throw B},0)}})};return P(g,Ou.EventType.OPEN,()=>{S||(ge(an,`RPC '${e}' stream ${i} transport opened.`),x.Qo())}),P(g,Ou.EventType.CLOSE,()=>{S||(S=!0,ge(an,`RPC '${e}' stream ${i} transport closed`),x.Ko())}),P(g,Ou.EventType.ERROR,M=>{S||(S=!0,al(an,`RPC '${e}' stream ${i} transport errored:`,M),x.Ko(new ve(te.UNAVAILABLE,"The operation could not be completed")))}),P(g,Ou.EventType.MESSAGE,M=>{var O;if(!S){const R=M.data[0];Je(!!R);const D=R,B=D?.error||((O=D[0])===null||O===void 0?void 0:O.error);if(B){ge(an,`RPC '${e}' stream ${i} received error:`,B);const z=B.status;let W=function(A){const b=bt[A];if(b!==void 0)return fA(b)}(z),L=B.message;W===void 0&&(W=te.INTERNAL,L="Unknown error status: "+z+" with message "+B.message),S=!0,x.Ko(new ve(W,L)),g.close()}else ge(an,`RPC '${e}' stream ${i} received:`,R),x.Uo(R)}}),P(u,Db.STAT_EVENT,M=>{M.stat===oy.PROXY?ge(an,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===oy.NOPROXY&&ge(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n){return new R4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="PersistentStream";class AA{constructor(e,t,r,i,o,l,u,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new bA(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new ve(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(US,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ge(US,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bU extends AA{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=D4(this.serializer,e),r=function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?Qr(l.readTime):ke.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=yy(this.serializer),t.addTarget=function(o,l){let u;const c=l.target;if(u=dy(c)?{documents:O4(o,c)}:{query:V4(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=gA(o,l.resumeToken);const f=py(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(ke.min())>0){u.readTime=lf(o,l.snapshotVersion.toTimestamp());const f=py(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=F4(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=yy(this.serializer),t.removeTarget=e,this.I_(t)}}class AU extends AA{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=L4(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=yy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>M4(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{}class RU extends PU{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.bo(e,my(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(te.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,my(t,r),i,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(te.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class kU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Di(t),this.N_=!1):ge("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RemoteStore";class NU{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{Uo(this)&&(ge(No,"Restarting streams for network reachability change."),await async function(c){const f=Ne(c);f.W_.add(4),await Pc(f),f.j_.set("Unknown"),f.W_.delete(4),await Yf(f)}(this))})}),this.j_=new kU(r,i)}}async function Yf(n){if(Uo(n))for(const e of n.G_)await e(!0)}async function Pc(n){for(const e of n.G_)await e(!1)}function PA(n,e){const t=Ne(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Xv(t)?Yv(t):Cl(t).c_()&&Qv(t,e))}function Kv(n,e){const t=Ne(n),r=Cl(t);t.U_.delete(e),r.c_()&&RA(t,e),t.U_.size===0&&(r.c_()?r.P_():Uo(t)&&t.j_.set("Unknown"))}function Qv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cl(n).y_(e)}function RA(n,e){n.H_.Ne(e),Cl(n).w_(e)}function Yv(n){n.H_=new C4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Cl(n).start(),n.j_.B_()}function Xv(n){return Uo(n)&&!Cl(n).u_()&&n.U_.size>0}function Uo(n){return Ne(n).W_.size===0}function kA(n){n.H_=void 0}async function DU(n){n.j_.set("Online")}async function MU(n){n.U_.forEach((e,t)=>{Qv(n,e)})}async function LU(n,e){kA(n),Xv(n)?(n.j_.q_(e),Yv(n)):n.j_.set("Unknown")}async function OU(n,e,t){if(n.j_.set("Online"),e instanceof mA&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const u of o.targetIds)i.U_.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.U_.delete(u),i.H_.removeTarget(u))}(n,e)}catch(r){ge(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(n,r)}else if(e instanceof Ah?n.H_.We(e):e instanceof pA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ke.min()))try{const r=await CA(n.localStore);t.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.U_.get(f);m&&o.U_.set(f,m.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,f)=>{const m=o.U_.get(c);if(!m)return;o.U_.set(c,m.withResumeToken(tn.EMPTY_BYTE_STRING,m.snapshotVersion)),RA(o,c);const g=new _s(m.target,c,f,m.sequenceNumber);Qv(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){ge(No,"Failed to raise snapshot:",r),await cf(n,r)}}async function cf(n,e,t){if(!Il(e))throw e;n.W_.add(1),await Pc(n),n.j_.set("Offline"),t||(t=()=>CA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(No,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Yf(n)})}function NA(n,e){return e().catch(t=>cf(n,t,e))}async function Xf(n){const e=Ne(n),t=Ls(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Dv;for(;VU(e);)try{const i=await vU(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,jU(e,i)}catch(i){await cf(e,i)}DA(e)&&MA(e)}function VU(n){return Uo(n)&&n.K_.length<10}function jU(n,e){n.K_.push(e);const t=Ls(n);t.c_()&&t.b_&&t.S_(e.mutations)}function DA(n){return Uo(n)&&!Ls(n).u_()&&n.K_.length>0}function MA(n){Ls(n).start()}async function FU(n){Ls(n).C_()}async function UU(n){const e=Ls(n);for(const t of n.K_)e.S_(t.mutations)}async function BU(n,e,t){const r=n.K_.shift(),i=Bv.from(r,e,t);await NA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Xf(n)}async function zU(n,e){e&&Ls(n).b_&&await async function(r,i){if(function(l){return S4(l)&&l!==te.ABORTED}(i.code)){const o=r.K_.shift();Ls(r).h_(),await NA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Xf(r)}}(n,e),DA(n)&&MA(n)}async function BS(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),ge(No,"RemoteStore received new credentials");const r=Uo(t);t.W_.add(3),await Pc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Yf(t)}async function $U(n,e){const t=Ne(n);e?(t.W_.delete(2),await Yf(t)):e||(t.W_.add(2),await Pc(t),t.j_.set("Unknown"))}function Cl(n){return n.J_||(n.J_=function(t,r,i){const o=Ne(t);return o.M_(),new bU(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:DU.bind(null,n),No:MU.bind(null,n),Lo:LU.bind(null,n),p_:OU.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Xv(n)?Yv(n):n.j_.set("Unknown")):(await n.J_.stop(),kA(n))})),n.J_}function Ls(n){return n.Y_||(n.Y_=function(t,r,i){const o=Ne(t);return o.M_(),new AU(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:FU.bind(null,n),Lo:zU.bind(null,n),D_:UU.bind(null,n),v_:BU.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Xf(n)):(await n.Y_.stop(),n.K_.length>0&&(ge(No,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,u=new Jv(e,t,l,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zv(n,e){if(Di("AsyncQueue",`${e}: ${n}`),Il(n))return new ve(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=Vu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.Z_=new Pt(xe.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ae():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class hl{constructor(e,t,r,i,o,l,u,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new hl(e,t,Ja.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class HU{constructor(){this.queries=$S(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=Ne(t),o=i.queries;i.queries=$S(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(r)})})(this,new ve(te.ABORTED,"Firestore shutting down"))}}function $S(){return new Fo(n=>tA(n),Wf)}async function LA(n,e){const t=Ne(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new WU,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(i,!0);break;case 1:o.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=Zv(l,`Initialization of query '${Ua(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&e_(t)}async function OA(n,e){const t=Ne(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GU(n,e){const t=Ne(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(i)&&(r=!0);l.ea=i}}r&&e_(t)}function qU(n,e,t){const r=Ne(n),i=r.queries.get(e);if(i)for(const o of i.ta)o.onError(t);r.queries.delete(e)}function e_(n){n.ia.forEach(e=>{e.next()})}var wy,WS;(WS=wy||(wy={}))._a="default",WS.Cache="cache";class VA{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==wy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.key=e}}class FA{constructor(e){this.key=e}}class KU{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=nA(e),this.wa=new Ja(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new zS,i=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,g)=>{const w=i.get(m),S=Hf(this.query,g)?g:null,x=!!w&&this.mutatedKeys.has(w.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;w&&S?w.data.isEqual(S.data)?x!==P&&(r.track({type:3,doc:S}),M=!0):this.va(w,S)||(r.track({type:2,doc:S}),M=!0,(c&&this.ya(S,c)>0||f&&this.ya(S,f)<0)&&(u=!0)):!w&&S?(r.track({type:0,doc:S}),M=!0):w&&!S&&(r.track({type:1,doc:w}),M=!0,(c||f)&&(u=!0)),M&&(S?(l=l.add(S),o=P?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((m,g)=>function(S,x){const P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return P(S)-P(x)}(m.type,g.type)||this.ya(m.doc,g.doc)),this.Ca(r),i=i!=null&&i;const u=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,f=c!==this.ga;return this.ga=c,l.length!==0||f?{snapshot:new hl(this.query,e.wa,o,l,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new zS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new FA(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new jA(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ue();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return hl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const t_="SyncEngine";class QU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YU{constructor(e){this.key=e,this.Ba=!1}}class XU{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Fo(u=>tA(u),Wf),this.qa=new Map,this.Qa=new Set,this.$a=new Pt(xe.comparator),this.Ka=new Map,this.Ua=new Wv,this.Wa={},this.Ga=new Map,this.za=dl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function JU(n,e,t=!0){const r=HA(n);let i;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=await UA(r,e,t,!0),i}async function ZU(n,e){const t=HA(n);await UA(t,e,!0,!1)}async function UA(n,e,t,r){const i=await _U(n.localStore,Kr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await eB(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&PA(n.remoteStore,i),u}async function eB(n,e,t,r,i){n.Ha=(g,w,S)=>async function(P,M,O,R){let D=M.view.Sa(O);D.ls&&(D=await OS(P.localStore,M.query,!1).then(({documents:L})=>M.view.Sa(L,D)));const B=R&&R.targetChanges.get(M.targetId),z=R&&R.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(D,P.isPrimaryClient,B,z);return GS(P,M.targetId,W.Ma),W.snapshot}(n,g,w,S);const o=await OS(n.localStore,e,!0),l=new KU(e,o.gs),u=l.Sa(o.documents),c=Ac.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=l.applyChanges(u,n.isPrimaryClient,c);GS(n,t,f.Ma);const m=new QU(e,t,l);return n.ka.set(e,m),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),f.snapshot}async function tB(n,e,t){const r=Ne(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(l=>!Wf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Kv(r.remoteStore,i.targetId),Ty(r,i.targetId)}).catch(xl)):(Ty(r,i.targetId),await vy(r.localStore,i.targetId,!0))}async function nB(n,e){const t=Ne(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Kv(t.remoteStore,r.targetId))}async function rB(n,e,t){const r=cB(n);try{const i=await function(l,u){const c=Ne(l),f=Lt.now(),m=u.reduce((S,x)=>S.add(x.key),Ue());let g,w;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let x=Mi(),P=Ue();return c.ds.getEntries(S,m).next(M=>{x=M,x.forEach((O,R)=>{R.isValidDocument()||(P=P.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,x)).next(M=>{g=M;const O=[];for(const R of u){const D=v4(R,g.get(R.key).overlayedDocument);D!=null&&O.push(new Bs(R.key,D,qb(D.value.mapValue),Cr.exists(!0)))}return c.mutationQueue.addMutationBatch(S,f,O,u)}).next(M=>{w=M;const O=M.applyToLocalDocumentSet(g,P);return c.documentOverlayCache.saveOverlays(S,M.batchId,O)})}).then(()=>({batchId:w.batchId,changes:iA(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,c){let f=l.Wa[l.currentUser.toKey()];f||(f=new Pt($e)),f=f.insert(u,c),l.Wa[l.currentUser.toKey()]=f}(r,i.batchId,t),await Rc(r,i.changes),await Xf(r.remoteStore)}catch(i){const o=Zv(i,"Failed to persist write");t.reject(o)}}async function BA(n,e){const t=Ne(n);try{const r=await gU(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Ka.get(o);l&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?Je(l.Ba):i.removedDocuments.size>0&&(Je(l.Ba),l.Ba=!1))}),await Rc(t,r,e)}catch(r){await xl(r)}}function HS(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&i.push(u.snapshot)}),function(l,u){const c=Ne(l);c.onlineState=u;let f=!1;c.queries.forEach((m,g)=>{for(const w of g.ta)w.sa(u)&&(f=!0)}),f&&e_(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iB(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),o=i&&i.key;if(o){let l=new Pt(xe.comparator);l=l.insert(o,cn.newNoDocument(o,ke.min()));const u=Ue().add(o),c=new Kf(ke.min(),new Map,new Pt($e),l,u);await BA(r,c),r.$a=r.$a.remove(o),r.Ka.delete(e),n_(r)}else await vy(r.localStore,e,!1).then(()=>Ty(r,e,t)).catch(xl)}async function sB(n,e){const t=Ne(n),r=e.batch.batchId;try{const i=await mU(t.localStore,e);$A(t,r,null),zA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Rc(t,i)}catch(i){await xl(i)}}async function oB(n,e,t){const r=Ne(n);try{const i=await function(l,u){const c=Ne(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(Je(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(r.localStore,e);$A(r,e,t),zA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Rc(r,i)}catch(i){await xl(i)}}function zA(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function $A(n,e,t){const r=Ne(n);let i=r.Wa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||WA(n,r)})}function WA(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Kv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),n_(n))}function GS(n,e,t){for(const r of t)r instanceof jA?(n.Ua.addReference(r.key,e),aB(n,r)):r instanceof FA?(ge(t_,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||WA(n,r.key)):Ae()}function aB(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ge(t_,"New document in limbo: "+t),n.Qa.add(r),n_(n))}function n_(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new xe(dt.fromString(e)),r=n.za.next();n.Ka.set(r,new YU(t)),n.$a=n.$a.insert(t,r),PA(n.remoteStore,new _s(Kr(jv(t.path)),r,"TargetPurposeLimboResolution",Bf.ae))}}async function Rc(n,e,t){const r=Ne(n),i=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,c)=>{l.push(r.Ha(c,e,t).then(f=>{var m;if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:(m=t?.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=Gv.Yi(c.targetId,f);o.push(g)}}))}),await Promise.all(l),r.La.p_(i),await async function(c,f){const m=Ne(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ee.forEach(f,w=>ee.forEach(w.Hi,S=>m.persistence.referenceDelegate.addReference(g,w.targetId,S)).next(()=>ee.forEach(w.Ji,S=>m.persistence.referenceDelegate.removeReference(g,w.targetId,S)))))}catch(g){if(!Il(g))throw g;ge(qv,"Failed to update sequence numbers: "+g)}for(const g of f){const w=g.targetId;if(!g.fromCache){const S=m.Ts.get(w),x=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(x);m.Ts=m.Ts.insert(w,P)}}}(r.localStore,o))}async function lB(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){ge(t_,"User change. New user:",e.toKey());const r=await IA(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new ve(te.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rc(t,r.Rs)}}function uB(n,e){const t=Ne(n),r=t.Ka.get(e);if(r&&r.Ba)return Ue().add(r.key);{let i=Ue();const o=t.qa.get(e);if(!o)return i;for(const l of o){const u=t.ka.get(l);i=i.unionWith(u.view.ba)}return i}}function HA(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iB.bind(null,e),e.La.p_=GU.bind(null,e.eventManager),e.La.Ja=qU.bind(null,e.eventManager),e}function cB(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oB.bind(null,e),e}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return pU(this.persistence,new dU,e.initialUser,this.serializer)}Xa(e){return new xA(Hv.ri,this.serializer)}Za(e){return new TU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class dB extends df{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Je(this.persistence.referenceDelegate instanceof uf);const r=this.persistence.referenceDelegate.garbageCollector;return new Y4(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new xA(r=>uf.ri(r,t),this.serializer)}}class Ey{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lB.bind(null,this.syncEngine),await $U(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HU}()}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),r=function(o){return new CU(o)}(e.databaseInfo);return function(o,l,u,c){return new RU(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,u){return new NU(r,i,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>HS(this.syncEngine,t,0),function(){return FS.D()?new FS:new EU}())}createSyncEngine(e,t){return function(i,o,l,u,c,f,m){const g=new XU(i,o,l,u,c,f);return m&&(g.ja=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Ne(i);ge(No,"RemoteStore shutting down."),o.W_.add(5),await Pc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ey.provider={build:()=>new Ey};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class hB{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=un.UNAUTHENTICATED,this.clientId=Vb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ge(Os,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ge(Os,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gg(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await IA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function qS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fB(n);ge(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>BS(e.remoteStore,i)),n._onlineComponents=e}async function fB(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Os,"Using user provided OfflineComponentProvider");try{await gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;al("Error using user provided cache. Falling back to memory cache: "+t),await gg(n,new df)}}else ge(Os,"Using default OfflineComponentProvider"),await gg(n,new dB(void 0));return n._offlineComponents}async function qA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Os,"Using user provided OnlineComponentProvider"),await qS(n,n._uninitializedComponentsProvider._online)):(ge(Os,"Using default OnlineComponentProvider"),await qS(n,new Ey))),n._onlineComponents}function pB(n){return qA(n).then(e=>e.syncEngine)}async function KA(n){const e=await qA(n),t=e.eventManager;return t.onListen=JU.bind(null,e.syncEngine),t.onUnlisten=tB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nB.bind(null,e.syncEngine),t}function mB(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,f){const m=new GA({next:w=>{m.su(),l.enqueueAndForget(()=>OA(o,g));const S=w.docs.has(u);!S&&w.fromCache?f.reject(new ve(te.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&c&&c.source==="server"?f.reject(new ve(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),g=new VA(jv(u.path),m,{includeMetadataChanges:!0,Ta:!0});return LA(o,g)}(await KA(n),n.asyncQueue,e,t,r)),r.promise}function gB(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,f){const m=new GA({next:w=>{m.su(),l.enqueueAndForget(()=>OA(o,g)),w.fromCache&&c.source==="server"?f.reject(new ve(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),g=new VA(u,m,{includeMetadataChanges:!0,Ta:!0});return LA(o,g)}(await KA(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n,e,t){if(!t)throw new ve(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yB(n,e,t,r){if(e===!0&&r===!0)throw new ve(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QS(n){if(!xe.isDocumentKey(n))throw new ve(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YS(n){if(xe.isDocumentKey(n))throw new ve(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function Li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new ve(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firestore.googleapis.com",XS=!0;class JS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XA,this.ssl=XS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:XS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K4)throw new ve(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new IF;switch(r.type){case"firstParty":return new PF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=KS.get(t);r&&(ge("ComponentProvider","Removing Datastore"),KS.delete(t),r.terminate())}(this),Promise.resolve()}}function vB(n,e,t,r={}){var i;const o=(n=Li(n,Zf))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==XA&&o.host!==u&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!Ps(c,l)&&(n._setSettings(c),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=un.MOCK_USER;else{f=Pv(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ve(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new un(g)}n._authCredentials=new CF(new Ob(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bl(this.firestore,e,this._query)}}class Dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class xs extends bl{constructor(e,t,r){super(e,t,jv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new xe(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function Yr(n,e,...t){if(n=qt(n),YA("collection","path",e),n instanceof Zf){const r=dt.fromString(e,...t);return YS(r),new xs(n,null,r)}{if(!(n instanceof Dn||n instanceof xs))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return YS(r),new xs(n.firestore,null,r)}}function hf(n,e,...t){if(n=qt(n),arguments.length===1&&(e=Vb.newId()),YA("doc","path",e),n instanceof Zf){const r=dt.fromString(e,...t);return QS(r),new Dn(n,null,new xe(r))}{if(!(n instanceof Dn||n instanceof xs))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return QS(r),new Dn(n.firestore,n instanceof xs?n.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="AsyncQueue";class ex{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new bA(this,"async_queue_retry"),this.bu=()=>{const r=mg();r&&ge(ZS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=mg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=mg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new bi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Il(e))throw e;ge(ZS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Di("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Jv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&Ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Al extends Zf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ex,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ex(e),this._firestoreClient=void 0,await e}}}function r_(n,e){const t=typeof n=="object"?n:Uf(),r=typeof n=="string"?n:tf,i=Ic(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=bv("firestore");o&&vB(i,...o)}return i}function i_(n){if(n._terminated)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_B(n),n._firestoreClient}function _B(n){var e,t,r;const i=n._freezeSettings(),o=function(u,c,f,m){return new $F(u,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,QA(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new hB(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const c=u?._online.build();return{_offline:u?._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fl(tn.fromBase64String(e))}catch(t){throw new ve(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fl(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=/^__.*__$/;class TB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new bc(e,this.data,t,this.fieldTransforms)}}class JA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class l_{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new l_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ff(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(ZA(this.Lu)&&wB.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class EB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qf(e)}ju(e,t,r,i=!1){return new l_({Lu:e,methodName:t,zu:r,path:en.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u_(n){const e=n._freezeSettings(),t=Qf(n._databaseId);return new EB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SB(n,e,t,r,i,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,i);c_("Data must be an object, but it was:",l,r);const u=eP(r,l);let c,f;if(o.merge)c=new zn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const w=Sy(e,g,t);if(!l.contains(w))throw new ve(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nP(m,w)||m.push(w)}c=new zn(m),f=l.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=l.fieldTransforms;return new TB(new kn(u),c,f)}class tp extends s_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tp}}function xB(n,e,t,r){const i=n.ju(1,e,t);c_("Data must be an object, but it was:",i,r);const o=[],l=kn.empty();Us(r,(c,f)=>{const m=d_(e,c,t);f=qt(f);const g=i.Ku(m);if(f instanceof tp)o.push(m);else{const w=kc(f,g);w!=null&&(o.push(m),l.set(m,w))}});const u=new zn(o);return new JA(l,u,i.fieldTransforms)}function IB(n,e,t,r,i,o){const l=n.ju(1,e,t),u=[Sy(e,r,t)],c=[i];if(o.length%2!=0)throw new ve(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)u.push(Sy(e,o[w])),c.push(o[w+1]);const f=[],m=kn.empty();for(let w=u.length-1;w>=0;--w)if(!nP(f,u[w])){const S=u[w];let x=c[w];x=qt(x);const P=l.Ku(S);if(x instanceof tp)f.push(S);else{const M=kc(x,P);M!=null&&(f.push(S),m.set(S,M))}}const g=new zn(f);return new JA(m,g,l.fieldTransforms)}function CB(n,e,t,r=!1){return kc(t,n.ju(r?4:3,e))}function kc(n,e){if(tP(n=qt(n)))return c_("Unsupported field value:",e,n),eP(n,e);if(n instanceof s_)return function(r,i){if(!ZA(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const u of r){let c=kc(u,i.Uu(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Lt.fromDate(r);return{timestampValue:lf(i.serializer,o)}}if(r instanceof Lt){const o=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lf(i.serializer,o)}}if(r instanceof o_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fl)return{bytesValue:gA(i.serializer,r._byteString)};if(r instanceof Dn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$v(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof a_)return function(l,u){return{mapValue:{fields:{[Hb]:{stringValue:Gb},[nf]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Wu("VectorValues must only contain numeric values.");return Fv(u.serializer,f)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Jf(r)}`)}(n,e)}function eP(n,e){const t={};return Fb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(n,(r,i)=>{const o=kc(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function tP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof o_||n instanceof fl||n instanceof Dn||n instanceof s_||n instanceof a_)}function c_(n,e,t){if(!tP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Jf(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Sy(n,e,t){if((e=qt(e))instanceof ep)return e._internalPath;if(typeof e=="string")return d_(n,e);throw ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const bB=new RegExp("[~\\*/\\[\\]]");function d_(n,e,t){if(e.search(bB)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ep(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ff(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${r}`),l&&(c+=` in document ${i}`),c+=")"),new ve(te.INVALID_ARGUMENT,u+n+c)}function nP(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(h_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AB extends rP{data(){return super.data()}}function h_(n,e){return typeof e=="string"?d_(n,e):e instanceof ep?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}class RB extends f_{}function p_(n,e,...t){let r=[];e instanceof f_&&r.push(e),r=r.concat(t),function(o){const l=o.filter(c=>c instanceof g_).length,u=o.filter(c=>c instanceof np).length;if(l>1||l>0&&u>0)throw new ve(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class np extends RB{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new np(e,t,r)}_apply(e){const t=this._parse(e);return iP(e._query,t),new bl(e.firestore,e.converter,hy(e._query,t))}_parse(e){const t=u_(e.firestore);return function(o,l,u,c,f,m,g){let w;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ve(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){nx(g,m);const x=[];for(const P of g)x.push(tx(c,o,P));w={arrayValue:{values:x}}}else w=tx(c,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||nx(g,m),w=CB(u,l,g,m==="in"||m==="not-in");return At.create(f,m,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function m_(n,e,t){const r=e,i=h_("where",n);return np._create(i,r,t)}class g_ extends f_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new g_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const u=o.getFlattenedFilters();for(const c of u)iP(l,c),l=hy(l,c)}(e._query,t),new bl(e.firestore,e.converter,hy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function tx(n,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new ve(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eA(e)&&t.indexOf("/")!==-1)throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dt.fromString(t));if(!xe.isDocumentKey(r))throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yS(n,new xe(r))}if(t instanceof Dn)return yS(n,t._key);throw new ve(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function nx(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iP(n,e){const t=function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ve(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class kB{convertValue(e,t="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Us(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[nf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>xt(l.doubleValue));return new a_(o)}convertGeoPoint(e){return new o_(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$f(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);Je(EA(r));const i=new fc(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return i.isEqual(t)||Di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sP extends rP{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(h_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ph extends sP{data(e={}){return super.data(e)}}class DB{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ph(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>{const c=new Ph(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Fu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Ph(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Fu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:MB(u.type),doc:c,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(n){n=Li(n,Dn);const e=Li(n.firestore,Al);return mB(i_(e),n._key).then(t=>jB(e,n,t))}class oP extends kB{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}function Ai(n){n=Li(n,bl);const e=Li(n.firestore,Al),t=i_(e),r=new oP(e);return PB(n._query),gB(t,n._query).then(i=>new DB(e,r,n,i))}function OB(n,e,t,...r){n=Li(n,Dn);const i=Li(n.firestore,Al),o=u_(i);let l;return l=typeof(e=qt(e))=="string"||e instanceof ep?IB(o,"updateDoc",n._key,e,t,r):xB(o,"updateDoc",n._key,e),y_(i,[l.toMutation(n._key,Cr.exists(!0))])}function VB(n){return y_(Li(n.firestore,Al),[new Uv(n._key,Cr.none())])}function aP(n,e){const t=Li(n.firestore,Al),r=hf(n),i=NB(n.converter,e);return y_(t,[SB(u_(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}function y_(n,e){return function(r,i){const o=new bi;return r.asyncQueue.enqueueAndForget(async()=>rB(await pB(r),i,o)),o.promise}(i_(n),e)}function jB(n,e,t){const r=t.docs.get(e._key),i=new oP(n);return new sP(n,i,e._key,r,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Sl=i})(Fs),Rs(new ki("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Al(new bF(r.getProvider("auth-internal")),new RF(l,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ve(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(f.options.projectId,m)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),sr(oS,aS,e),sr(oS,aS,"esm2017")})();var FB="firebase",UB="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(FB,UB,"app");const BB={apiKey:"your-api-key",authDomain:"your-auth-domain",projectId:"your-project-id",storageBucket:"your-storage-bucket",messagingSenderId:"your-messaging-sender-id",appId:"your-app-id",measurementId:"your-measurement-id"},zB=Ff(BB),mh=r_(zB),$B=()=>{const[n,e]=K.useState(null),[t,r]=K.useState([]),[i,o]=K.useState(!0),[l,u]=K.useState(null),[c,f]=K.useState(!1),[m,g]=K.useState(""),[w,S]=K.useState(""),[x,P]=K.useState(null);K.useEffect(()=>{(async()=>{try{o(!0);const L=Yr(mh,"faqs"),A=(await Ai(L)).docs.map(b=>({id:b.id,...b.data()}));A.length===0?r([{id:"fallback1",question:"What types of art do you showcase?",answer:"We showcase a diverse range of art including paintings, sculptures, digital art, and photography from both established and emerging artists."},{id:"fallback2",question:"How can I purchase artwork?",answer:"You can purchase artwork directly through our website by adding items to your cart and proceeding to checkout. We accept major credit cards and PayPal."},{id:"fallback3",question:"Do you ship internationally?",answer:"Yes, we ship to most countries worldwide. International shipping rates vary depending on the size and weight of the artwork and the destination country."}]):r(A),o(!1)}catch(L){console.error("Error fetching FAQs:",L),r([{id:"fallback1",question:"What types of art do you showcase?",answer:"We showcase a diverse range of art including paintings, sculptures, digital art, and photography from both established and emerging artists."},{id:"fallback2",question:"How can I purchase artwork?",answer:"You can purchase artwork directly through our website by adding items to your cart and proceeding to checkout. We accept major credit cards and PayPal."},{id:"fallback3",question:"Do you ship internationally?",answer:"Yes, we ship to most countries worldwide. International shipping rates vary depending on the size and weight of the artwork and the destination country."}]),u("Failed to load FAQs from database. Showing sample questions instead."),o(!1)}})()},[]);const M=W=>{e(n===W?null:W)},O=async W=>{if(W.preventDefault(),!(!m||!w))try{const L=await aP(Yr(mh,"faqs"),{question:m,answer:w,createdAt:new Date});r([...t,{id:L.id,question:m,answer:w}]),g(""),S("")}catch(L){console.error("Error adding FAQ:",L),u("Failed to add new FAQ. Please try again.")}},R=async W=>{try{await VB(hf(mh,"faqs",W)),r(t.filter(L=>L.id!==W))}catch(L){console.error("Error deleting FAQ:",L),u("Failed to delete FAQ. Please try again.")}},D=W=>{P(W.id),g(W.question),S(W.answer)},B=async W=>{if(W.preventDefault(),!(!x||!m||!w))try{await OB(hf(mh,"faqs",x),{question:m,answer:w,updatedAt:new Date}),r(t.map(L=>L.id===x?{...L,question:m,answer:w}:L)),P(null),g(""),S("")}catch(L){console.error("Error updating FAQ:",L),u("Failed to update FAQ. Please try again.")}},z=()=>{f(!c)};return T.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"white",color:"black"},children:[T.jsxs("header",{style:{padding:"3rem 1.5rem",textAlign:"center"},children:[T.jsx("span",{style:{textTransform:"uppercase",fontSize:"0.875rem",fontWeight:"500",letterSpacing:"0.05em"},children:"FAQ's"}),T.jsx("h1",{style:{fontSize:"2.25rem",fontWeight:"bold",marginTop:"0.5rem"},children:"Frequently Asked Questions"}),T.jsx("button",{onClick:z,style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#e5e7eb",color:"#4b5563",borderRadius:"0.375rem",border:"none",cursor:"pointer"},children:c?"Hide Admin Panel":"Admin Panel"})]}),l&&T.jsxs("div",{style:{backgroundColor:"#fee2e2",border:"1px solid #f87171",color:"#b91c1c",padding:"0.75rem 1rem",borderRadius:"0.375rem",margin:"0 1.5rem 1.5rem",position:"relative"},children:[l,T.jsx("button",{style:{float:"right",fontWeight:"bold",border:"none",background:"none",cursor:"pointer"},onClick:()=>u(null),children:""})]}),c&&T.jsxs("div",{style:{padding:"1.5rem",margin:"0 1.5rem 2rem",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:[T.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"1rem"},children:x?"Edit FAQ":"Add New FAQ"}),T.jsxs("form",{onSubmit:x?B:O,children:[T.jsxs("div",{style:{marginBottom:"1rem"},children:[T.jsx("label",{style:{display:"block",color:"#4b5563",marginBottom:"0.5rem"},children:"Question:"}),T.jsx("input",{type:"text",value:m,onChange:W=>g(W.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.25rem"},required:!0})]}),T.jsxs("div",{style:{marginBottom:"1rem"},children:[T.jsx("label",{style:{display:"block",color:"#4b5563",marginBottom:"0.5rem"},children:"Answer:"}),T.jsx("textarea",{value:w,onChange:W=>S(W.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.25rem",height:"6rem"},required:!0})]}),T.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[T.jsx("button",{type:"submit",style:{backgroundColor:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:x?"Update FAQ":"Add FAQ"}),x&&T.jsx("button",{type:"button",onClick:()=>{P(null),g(""),S("")},style:{backgroundColor:"#6b7280",color:"white",padding:"0.5rem 1rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Cancel"})]})]})]}),T.jsx("main",{style:{padding:"0 1.5rem",flexGrow:1},children:i?T.jsx("div",{style:{textAlign:"center",padding:"2.5rem 0"},children:T.jsx("p",{children:"Loading FAQs..."})}):T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.length===0?T.jsx("p",{style:{textAlign:"center",color:"#6b7280",padding:"2.5rem 0"},children:"No FAQs available."}):t.map((W,L)=>T.jsxs("div",{style:{borderBottom:"1px solid #e5e7eb",paddingBottom:"1rem",color:n===L?"#1f2937":"#6b7280"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[T.jsxs("button",{style:{display:"flex",justifyContent:"space-between",width:"100%",fontSize:"1.125rem",fontWeight:"500",textAlign:"left",background:"none",border:"none",padding:"0.5rem 0",cursor:"pointer"},onClick:()=>M(L),children:[T.jsx("span",{children:W.question}),T.jsx("span",{style:{transform:n===L?"rotate(90deg)":"rotate(0)",transition:"transform 0.3s ease"},children:n===L?"":"+"})]}),c&&T.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginLeft:"1rem"},children:[T.jsx("button",{onClick:()=>D(W),style:{color:"#3b82f6",background:"none",border:"none",cursor:"pointer"},children:"Edit"}),T.jsx("button",{onClick:()=>R(W.id),style:{color:"#ef4444",background:"none",border:"none",cursor:"pointer"},children:"Delete"})]})]}),n===L&&T.jsx("div",{style:{marginTop:"0.5rem"},children:T.jsx("p",{style:{fontSize:"0.875rem"},children:W.answer})})]},W.id||L))})}),T.jsx("footer",{style:{backgroundColor:"black",color:"white",padding:"2rem 1.5rem"},children:T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[T.jsxs("div",{children:[T.jsx("h3",{style:{fontWeight:"600",fontSize:"1.125rem"},children:"Artversnght"}),T.jsx("p",{style:{marginTop:"0.5rem"},children:"Art project, Gallery, Publishing"}),T.jsx("p",{children:"3891 Ranchview Dr. Richardson, California 62339"})]}),T.jsxs("div",{children:[T.jsx("h4",{style:{fontWeight:"600"},children:"About Us"}),T.jsxs("ul",{style:{marginTop:"0.5rem",lineHeight:"1.6"},children:[T.jsx("li",{children:"Careers"}),T.jsx("li",{children:"Services"}),T.jsx("li",{children:"Project"})]})]})]})})]})},WB=()=>T.jsxs("div",{style:yg.container,children:[T.jsx("h2",{style:yg.title,children:"Art Gallery Virtual Tour"}),T.jsx("iframe",{style:yg.iframe,src:"https://www.google.com/maps/embed?pb=!4v1739352433032!6m8!1m7!1s9c7ir7nppKPJgtHHhIf_vw!2m2!1d48.8599720182624!2d2.326003137199185!3f230.9652871251002!4f0!5f0.7820865974627469",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]}),yg={container:{backgroundColor:"black",color:"white",textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px"},iframe:{width:"80%",height:"500px",border:"0"}},HB="modulepreload",GB=function(n,e){return new URL(n,e).href},rx={},qB=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const l=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");i=Promise.allSettled(t.map(f=>{if(f=GB(f,r),f in rx)return;rx[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(!!r)for(let x=l.length-1;x>=0;x--){const P=l[x];if(P.href===f&&(!m||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${g}`))return;const S=document.createElement("link");if(S.rel=m?"stylesheet":HB,m||(S.as="script"),S.crossOrigin="",S.href=f,c&&S.setAttribute("nonce",c),document.head.appendChild(S),m)return new Promise((x,P)=>{S.addEventListener("load",x),S.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var ix={};const sx="@firebase/database",ox="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lP="";function KB(n){lP=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Zt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:uc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Fi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QB(e)}}catch{}return new YB},bo=uP("localStorage"),XB=uP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new jf("@firebase/database"),JB=function(){let n=1;return function(){return n++}}(),cP=function(n){const e=hj(n),t=new aj;t.update(e);const r=t.digest();return Cv.encodeByteArray(r)},Nc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Nc.apply(null,r):typeof r=="object"?e+=Zt(r):e+=r,e+=" "}return e};let Qu=null,ax=!0;const ZB=function(n,e){ue(!0,"Can't turn on custom loggers persistently."),Za.logLevel=Ve.VERBOSE,Qu=Za.log.bind(Za)},dn=function(...n){if(ax===!0&&(ax=!1,Qu===null&&XB.get("logging_enabled")===!0&&ZB()),Qu){const e=Nc.apply(null,n);Qu(e)}},Dc=function(n){return function(...e){dn(n,...e)}},xy=function(...n){const e="FIREBASE INTERNAL ERROR: "+Nc(...n);Za.error(e)},Oi=function(...n){const e=`FIREBASE FATAL ERROR: ${Nc(...n)}`;throw Za.error(e),new Error(e)},$n=function(...n){const e="FIREBASE WARNING: "+Nc(...n);Za.warn(e)},e3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},dP=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},t3=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},pl="[MIN_NAME]",Do="[MAX_NAME]",Pl=function(n,e){if(n===e)return 0;if(n===pl||e===Do)return-1;if(e===pl||n===Do)return 1;{const t=lx(n),r=lx(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},n3=function(n,e){return n===e?0:n<e?-1:1},Ru=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Zt(e))},v_=function(n){if(typeof n!="object"||n===null)return Zt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Zt(e[r]),t+=":",t+=v_(n[e[r]]);return t+="}",t},hP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const fP=function(n){ue(!dP(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,o,l,u,c;n===0?(o=0,l=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=u+r,l=Math.round(n*Math.pow(2,t-u)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const f=[];for(c=t;c;c-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(c=e;c;c-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(i?1:0),f.reverse();const m=f.join("");let g="";for(c=0;c<64;c+=8){let w=parseInt(m.substr(c,8),2).toString(16);w.length===1&&(w="0"+w),g=g+w}return g.toLowerCase()},r3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},i3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},s3=new RegExp("^-?(0*)\\d{1,10}$"),o3=-2147483648,a3=2147483647,lx=function(n){if(s3.test(n)){const e=Number(n);if(e>=o3&&e<=a3)return e}return null},Mc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw $n("Exception was thrown by user callback.",t),e},Math.floor(0))}},l3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,nr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(e)}}class Rh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="5",pP="v",mP="s",gP="r",yP="f",vP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_P="ls",wP="p",Iy="ac",TP="websocket",EP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t,r,i,o=!1,l="",u=!1,c=!1,f=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function d3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function xP(n,e,t){ue(typeof e=="string","typeof type must == string"),ue(typeof t=="object","typeof params must == object");let r;if(e===TP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===EP)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);d3(n)&&(t.ns=n.namespace);const i=[];return or(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.counters_={}}incrementCounter(e,t=1){Fi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return zV(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg={},_g={};function w_(n){const e=n.toString();return vg[e]||(vg[e]=new h3),vg[e]}function f3(n,e){const t=n.toString();return _g[t]||(_g[t]=e()),_g[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="start",m3="close",g3="pLPCommand",y3="pRTLPCB",IP="id",CP="pw",bP="ser",v3="cb",_3="seg",w3="ts",T3="d",E3="dframe",AP=1870,PP=30,S3=AP-PP,x3=25e3,I3=3e4;class Ka{constructor(e,t,r,i,o,l,u){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dc(e),this.stats_=w_(t),this.urlFn=c=>(this.appCheckToken&&(c[Iy]=this.appCheckToken),xP(t,EP,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new p3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(I3)),t3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new T_((...o)=>{const[l,u,c,f,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===ux)this.id=u,this.password=c;else if(l===m3)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[ux]="t",r[bP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[v3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[pP]=__,this.transportSessionId&&(r[mP]=this.transportSessionId),this.lastSessionId&&(r[_P]=this.lastSessionId),this.applicationId&&(r[wP]=this.applicationId),this.appCheckToken&&(r[Iy]=this.appCheckToken),typeof location<"u"&&location.hostname&&vP.test(location.hostname)&&(r[gP]=yP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ka.forceAllow_=!0}static forceDisallow(){Ka.forceDisallow_=!0}static isAvailable(){return Ka.forceAllow_?!0:!Ka.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!r3()&&!i3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=_b(t),i=hP(r,S3);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[E3]="t",r[IP]=e,r[CP]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class T_{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=JB(),window[g3+this.uniqueCallbackIdentifier]=e,window[y3+this.uniqueCallbackIdentifier]=t,this.myIFrame=T_.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){dn("frame writing exception"),u.stack&&dn(u.stack),dn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[IP]=this.myID,e[CP]=this.myPW,e[bP]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+PP+r.length<=AP;){const l=this.pendingSegs.shift();r=r+"&"+_3+i+"="+l.seg+"&"+w3+i+"="+l.ts+"&"+T3+i+"="+l.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(x3)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=16384,b3=45e3;let pf=null;typeof MozWebSocket<"u"?pf=MozWebSocket:typeof WebSocket<"u"&&(pf=WebSocket);class Sr{constructor(e,t,r,i,o,l,u){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dc(this.connId),this.stats_=w_(t),this.connURL=Sr.connectionURL_(t,l,u,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,o){const l={};return l[pP]=__,typeof location<"u"&&location.hostname&&vP.test(location.hostname)&&(l[gP]=yP),t&&(l[mP]=t),r&&(l[_P]=r),i&&(l[Iy]=i),o&&(l[wP]=o),xP(e,TP,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bo.set("previous_websocket_failure",!0);try{let r;JV(),this.mySock=new pf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Sr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&pf!==null&&!Sr.forceDisallow_}static previouslyFailed(){return bo.isInMemoryStorage||bo.get("previous_websocket_failure")===!0}markConnectionHealthy(){bo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=uc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=hP(t,C3);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(b3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Sr.responsesRequiredToBeHealthy=2;Sr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{static get ALL_TRANSPORTS(){return[Ka,Sr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Sr&&Sr.isAvailable();let r=t&&!Sr.previouslyFailed();if(e.webSocketOnly&&(t||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Sr];else{const i=this.transports_=[];for(const o of yc.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);yc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}yc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=6e4,P3=5e3,R3=10*1024,k3=100*1024,wg="t",cx="d",N3="s",dx="r",D3="e",hx="o",fx="a",px="n",mx="p",M3="h";class L3{constructor(e,t,r,i,o,l,u,c,f,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=c,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dc("c:"+this.id+":"),this.transportManager_=new yc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>R3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wg in e){const t=e[wg];t===fx?this.upgradeIfSecondaryHealthy_():t===dx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===hx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ru("t",e),r=Ru("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:px,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ru("t",e),r=Ru("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ru(wg,e);if(cx in e){const r=e[cx];if(t===M3){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===px){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===N3?this.onConnectionShutdown_(r):t===dx?this.onReset_(r):t===D3?xy("Server Error: "+r):t===hx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),__!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Yu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(A3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(P3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends kP{static getInstance(){return new mf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Rv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=32,yx=768;class ht{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function et(){return new ht("")}function qe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vs(n){return n.pieces_.length-n.pieceNum_}function ct(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ht(n.pieces_,e)}function NP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function O3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function DP(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function MP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ht(e,0)}function Gt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ht)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ht(t,0)}function We(n){return n.pieceNum_>=n.pieces_.length}function rr(n,e){const t=qe(n),r=qe(e);if(t===null)return e;if(t===r)return rr(ct(n),ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function LP(n,e){if(Vs(n)!==Vs(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function xr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vs(n)>Vs(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class V3{constructor(e,t){this.errorPrefix_=t,this.parts_=DP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vf(this.parts_[r]);OP(this)}}function j3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Vf(e),OP(n)}function F3(n){const e=n.parts_.pop();n.byteLength_-=Vf(e),n.parts_.length>0&&(n.byteLength_-=1)}function OP(n){if(n.byteLength_>yx)throw new Error(n.errorPrefix_+"has a key path longer than "+yx+" bytes ("+n.byteLength_+").");if(n.parts_.length>gx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gx+") or object contains a cycle "+Eo(n))}function Eo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends kP{static getInstance(){return new E_}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=1e3,U3=60*5*1e3,vx=30*1e3,B3=1.3,z3=3e4,$3="server_kill",_x=3;class Pi extends RP{constructor(e,t,r,i,o,l,u,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=Pi.nextPersistentConnectionId_++,this.log_=Dc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ku,this.maxReconnectDelay_=U3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");E_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,o={r:i,a:e,b:t};this.log_(Zt(o)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new Av,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?t.resolve(u):t.reject(u)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,i){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const c=u.d,f=u.s;Pi.warnOnListenWarnings_(c,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(f,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Fi(e,"w")){const r=ol(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||oj(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=sj(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const o=i.s,l=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";i&&(o.q=r,o.t=i),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{i&&setTimeout(()=>{i(l.s,l.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:i}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Zt(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):xy("Unrecognized action received from server: "+Zt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ku,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ku,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>z3&&(this.reconnectDelay_=ku),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*B3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Pi.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const c=function(){u?u.close():(l=!0,r())},f=function(g){ue(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:c,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,w]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=w&&w.token,u=new L3(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,S=>{$n(S+" ("+this.repoInfo_.toString()+")"),this.interrupt($3)},o))}catch(g){this.log_("Failed to get token: "+g),l||(this.repoInfo_.nodeAdmin&&$n(g),c())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ey(this.interruptReasons_)&&(this.reconnectDelay_=ku,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>v_(o)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new ht(e).toString();let i;if(this.listens.has(r)){const o=this.listens.get(r);i=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_x&&(this.reconnectDelay_=vx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_x&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+lP.replace(/\./g,"-")]=1,Rv()?e["framework.cordova"]=1:xb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mf.getInstance().currentlyOnline();return ey(this.interruptReasons_)&&e}}Pi.nextPersistentConnectionId_=0;Pi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ke(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ke(pl,e),i=new Ke(pl,t);return this.compare(r,i)!==0}minPost(){return Ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh;class VP extends rp{static get __EMPTY_NODE(){return gh}static set __EMPTY_NODE(e){gh=e}compare(e,t){return Pl(e.name,t.name)}isDefinedOn(e){throw Tl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ke.MIN}maxPost(){return new Ke(Do,gh)}makePost(e,t){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Ke(e,gh)}toString(){return".key"}}const el=new VP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ht{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Ht.RED,this.left=i??Nn.EMPTY_NODE,this.right=o??Nn.EMPTY_NODE}copy(e,t,r,i,o){return new Ht(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Nn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ht.RED=!0;Ht.BLACK=!1;class W3{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ht(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Nn{constructor(e,t=Nn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Nn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ht.BLACK,null,null))}remove(e){return new Nn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ht.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new yh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new yh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new yh(this.root_,null,this.comparator_,!0,e)}}Nn.EMPTY_NODE=new W3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n,e){return Pl(n.name,e.name)}function S_(n,e){return Pl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy;function G3(n){Cy=n}const jP=function(n){return typeof n=="number"?"number:"+fP(n):"string:"+n},FP=function(n){if(n.isLeafNode()){const e=n.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fi(e,".sv"),"Priority must be a string or number.")}else ue(n===Cy||n.isEmpty(),"priority of unexpected type.");ue(n===Cy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wx;class zt{static set __childrenNodeConstructor(e){wx=e}static get __childrenNodeConstructor(){return wx}constructor(e,t=zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FP(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return We(e)?this:qe(e)===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=qe(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ue(r!==".priority"||Vs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ct(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jP(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=fP(this.value_):e+=this.value_,this.lazyHash_=cP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zt.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=zt.VALUE_TYPE_ORDER.indexOf(t),o=zt.VALUE_TYPE_ORDER.indexOf(r);return ue(i>=0,"Unknown leaf type: "+t),ue(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UP,BP;function q3(n){UP=n}function K3(n){BP=n}class Q3 extends rp{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Pl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ke.MIN}maxPost(){return new Ke(Do,new zt("[PRIORITY-POST]",BP))}makePost(e,t){const r=UP(e);return new Ke(t,new zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const pn=new Q3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=Math.log(2);class X3{constructor(e){const t=o=>parseInt(Math.log(o)/Y3,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gf=function(n,e,t,r){n.sort(e);const i=function(c,f){const m=f-c;let g,w;if(m===0)return null;if(m===1)return g=n[c],w=t?t(g):g,new Ht(w,g.node,Ht.BLACK,null,null);{const S=parseInt(m/2,10)+c,x=i(c,S),P=i(S+1,f);return g=n[S],w=t?t(g):g,new Ht(w,g.node,Ht.BLACK,x,P)}},o=function(c){let f=null,m=null,g=n.length;const w=function(x,P){const M=g-x,O=g;g-=x;const R=i(M+1,O),D=n[M],B=t?t(D):D;S(new Ht(B,D.node,P,null,R))},S=function(x){f?(f.left=x,f=x):(m=x,f=x)};for(let x=0;x<c.count;++x){const P=c.nextBitIsOne(),M=Math.pow(2,c.count-(x+1));P?w(M,Ht.BLACK):(w(M,Ht.BLACK),w(M,Ht.RED))}return m},l=new X3(n.length),u=o(l);return new Nn(r||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg;const Va={};class Si{static get Default(){return ue(Va&&pn,"ChildrenNode.ts has not been loaded"),Tg=Tg||new Si({".priority":Va},{".priority":pn}),Tg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ol(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Nn?t:null}hasIndex(e){return Fi(this.indexSet_,e.toString())}addIndex(e,t){ue(e!==el,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Ke.Wrap);let l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let u;i?u=gf(r,e.getCompare()):u=Va;const c=e.toString(),f=Object.assign({},this.indexSet_);f[c]=e;const m=Object.assign({},this.indexes_);return m[c]=u,new Si(m,f)}addToIndexes(e,t){const r=Jh(this.indexes_,(i,o)=>{const l=ol(this.indexSet_,o);if(ue(l,"Missing index implementation for "+o),i===Va)if(l.isDefinedOn(e.node)){const u=[],c=t.getIterator(Ke.Wrap);let f=c.getNext();for(;f;)f.name!==e.name&&u.push(f),f=c.getNext();return u.push(e),gf(u,l.getCompare())}else return Va;else{const u=t.get(e.name);let c=i;return u&&(c=c.remove(new Ke(e.name,u))),c.insert(e,e.node)}});return new Si(r,this.indexSet_)}removeFromIndexes(e,t){const r=Jh(this.indexes_,i=>{if(i===Va)return i;{const o=t.get(e.name);return o?i.remove(new Ke(e.name,o)):i}});return new Si(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;class Xe{static get EMPTY_NODE(){return Nu||(Nu=new Xe(new Nn(S_),null,Si.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&FP(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nu}updatePriority(e){return this.children_.isEmpty()?this:new Xe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Nu:t}}getChild(e){const t=qe(e);return t===null?this:this.getImmediateChild(t).getChild(ct(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ue(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new Ke(e,t);let i,o;t.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=i.isEmpty()?Nu:this.priorityNode_;return new Xe(i,l,o)}}updateChild(e,t){const r=qe(e);if(r===null)return t;{ue(qe(e)!==".priority"||Vs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ct(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,o=!0;if(this.forEachChild(pn,(l,u)=>{t[l]=u.val(e),r++,o&&Xe.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):o=!1}),!e&&o&&i<2*r){const l=[];for(const u in t)l[u]=t[u];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jP(this.getPriority().val())+":"),this.forEachChild(pn,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":cP(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const o=i.getPredecessorKey(new Ke(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ke(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ke(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ke.Wrap);let o=i.peek();for(;o!=null&&t.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ke.Wrap);let o=i.peek();for(;o!=null&&t.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lc?-1:0}withIndex(e){if(e===el||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Xe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===el||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(pn),i=t.getIterator(pn);let o=r.getNext(),l=i.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=i.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===el?null:this.indexMap_.get(e.toString())}}Xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class J3 extends Xe{constructor(){super(new Nn(S_),Xe.EMPTY_NODE,Si.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xe.EMPTY_NODE}isEmpty(){return!1}}const Lc=new J3;Object.defineProperties(Ke,{MIN:{value:new Ke(pl,Xe.EMPTY_NODE)},MAX:{value:new Ke(Do,Lc)}});VP.__EMPTY_NODE=Xe.EMPTY_NODE;zt.__childrenNodeConstructor=Xe;G3(Lc);K3(Lc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=!0;function hn(n,e=null){if(n===null)return Xe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new zt(t,hn(e))}if(!(n instanceof Array)&&Z3){const t=[];let r=!1;if(or(n,(l,u)=>{if(l.substring(0,1)!=="."){const c=hn(u);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Ke(l,c)))}}),t.length===0)return Xe.EMPTY_NODE;const o=gf(t,H3,l=>l.name,S_);if(r){const l=gf(t,pn.getCompare());return new Xe(o,hn(e),new Si({".priority":l},{".priority":pn}))}else return new Xe(o,hn(e),Si.Default)}else{let t=Xe.EMPTY_NODE;return or(n,(r,i)=>{if(Fi(n,r)&&r.substring(0,1)!=="."){const o=hn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(hn(e))}}q3(hn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez extends rp{constructor(e){super(),this.indexPath_=e,ue(!We(e)&&qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Pl(e.name,t.name):o}makePost(e,t){const r=hn(e),i=Xe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ke(t,i)}maxPost(){const e=Xe.EMPTY_NODE.updateChild(this.indexPath_,Lc);return new Ke(Do,e)}toString(){return DP(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz extends rp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Pl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ke.MIN}maxPost(){return Ke.MAX}makePost(e,t){const r=hn(e);return new Ke(t,r)}toString(){return".value"}}const nz=new tz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(n){return{type:"value",snapshotNode:n}}function iz(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sz(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Tx(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function oz(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pl}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Do}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pn}copy(){const e=new x_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ex(n){const e={};if(n.isDefault())return e;let t;if(n.index_===pn?t="$priority":n.index_===nz?t="$value":n.index_===el?t="$key":(ue(n.index_ instanceof ez,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Zt(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Zt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Zt(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Zt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Sx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==pn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends RP{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Dc("p:rest:"),this.listens_={}}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=yf.getListenId_(e,r),u={};this.listens_[l]=u;const c=Ex(e._queryParams);this.restRequest_(o+".json",c,(f,m)=>{let g=m;if(f===404&&(g=null,f=null),f===null&&this.onDataUpdate_(o,g,!1,r),ol(this.listens_,l)===u){let w;f?f===401?w="permission_denied":w="rest_error:"+f:w="ok",i(w,null)}})}unlisten(e,t){const r=yf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Ex(e._queryParams),r=e._path.toString(),i=new Av;return this.restRequest_(r+".json",t,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),i.resolve(u)):i.reject(new Error(u))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+El(t);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=uc(u.responseText)}catch{$n("Failed to parse JSON response for "+l+": "+u.responseText)}r(null,c)}else u.status!==401&&u.status!==404&&$n("Got unsuccessful REST response for "+l+" Status: "+u.status),r(u.status);r=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.rootNode_=Xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){return{value:null,children:new Map}}function zP(n,e,t){if(We(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=qe(e);n.children.has(r)||n.children.set(r,vf());const i=n.children.get(r);e=ct(e),zP(i,e,t)}}function by(n,e,t){n.value!==null?t(e,n.value):lz(n,(r,i)=>{const o=new ht(e.toString()+"/"+r);by(i,o,t)})}function lz(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&or(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=10*1e3,cz=30*1e3,dz=5*60*1e3;class hz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new uz(e);const r=xx+(cz-xx)*Math.random();Yu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;or(e,(i,o)=>{o>0&&Fi(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Yu(this.reportStats_.bind(this),Math.floor(Math.random()*2*dz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(zr||(zr={}));function $P(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function WP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function HP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zr.ACK_USER_WRITE,this.source=$P()}operationForChild(e){if(We(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ht(e));return new _f(et(),t,this.revert)}}else return ue(qe(this.path)===e,"operationForChild called for unrelated child."),new _f(ct(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zr.OVERWRITE}operationForChild(e){return We(this.path)?new Mo(this.source,et(),this.snap.getImmediateChild(e)):new Mo(this.source,ct(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zr.MERGE}operationForChild(e){if(We(this.path)){const t=this.children.subtree(new ht(e));return t.isEmpty()?null:t.value?new Mo(this.source,et(),t.value):new vc(this.source,et(),t)}else return ue(qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vc(this.source,ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(We(e))return this.isFullyInitialized()&&!this.filtered_;const t=qe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function fz(n,e,t,r){const i=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(oz(l.childName,l.snapshotNode))}),Du(n,i,"child_removed",e,r,t),Du(n,i,"child_added",e,r,t),Du(n,i,"child_moved",o,r,t),Du(n,i,"child_changed",e,r,t),Du(n,i,"value",e,r,t),i}function Du(n,e,t,r,i,o){const l=r.filter(u=>u.type===t);l.sort((u,c)=>mz(n,u,c)),l.forEach(u=>{const c=pz(n,u,o);i.forEach(f=>{f.respondsTo(u.type)&&e.push(f.createEvent(c,n.query_))})})}function pz(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function mz(n,e,t){if(e.childName==null||t.childName==null)throw Tl("Should only compare child_ events.");const r=new Ke(e.childName,e.snapshotNode),i=new Ke(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(n,e){return{eventCache:n,serverCache:e}}function Xu(n,e,t,r){return GP(new I_(e,t,r),n.serverCache)}function qP(n,e,t,r){return GP(n.eventCache,new I_(e,t,r))}function Ay(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg;const gz=()=>(Eg||(Eg=new Nn(n3)),Eg);class ut{static fromObject(e){let t=new ut(null);return or(e,(r,i)=>{t=t.set(new ht(r),i)}),t}constructor(e,t=gz()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:et(),value:this.value};if(We(e))return null;{const r=qe(e),i=this.children.get(r);if(i!==null){const o=i.findRootMostMatchingPathAndValue(ct(e),t);return o!=null?{path:Gt(new ht(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(We(e))return this;{const t=qe(e),r=this.children.get(t);return r!==null?r.subtree(ct(e)):new ut(null)}}set(e,t){if(We(e))return new ut(t,this.children);{const r=qe(e),o=(this.children.get(r)||new ut(null)).set(ct(e),t),l=this.children.insert(r,o);return new ut(this.value,l)}}remove(e){if(We(e))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const t=qe(e),r=this.children.get(t);if(r){const i=r.remove(ct(e));let o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new ut(null):new ut(this.value,o)}else return this}}get(e){if(We(e))return this.value;{const t=qe(e),r=this.children.get(t);return r?r.get(ct(e)):null}}setTree(e,t){if(We(e))return t;{const r=qe(e),o=(this.children.get(r)||new ut(null)).setTree(ct(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new ut(this.value,l)}}fold(e){return this.fold_(et(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Gt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,et(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(We(e))return null;{const o=qe(e),l=this.children.get(o);return l?l.findOnPath_(ct(e),Gt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,et(),t)}foreachOnPath_(e,t,r){if(We(e))return this;{this.value&&r(t,this.value);const i=qe(e),o=this.children.get(i);return o?o.foreachOnPath_(ct(e),Gt(t,i),r):new ut(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Gt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.writeTree_=e}static empty(){return new br(new ut(null))}}function Ju(n,e,t){if(We(e))return new br(new ut(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let o=r.value;const l=rr(i,e);return o=o.updateChild(l,t),new br(n.writeTree_.set(i,o))}else{const i=new ut(t),o=n.writeTree_.setTree(e,i);return new br(o)}}}function Ix(n,e,t){let r=n;return or(t,(i,o)=>{r=Ju(r,Gt(e,i),o)}),r}function Cx(n,e){if(We(e))return br.empty();{const t=n.writeTree_.setTree(e,new ut(null));return new br(t)}}function Py(n,e){return Bo(n,e)!=null}function Bo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(rr(t.path,e)):null}function bx(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(pn,(r,i)=>{e.push(new Ke(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ke(r,i.value))}),e}function Is(n,e){if(We(e))return n;{const t=Bo(n,e);return t!=null?new br(new ut(t)):new br(n.writeTree_.subtree(e))}}function Ry(n){return n.writeTree_.isEmpty()}function ml(n,e){return KP(et(),n.writeTree_,e)}function KP(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(ue(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=KP(Gt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Gt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(n,e){return eR(e,n)}function yz(n,e,t,r,i){ue(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ju(n.visibleWrites,e,t)),n.lastWriteId=r}function vz(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function _z(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);ue(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=t&&wz(u,r.path)?i=!1:xr(r.path,u.path)&&(o=!0)),l--}if(i){if(o)return Tz(n),!0;if(r.snap)n.visibleWrites=Cx(n.visibleWrites,r.path);else{const u=r.children;or(u,c=>{n.visibleWrites=Cx(n.visibleWrites,Gt(r.path,c))})}return!0}else return!1}function wz(n,e){if(n.snap)return xr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xr(Gt(n.path,t),e))return!0;return!1}function Tz(n){n.visibleWrites=YP(n.allWrites,Ez,et()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Ez(n){return n.visible}function YP(n,e,t){let r=br.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let u;if(o.snap)xr(t,l)?(u=rr(t,l),r=Ju(r,u,o.snap)):xr(l,t)&&(u=rr(l,t),r=Ju(r,et(),o.snap.getChild(u)));else if(o.children){if(xr(t,l))u=rr(t,l),r=Ix(r,u,o.children);else if(xr(l,t))if(u=rr(l,t),We(u))r=Ix(r,et(),o.children);else{const c=ol(o.children,qe(u));if(c){const f=c.getChild(ct(u));r=Ju(r,et(),f)}}}else throw Tl("WriteRecord should have .snap or .children")}}return r}function XP(n,e,t,r,i){if(!r&&!i){const o=Bo(n.visibleWrites,e);if(o!=null)return o;{const l=Is(n.visibleWrites,e);if(Ry(l))return t;if(t==null&&!Py(l,et()))return null;{const u=t||Xe.EMPTY_NODE;return ml(l,u)}}}else{const o=Is(n.visibleWrites,e);if(!i&&Ry(o))return t;if(!i&&t==null&&!Py(o,et()))return null;{const l=function(f){return(f.visible||i)&&(!r||!~r.indexOf(f.writeId))&&(xr(f.path,e)||xr(e,f.path))},u=YP(n.allWrites,l,e),c=t||Xe.EMPTY_NODE;return ml(u,c)}}}function Sz(n,e,t){let r=Xe.EMPTY_NODE;const i=Bo(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Is(n.visibleWrites,e);return t.forEachChild(pn,(l,u)=>{const c=ml(Is(o,new ht(l)),u);r=r.updateImmediateChild(l,c)}),bx(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=Is(n.visibleWrites,e);return bx(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function xz(n,e,t,r,i){ue(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Gt(e,t);if(Py(n.visibleWrites,o))return null;{const l=Is(n.visibleWrites,o);return Ry(l)?i.getChild(t):ml(l,i.getChild(t))}}function Iz(n,e,t,r){const i=Gt(e,t),o=Bo(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=Is(n.visibleWrites,i);return ml(l,r.getNode().getImmediateChild(t))}else return null}function Cz(n,e){return Bo(n.visibleWrites,e)}function bz(n,e,t,r,i,o,l){let u;const c=Is(n.visibleWrites,e),f=Bo(c,et());if(f!=null)u=f;else if(t!=null)u=ml(c,t);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const m=[],g=l.getCompare(),w=o?u.getReverseIteratorFrom(r,l):u.getIteratorFrom(r,l);let S=w.getNext();for(;S&&m.length<i;)g(S,r)!==0&&m.push(S),S=w.getNext();return m}else return[]}function Az(){return{visibleWrites:br.empty(),allWrites:[],lastWriteId:-1}}function ky(n,e,t,r){return XP(n.writeTree,n.treePath,e,t,r)}function JP(n,e){return Sz(n.writeTree,n.treePath,e)}function Ax(n,e,t,r){return xz(n.writeTree,n.treePath,e,t,r)}function wf(n,e){return Cz(n.writeTree,Gt(n.treePath,e))}function Pz(n,e,t,r,i,o){return bz(n.writeTree,n.treePath,e,t,r,i,o)}function C_(n,e,t){return Iz(n.writeTree,n.treePath,e,t)}function ZP(n,e){return eR(Gt(n.treePath,e),n.writeTree)}function eR(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ue(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ue(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Tx(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,sz(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,iz(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Tx(r,e.snapshotNode,i.oldSnap));else throw Tl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const tR=new kz;class b_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new I_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return C_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Lo(this.viewCache_),o=Pz(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}}function Nz(n,e){ue(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Dz(n,e,t,r,i){const o=new Rz;let l,u;if(t.type===zr.OVERWRITE){const f=t;f.source.fromUser?l=Ny(n,e,f.path,f.snap,r,i,o):(ue(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered()&&!We(f.path),l=Tf(n,e,f.path,f.snap,r,i,u,o))}else if(t.type===zr.MERGE){const f=t;f.source.fromUser?l=Lz(n,e,f.path,f.children,r,i,o):(ue(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered(),l=Dy(n,e,f.path,f.children,r,i,u,o))}else if(t.type===zr.ACK_USER_WRITE){const f=t;f.revert?l=jz(n,e,f.path,r,i,o):l=Oz(n,e,f.path,f.affectedTree,r,i,o)}else if(t.type===zr.LISTEN_COMPLETE)l=Vz(n,e,t.path,r,o);else throw Tl("Unknown operation type: "+t.type);const c=o.getChanges();return Mz(e,l,c),{viewCache:l,changes:c}}function Mz(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ay(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(rz(Ay(e)))}}function nR(n,e,t,r,i,o){const l=e.eventCache;if(wf(r,t)!=null)return e;{let u,c;if(We(t))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Lo(e),m=f instanceof Xe?f:Xe.EMPTY_NODE,g=JP(r,m);u=n.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const f=ky(r,Lo(e));u=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=qe(t);if(f===".priority"){ue(Vs(t)===1,"Can't have a priority with additional path components");const m=l.getNode();c=e.serverCache.getNode();const g=Ax(r,t,m,c);g!=null?u=n.filter.updatePriority(m,g):u=l.getNode()}else{const m=ct(t);let g;if(l.isCompleteForChild(f)){c=e.serverCache.getNode();const w=Ax(r,t,l.getNode(),c);w!=null?g=l.getNode().getImmediateChild(f).updateChild(m,w):g=l.getNode().getImmediateChild(f)}else g=C_(r,f,e.serverCache);g!=null?u=n.filter.updateChild(l.getNode(),f,g,m,i,o):u=l.getNode()}}return Xu(e,u,l.isFullyInitialized()||We(t),n.filter.filtersNodes())}}function Tf(n,e,t,r,i,o,l,u){const c=e.serverCache;let f;const m=l?n.filter:n.filter.getIndexedFilter();if(We(t))f=m.updateFullNode(c.getNode(),r,null);else if(m.filtersNodes()&&!c.isFiltered()){const S=c.getNode().updateChild(t,r);f=m.updateFullNode(c.getNode(),S,null)}else{const S=qe(t);if(!c.isCompleteForPath(t)&&Vs(t)>1)return e;const x=ct(t),M=c.getNode().getImmediateChild(S).updateChild(x,r);S===".priority"?f=m.updatePriority(c.getNode(),M):f=m.updateChild(c.getNode(),S,M,x,tR,null)}const g=qP(e,f,c.isFullyInitialized()||We(t),m.filtersNodes()),w=new b_(i,g,o);return nR(n,g,t,i,w,u)}function Ny(n,e,t,r,i,o,l){const u=e.eventCache;let c,f;const m=new b_(i,e,o);if(We(t))f=n.filter.updateFullNode(e.eventCache.getNode(),r,l),c=Xu(e,f,!0,n.filter.filtersNodes());else{const g=qe(t);if(g===".priority")f=n.filter.updatePriority(e.eventCache.getNode(),r),c=Xu(e,f,u.isFullyInitialized(),u.isFiltered());else{const w=ct(t),S=u.getNode().getImmediateChild(g);let x;if(We(w))x=r;else{const P=m.getCompleteChild(g);P!=null?NP(w)===".priority"&&P.getChild(MP(w)).isEmpty()?x=P:x=P.updateChild(w,r):x=Xe.EMPTY_NODE}if(S.equals(x))c=e;else{const P=n.filter.updateChild(u.getNode(),g,x,w,m,l);c=Xu(e,P,u.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function Px(n,e){return n.eventCache.isCompleteForChild(e)}function Lz(n,e,t,r,i,o,l){let u=e;return r.foreach((c,f)=>{const m=Gt(t,c);Px(e,qe(m))&&(u=Ny(n,u,m,f,i,o,l))}),r.foreach((c,f)=>{const m=Gt(t,c);Px(e,qe(m))||(u=Ny(n,u,m,f,i,o,l))}),u}function Rx(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Dy(n,e,t,r,i,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,f;We(t)?f=r:f=new ut(null).setTree(t,r);const m=e.serverCache.getNode();return f.children.inorderTraversal((g,w)=>{if(m.hasChild(g)){const S=e.serverCache.getNode().getImmediateChild(g),x=Rx(n,S,w);c=Tf(n,c,new ht(g),x,i,o,l,u)}}),f.children.inorderTraversal((g,w)=>{const S=!e.serverCache.isCompleteForChild(g)&&w.value===null;if(!m.hasChild(g)&&!S){const x=e.serverCache.getNode().getImmediateChild(g),P=Rx(n,x,w);c=Tf(n,c,new ht(g),P,i,o,l,u)}}),c}function Oz(n,e,t,r,i,o,l){if(wf(i,t)!=null)return e;const u=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(We(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Tf(n,e,t,c.getNode().getChild(t),i,o,u,l);if(We(t)){let f=new ut(null);return c.getNode().forEachChild(el,(m,g)=>{f=f.set(new ht(m),g)}),Dy(n,e,t,f,i,o,u,l)}else return e}else{let f=new ut(null);return r.foreach((m,g)=>{const w=Gt(t,m);c.isCompleteForPath(w)&&(f=f.set(m,c.getNode().getChild(w)))}),Dy(n,e,t,f,i,o,u,l)}}function Vz(n,e,t,r,i){const o=e.serverCache,l=qP(e,o.getNode(),o.isFullyInitialized()||We(t),o.isFiltered());return nR(n,l,t,r,tR,i)}function jz(n,e,t,r,i,o){let l;if(wf(r,t)!=null)return e;{const u=new b_(r,e,i),c=e.eventCache.getNode();let f;if(We(t)||qe(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=ky(r,Lo(e));else{const g=e.serverCache.getNode();ue(g instanceof Xe,"serverChildren would be complete if leaf node"),m=JP(r,g)}m=m,f=n.filter.updateFullNode(c,m,o)}else{const m=qe(t);let g=C_(r,m,e.serverCache);g==null&&e.serverCache.isCompleteForChild(m)&&(g=c.getImmediateChild(m)),g!=null?f=n.filter.updateChild(c,m,g,ct(t),u,o):e.eventCache.getNode().hasChild(m)?f=n.filter.updateChild(c,m,Xe.EMPTY_NODE,ct(t),u,o):f=c,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ky(r,Lo(e)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||wf(r,et())!=null,Xu(e,f,l,n.filter.filtersNodes())}}function Fz(n,e){const t=Lo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!We(e)&&!t.getImmediateChild(qe(e)).isEmpty())?t.getChild(e):null}function kx(n,e,t,r){e.type===zr.MERGE&&e.source.queryId!==null&&(ue(Lo(n.viewCache_),"We should always have a full cache before handling merges"),ue(Ay(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=Dz(n.processor_,i,e,t,r);return Nz(n.processor_,o.viewCache),ue(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Uz(n,o.changes,o.viewCache.eventCache.getNode())}function Uz(n,e,t,r){const i=n.eventRegistrations_;return fz(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nx;function Bz(n){ue(!Nx,"__referenceConstructor has already been defined"),Nx=n}function A_(n,e,t,r){const i=e.source.queryId;if(i!==null){const o=n.views.get(i);return ue(o!=null,"SyncTree gave us an op for an invalid query."),kx(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(kx(l,e,t,r));return o}}function P_(n,e){let t=null;for(const r of n.views.values())t=t||Fz(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dx;function zz(n){ue(!Dx,"__referenceConstructor has already been defined"),Dx=n}class Mx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ut(null),this.pendingWriteTree_=Az(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $z(n,e,t,r,i){return yz(n.pendingWriteTree_,e,t,r,i),i?sp(n,new Mo($P(),e,t)):[]}function Qa(n,e,t=!1){const r=vz(n.pendingWriteTree_,e);if(_z(n.pendingWriteTree_,e)){let o=new ut(null);return r.snap!=null?o=o.set(et(),!0):or(r.children,l=>{o=o.set(new ht(l),!0)}),sp(n,new _f(r.path,o,t))}else return[]}function ip(n,e,t){return sp(n,new Mo(WP(),e,t))}function Wz(n,e,t){const r=ut.fromObject(t);return sp(n,new vc(WP(),e,r))}function Hz(n,e,t,r){const i=oR(n,r);if(i!=null){const o=aR(i),l=o.path,u=o.queryId,c=rr(l,e),f=new Mo(HP(u),c,t);return lR(n,l,f)}else return[]}function Gz(n,e,t,r){const i=oR(n,r);if(i){const o=aR(i),l=o.path,u=o.queryId,c=rr(l,e),f=ut.fromObject(t),m=new vc(HP(u),c,f);return lR(n,l,m)}else return[]}function rR(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,u)=>{const c=rr(l,e),f=P_(u,c);if(f)return f});return XP(i,e,o,t,!0)}function sp(n,e){return iR(e,n.syncPointTree_,null,QP(n.pendingWriteTree_,et()))}function iR(n,e,t,r){if(We(n.path))return sR(n,e,t,r);{const i=e.get(et());t==null&&i!=null&&(t=P_(i,et()));let o=[];const l=qe(n.path),u=n.operationForChild(l),c=e.children.get(l);if(c&&u){const f=t?t.getImmediateChild(l):null,m=ZP(r,l);o=o.concat(iR(u,c,f,m))}return i&&(o=o.concat(A_(i,n,r,t))),o}}function sR(n,e,t,r){const i=e.get(et());t==null&&i!=null&&(t=P_(i,et()));let o=[];return e.children.inorderTraversal((l,u)=>{const c=t?t.getImmediateChild(l):null,f=ZP(r,l),m=n.operationForChild(l);m&&(o=o.concat(sR(m,u,c,f)))}),i&&(o=o.concat(A_(i,n,r,t))),o}function oR(n,e){return n.tagToQueryMap.get(e)}function aR(n){const e=n.indexOf("$");return ue(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ht(n.substr(0,e))}}function lR(n,e,t){const r=n.syncPointTree_.get(e);ue(r,"Missing sync point for query tag that we're tracking");const i=QP(n.pendingWriteTree_,e);return A_(r,t,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new R_(t)}node(){return this.node_}}class k_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gt(this.path_,e);return new k_(this.syncTree_,t)}node(){return rR(this.syncTree_,this.path_)}}const qz=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Lx=function(n,e,t){if(!n||typeof n!="object")return n;if(ue(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Kz(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Qz(n[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Kz=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ue(!1,"Unexpected server value: "+n)}},Qz=function(n,e,t){n.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ue(!1,"Unexpected increment value: "+r);const i=e.node();if(ue(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return typeof l!="number"?r:l+r},Yz=function(n,e,t,r){return N_(e,new k_(t,n),r)},Xz=function(n,e,t){return N_(n,new R_(e),t)};function N_(n,e,t){const r=n.getPriority().val(),i=Lx(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,u=Lx(l.getValue(),e,t);return u!==l.getValue()||i!==l.getPriority().val()?new zt(u,hn(i)):n}else{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new zt(i))),l.forEachChild(pn,(u,c)=>{const f=N_(c,e.getImmediateChild(u),t);f!==c&&(o=o.updateImmediateChild(u,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function M_(n,e){let t=e instanceof ht?e:new ht(e),r=n,i=qe(t);for(;i!==null;){const o=ol(r.node.children,i)||{children:{},childCount:0};r=new D_(i,r,o),t=ct(t),i=qe(t)}return r}function Rl(n){return n.node.value}function uR(n,e){n.node.value=e,My(n)}function cR(n){return n.node.childCount>0}function Jz(n){return Rl(n)===void 0&&!cR(n)}function op(n,e){or(n.node.children,(t,r)=>{e(new D_(t,n,r))})}function dR(n,e,t,r){t&&e(n),op(n,i=>{dR(i,e,!0)})}function Zz(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Oc(n){return new ht(n.parent===null?n.name:Oc(n.parent)+"/"+n.name)}function My(n){n.parent!==null&&e5(n.parent,n.name,n)}function e5(n,e,t){const r=Jz(t),i=Fi(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,My(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,My(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=/[\[\].#$\/\u0000-\u001F\u007F]/,n5=/[\[\].#$\u0000-\u001F\u007F]/,Sg=10*1024*1024,hR=function(n){return typeof n=="string"&&n.length!==0&&!t5.test(n)},r5=function(n){return typeof n=="string"&&n.length!==0&&!n5.test(n)},i5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),r5(n)},fR=function(n,e,t){const r=t instanceof ht?new V3(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Eo(r));if(typeof e=="function")throw new Error(n+"contains a function "+Eo(r)+" with contents = "+e.toString());if(dP(e))throw new Error(n+"contains "+e.toString()+" "+Eo(r));if(typeof e=="string"&&e.length>Sg/3&&Vf(e)>Sg)throw new Error(n+"contains a string greater than "+Sg+" utf8 bytes "+Eo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(or(e,(l,u)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!hR(l)))throw new Error(n+" contains an invalid key ("+l+") "+Eo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);j3(r,l),fR(n,u,r),F3(r)}),i&&o)throw new Error(n+' contains ".value" child '+Eo(r)+" in addition to actual children.")}},s5=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!i5(t))throw new Error(dj(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function a5(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();t!==null&&!LP(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function zo(n,e,t){a5(n,t),l5(n,r=>xr(r,e)||xr(e,r))}function l5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const o=i.path;e(o)?(u5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function u5(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Qu&&dn("event: "+t.toString()),Mc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="repo_interrupt",d5=25;class h5{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new o5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vf(),this.transactionQueueTree_=new D_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function f5(n,e,t){if(n.stats_=w_(n.repoInfo_),n.forceRestClient_||l3())n.server_=new yf(n.repoInfo_,(r,i,o,l)=>{Ox(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Vx(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pi(n.repoInfo_,e,(r,i,o,l)=>{Ox(n,r,i,o,l)},r=>{Vx(n,r)},r=>{m5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=f3(n.repoInfo_,()=>new hz(n.stats_,n.server_)),n.infoData_=new az,n.infoSyncTree_=new Mx({startListening:(r,i,o,l)=>{let u=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(u=ip(n.infoSyncTree_,r._path,c),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),L_(n,"connected",!1),n.serverSyncTree_=new Mx({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(u,c)=>{const f=l(u,c);zo(n.eventQueue_,r._path,f)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function p5(n){const t=n.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function pR(n){return qz({timestamp:p5(n)})}function Ox(n,e,t,r,i){n.dataUpdateCount++;const o=new ht(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const c=Jh(t,f=>hn(f));l=Gz(n.serverSyncTree_,o,c,i)}else{const c=hn(t);l=Hz(n.serverSyncTree_,o,c,i)}else if(r){const c=Jh(t,f=>hn(f));l=Wz(n.serverSyncTree_,o,c)}else{const c=hn(t);l=ip(n.serverSyncTree_,o,c)}let u=o;l.length>0&&(u=V_(n,o)),zo(n.eventQueue_,u,l)}function Vx(n,e){L_(n,"connected",e),e===!1&&y5(n)}function m5(n,e){or(e,(t,r)=>{L_(n,t,r)})}function L_(n,e,t){const r=new ht("/.info/"+e),i=hn(t);n.infoData_.updateSnapshot(r,i);const o=ip(n.infoSyncTree_,r,i);zo(n.eventQueue_,r,o)}function g5(n){return n.nextWriteId_++}function y5(n){mR(n,"onDisconnectEvents");const e=pR(n),t=vf();by(n.onDisconnect_,et(),(i,o)=>{const l=Yz(i,o,n.serverSyncTree_,e);zP(t,i,l)});let r=[];by(t,et(),(i,o)=>{r=r.concat(ip(n.serverSyncTree_,i,o));const l=T5(n,i);V_(n,l)}),n.onDisconnect_=vf(),zo(n.eventQueue_,et(),r)}function v5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(c5)}function mR(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function gR(n,e,t){return rR(n.serverSyncTree_,e,t)||Xe.EMPTY_NODE}function O_(n,e=n.transactionQueueTree_){if(e||ap(n,e),Rl(e)){const t=vR(n,e);ue(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&_5(n,Oc(e),t)}else cR(e)&&op(e,t=>{O_(n,t)})}function _5(n,e,t){const r=t.map(f=>f.currentWriteId),i=gR(n,e,r);let o=i;const l=i.hash();for(let f=0;f<t.length;f++){const m=t[f];ue(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const g=rr(e,m.path);o=o.updateChild(g,m.currentOutputSnapshotRaw)}const u=o.val(!0),c=e;n.server_.put(c.toString(),u,f=>{mR(n,"transaction put response",{path:c.toString(),status:f});let m=[];if(f==="ok"){const g=[];for(let w=0;w<t.length;w++)t[w].status=2,m=m.concat(Qa(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&g.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();ap(n,M_(n.transactionQueueTree_,e)),O_(n,n.transactionQueueTree_),zo(n.eventQueue_,e,m);for(let w=0;w<g.length;w++)Mc(g[w])}else{if(f==="datastale")for(let g=0;g<t.length;g++)t[g].status===3?t[g].status=4:t[g].status=0;else{$n("transaction at "+c.toString()+" failed: "+f);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=f}V_(n,e)}},l)}function V_(n,e){const t=yR(n,e),r=Oc(t),i=vR(n,t);return w5(n,i,r),r}function w5(n,e,t){if(e.length===0)return;const r=[];let i=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const c=e[u],f=rr(t,c.path);let m=!1,g;if(ue(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)m=!0,g=c.abortReason,i=i.concat(Qa(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=d5)m=!0,g="maxretry",i=i.concat(Qa(n.serverSyncTree_,c.currentWriteId,!0));else{const w=gR(n,c.path,l);c.currentInputSnapshot=w;const S=e[u].update(w.val());if(S!==void 0){fR("transaction failed: Data returned ",S,c.path);let x=hn(S);typeof S=="object"&&S!=null&&Fi(S,".priority")||(x=x.updatePriority(w.getPriority()));const M=c.currentWriteId,O=pR(n),R=Xz(x,w,O);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=R,c.currentWriteId=g5(n),l.splice(l.indexOf(M),1),i=i.concat($z(n.serverSyncTree_,c.path,R,c.currentWriteId,c.applyLocally)),i=i.concat(Qa(n.serverSyncTree_,M,!0))}else m=!0,g="nodata",i=i.concat(Qa(n.serverSyncTree_,c.currentWriteId,!0))}zo(n.eventQueue_,t,i),i=[],m&&(e[u].status=2,function(w){setTimeout(w,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(g),!1,null))))}ap(n,n.transactionQueueTree_);for(let u=0;u<r.length;u++)Mc(r[u]);O_(n,n.transactionQueueTree_)}function yR(n,e){let t,r=n.transactionQueueTree_;for(t=qe(e);t!==null&&Rl(r)===void 0;)r=M_(r,t),e=ct(e),t=qe(e);return r}function vR(n,e){const t=[];return _R(n,e,t),t.sort((r,i)=>r.order-i.order),t}function _R(n,e,t){const r=Rl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);op(e,i=>{_R(n,i,t)})}function ap(n,e){const t=Rl(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,uR(e,t.length>0?t:void 0)}op(e,r=>{ap(n,r)})}function T5(n,e){const t=Oc(yR(n,e)),r=M_(n.transactionQueueTree_,e);return Zz(r,i=>{xg(n,i)}),xg(n,r),dR(r,i=>{xg(n,i)}),t}function xg(n,e){const t=Rl(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ue(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ue(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Qa(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?uR(e,void 0):t.length=o+1,zo(n.eventQueue_,Oc(e),i);for(let l=0;l<r.length;l++)Mc(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function S5(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${t}' in query '${n}'`)}return e}const jx=function(n,e){const t=x5(n),r=t.namespace;t.domain==="firebase.com"&&Oi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Oi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||e3();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new SP(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ht(t.pathString)}},x5=function(n){let e="",t="",r="",i="",o="",l=!0,u="https",c=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(u=n.substring(0,f-1),n=n.substring(f+2));let m=n.indexOf("/");m===-1&&(m=n.length);let g=n.indexOf("?");g===-1&&(g=n.length),e=n.substring(0,Math.min(m,g)),m<g&&(i=E5(n.substring(m,g)));const w=S5(n.substring(Math.min(n.length,g)));f=e.indexOf(":"),f>=0?(l=u==="https"||u==="wss",c=parseInt(e.substring(f+1),10)):f=e.length;const S=e.slice(0,f);if(S.toLowerCase()==="localhost")t="localhost";else if(S.split(".").length<=2)t=S;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),t=e.substring(x+1),o=r}"ns"in w&&(o=w.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:l,scheme:u,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return We(this._path)?null:NP(this._path)}get ref(){return new kl(this._repo,this._path)}get _queryIdentifier(){const e=Sx(this._queryParams),t=v_(e);return t==="{}"?"default":t}get _queryObject(){return Sx(this._queryParams)}isEqual(e){if(e=qt(e),!(e instanceof j_))return!1;const t=this._repo===e._repo,r=LP(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+O3(this._path)}}class kl extends j_{constructor(e,t){super(e,t,new x_,!1)}get parent(){const e=MP(this._path);return e===null?null:new kl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}Bz(kl);zz(kl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="FIREBASE_DATABASE_EMULATOR_HOST",Ly={};let C5=!1;function b5(n,e,t,r){n.repoInfo_=new SP(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function A5(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Oi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=jx(o,i),u=l.repoInfo,c;typeof process<"u"&&ix&&(c=ix[I5]),c?(o=`http://${c}?ns=${u.namespace}`,l=jx(o,i),u=l.repoInfo):l.repoInfo.secure;const f=new c3(n.name,n.options,e);s5("Invalid Firebase Database URL",l),We(l.path)||Oi("Database URL must point to the root of a Firebase Database (not including a child path).");const m=R5(u,n,f,new u3(n,t));return new k5(m,n)}function P5(n,e){const t=Ly[e];(!t||t[n.key]!==n)&&Oi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),v5(n),delete t[n.key]}function R5(n,e,t,r){let i=Ly[e.name];i||(i={},Ly[e.name]=i);let o=i[n.toURLString()];return o&&Oi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new h5(n,C5,t,r),i[n.toURLString()]=o,o}class k5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(f5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new kl(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(P5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Oi("Cannot call "+e+" on a deleted database.")}}function N5(n=Uf(),e){const t=Ic(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=bv("database");r&&D5(t,...r)}return t}function D5(n,e,t,r={}){n=qt(n),n._checkNotDeleted("useEmulator");const i=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&Ps(r,o.repoInfo_.emulatorOptions))return;Oi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Oi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Rh(Rh.OWNER);else if(r.mockUserToken){const u=typeof r.mockUserToken=="string"?r.mockUserToken:Pv(r.mockUserToken,n.app.options.projectId);l=new Rh(u)}b5(o,i,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(n){KB(Fs),Rs(new ki("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return A5(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),sr(sx,ox,n),sr(sx,ox,"esm2017")}Pi.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Pi.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};M5();function F_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function wR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L5=wR,TR=new xc("auth","Firebase",wR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new jf("@firebase/auth");function O5(n,...e){Ef.logLevel<=Ve.WARN&&Ef.warn(`Auth (${Fs}): ${n}`,...e)}function kh(n,...e){Ef.logLevel<=Ve.ERROR&&Ef.error(`Auth (${Fs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,...e){throw U_(n,...e)}function Xr(n,...e){return U_(n,...e)}function ER(n,e,t){const r=Object.assign(Object.assign({},L5()),{[e]:t});return new xc("auth","Firebase",r).create(e,{appName:n.name})}function Po(n){return ER(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TR.create(n,...e)}function Re(n,e,...t){if(!n)throw U_(e,...t)}function xi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kh(e),new Error(e)}function ji(n,e){n||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function V5(){return Fx()==="http:"||Fx()==="https:"}function Fx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V5()||YV()||"connection"in navigator)?navigator.onLine:!0}function F5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ji(t>e,"Short delay should be less than long delay!"),this.isMobile=Rv()||xb()}get(){return j5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n,e){ji(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=new Vc(3e4,6e4);function z_(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Nl(n,e,t,r,i={}){return xR(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=El(Object.assign({key:n.config.apiKey},l)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:c},o);return QV()||(f.referrerPolicy="no-referrer"),SR.fetch()(IR(n,n.config.apiHost,t,u),f)})}async function xR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},U5),e);try{const i=new $5(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw vh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(n,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw vh(n,"email-already-in-use",l);if(c==="USER_DISABLED")throw vh(n,"user-disabled",l);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ER(n,m,f);Vi(n,m)}}catch(i){if(i instanceof ti)throw i;Vi(n,"network-request-failed",{message:String(i)})}}async function z5(n,e,t,r,i={}){const o=await Nl(n,e,t,r,i);return"mfaPendingCredential"in o&&Vi(n,"multi-factor-auth-required",{_serverResponse:o}),o}function IR(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?B_(n.config,i):`${n.config.apiScheme}://${i}`}class $5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),B5.get())})}}function vh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(n,e){return Nl(n,"POST","/v1/accounts:delete",e)}async function CR(n,e){return Nl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function H5(n,e=!1){const t=qt(n),r=await t.getIdToken(e),i=$_(r);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Zu(Ig(i.auth_time)),issuedAtTime:Zu(Ig(i.iat)),expirationTime:Zu(Ig(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ig(n){return Number(n)*1e3}function $_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Xh(t);return i?JSON.parse(i):(kh("Failed to decode base64 JWT payload"),null)}catch(i){return kh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ux(n){const e=$_(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ti&&G5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function G5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await _c(n,CR(t,{idToken:r}));Re(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bR(o.providerUserInfo):[],u=Q5(n.providerData,l),c=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!u?.length,m=c?f:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Vy(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function K5(n){const e=qt(n);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bR(n){return n.map(e=>{var{providerId:t}=e,r=F_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(n,e){const t=await xR(n,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=IR(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",SR.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function X5(n,e){return Nl(n,"POST","/v2/accounts:revokeToken",z_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ux(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Ux(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await Y5(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new tl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ii{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=F_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _c(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return H5(this,e)}reload(){return K5(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Po(this.auth));const e=await this.getIdToken();return await _c(this,W5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,u,c,f,m;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,x=(l=t.photoURL)!==null&&l!==void 0?l:void 0,P=(u=t.tenantId)!==null&&u!==void 0?u:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(f=t.createdAt)!==null&&f!==void 0?f:void 0,R=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:D,emailVerified:B,isAnonymous:z,providerData:W,stsTokenManager:L}=t;Re(D&&L,e,"internal-error");const C=tl.fromJSON(this.name,L);Re(typeof D=="string",e,"internal-error"),hs(g,e.name),hs(w,e.name),Re(typeof B=="boolean",e,"internal-error"),Re(typeof z=="boolean",e,"internal-error"),hs(S,e.name),hs(x,e.name),hs(P,e.name),hs(M,e.name),hs(O,e.name),hs(R,e.name);const A=new Ii({uid:D,auth:e,email:w,emailVerified:B,displayName:g,isAnonymous:z,photoURL:x,phoneNumber:S,tenantId:P,stsTokenManager:C,createdAt:O,lastLoginAt:R});return W&&Array.isArray(W)&&(A.providerData=W.map(b=>Object.assign({},b))),M&&(A._redirectEventId=M),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new tl;i.updateFromServerResponse(t);const o=new Ii({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?bR(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,u=new tl;u.updateFromIdToken(r);const c=new Ii({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new Map;function Ci(n){ji(n instanceof Function,"Expected a class definition");let e=Bx.get(n);return e?(ji(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Bx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AR.type="NONE";const zx=AR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(n,e,t){return`firebase:${n}:${e}:${t}`}class nl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Nh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Nh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ii._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new nl(Ci(zx),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Ci(zx);const l=Nh(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const m=await f._get(l);if(m){const g=Ii._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new nl(o,e,r):(o=c[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new nl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MR(e))return"Blackberry";if(LR(e))return"Webos";if(RR(e))return"Safari";if((e.includes("chrome/")||kR(e))&&!e.includes("edge/"))return"Chrome";if(DR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function PR(n=mn()){return/firefox\//i.test(n)}function RR(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kR(n=mn()){return/crios\//i.test(n)}function NR(n=mn()){return/iemobile/i.test(n)}function DR(n=mn()){return/android/i.test(n)}function MR(n=mn()){return/blackberry/i.test(n)}function LR(n=mn()){return/webos/i.test(n)}function W_(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function J5(n=mn()){var e;return W_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z5(){return XV()&&document.documentMode===10}function OR(n=mn()){return W_(n)||DR(n)||LR(n)||MR(n)||/windows phone/i.test(n)||NR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n,e=[]){let t;switch(n){case"Browser":t=$x(mn());break;case"Worker":t=`${$x(mn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const c=e(o);l(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(n,e={}){return Nl(n,"GET","/v2/passwordPolicy",z_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=6;class r6{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:n6,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNumericCharacter)!==null&&l!==void 0?l:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wx(this),this.idTokenSubscription=new Wx(this),this.beforeStateQueue=new e6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ci(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await CR(this,{idToken:e}),r=await Ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===u)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Po(this));const t=e?qt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t6(this),t=new r6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await X5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ci(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{l=!0,c()}}else{const c=e.addObserver(t);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&O5(`Error while retrieving App Check token: ${t.error}`),t?.token}}function H_(n){return qt(n)}class Wx{constructor(e){this.auth=e,this.observer=null,this.addObserver=lj(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s6(n){G_=n}function o6(n){return G_.loadJS(n)}function a6(){return G_.gapiScript}function l6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n,e){const t=Ic(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Ps(o,e??{}))return i;Vi(i,"already-initialized")}return t.initialize({options:e})}function c6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ci);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function d6(n,e,t){const r=H_(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=jR(e),{host:l,port:u}=h6(e),c=u===null?"":`:${u}`,f={url:`${o}//${l}${c}/`},m=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Ps(f,r.config.emulator)&&Ps(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,f6()}function jR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function h6(n){const e=jR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Hx(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Hx(l)}}}function Hx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function f6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,t){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n,e){return z5(n,"POST","/v1/accounts:signInWithIdp",z_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="http://localhost";class Oo extends FR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=F_(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Oo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return rl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,rl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rl(e,t)}buildRequest(){const e={requestUri:p6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends UR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends jc{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends jc{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends jc{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ii._fromIdTokenResponse(e,r,i),l=Gx(r);return new gl({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Gx(r);return new gl({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Gx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends ti{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,xf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new xf(e,t,r,i)}}function BR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xf._fromErrorAndOperation(n,o,e,r):o})}async function m6(n,e,t=!1){const r=await _c(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return gl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(n,e,t=!1){const{auth:r}=n;if(nr(r.app))return Promise.reject(Po(r));const i="reauthenticate";try{const o=await _c(n,BR(r,i,e,n),t);Re(o.idToken,r,"internal-error");const l=$_(o.idToken);Re(l,r,"internal-error");const{sub:u}=l;return Re(n.uid===u,r,"user-mismatch"),gl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Vi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(n,e,t=!1){if(nr(n.app))return Promise.reject(Po(n));const r="signIn",i=await BR(n,r,e),o=await gl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function v6(n,e,t,r){return qt(n).onIdTokenChanged(e,t,r)}function _6(n,e,t){return qt(n).beforeAuthStateChanged(e,t)}const If="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=1e3,T6=10;class $R extends zR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,c)=>{this.notifyListeners(l,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Z5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T6):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},w6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$R.type="LOCAL";const E6=$R;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR extends zR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WR.type="SESSION";const HR=WR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new lp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async f=>f(t.origin,o)),c=await S6(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,c)=>{const f=q_("",20);i.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const w=g;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function I6(n){Jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function C6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b6(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function A6(){return GR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebaseLocalStorageDb",P6=1,Cf="firebaseLocalStorage",KR="fbase_key";class Fc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function up(n,e){return n.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function R6(){const n=indexedDB.deleteDatabase(qR);return new Fc(n).toPromise()}function jy(){const n=indexedDB.open(qR,P6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cf,{keyPath:KR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cf)?e(r):(r.close(),await R6(),e(await jy()))})})}async function qx(n,e,t){const r=up(n,!0).put({[KR]:e,value:t});return new Fc(r).toPromise()}async function k6(n,e){const t=up(n,!1).get(e),r=await new Fc(t).toPromise();return r===void 0?null:r.value}function Kx(n,e){const t=up(n,!0).delete(e);return new Fc(t).toPromise()}const N6=800,D6=3;class QR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>D6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lp._getInstance(A6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await C6(),!this.activeServiceWorker)return;this.sender=new x6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jy();return await qx(e,If,"1"),await Kx(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>k6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=up(i,!1).getAll();return new Fc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QR.type="LOCAL";const M6=QR;new Vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(n,e){return e?Ci(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends FR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function O6(n){return y6(n.auth,new K_(n),n.bypassAuthState)}function V6(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),g6(t,new K_(n),n.bypassAuthState)}async function j6(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),m6(t,new K_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O6;case"linkViaPopup":case"linkViaRedirect":return j6;case"reauthViaPopup":case"reauthViaRedirect":return V6;default:Vi(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new Vc(2e3,1e4);class Ya extends YR{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F6.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6="pendingRedirect",Dh=new Map;class B6 extends YR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Dh.get(this.auth._key());if(!e){try{const r=await z6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Dh.set(this.auth._key(),e)}return this.bypassAuthState||Dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z6(n,e){const t=H6(e),r=W6(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $6(n,e){Dh.set(n._key(),e)}function W6(n){return Ci(n._redirectPersistence)}function H6(n){return Nh(U6,n.config.apiKey,n.name)}async function G6(n,e,t=!1){if(nr(n.app))return Promise.reject(Po(n));const r=H_(n),i=L6(r,e),l=await new B6(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=10*60*1e3;class K6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qx(e))}saveEventToCache(e){this.cachedEventUids.add(Qx(e)),this.lastProcessedEventTime=Date.now()}}function Qx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Q6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(n,e={}){return Nl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J6=/^https?/;async function Z6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Y6(n);for(const t of e)try{if(e9(t))return}catch{}Vi(n,"unauthorized-domain")}function e9(n){const e=Oy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!J6.test(t))return!1;if(X6.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=new Vc(3e4,6e4);function Yx(){const n=Jr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function n9(n){return new Promise((e,t)=>{var r,i,o;function l(){Yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yx(),t(Xr(n,"network-request-failed"))},timeout:t9.get()})}if(!((i=(r=Jr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Jr().gapi)===null||o===void 0)&&o.load)l();else{const u=l6("iframefcb");return Jr()[u]=()=>{gapi.load?l():t(Xr(n,"network-request-failed"))},o6(`${a6()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw Mh=null,e})}let Mh=null;function r9(n){return Mh=Mh||n9(n),Mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=new Vc(5e3,15e3),s9="__/auth/iframe",o9="emulator/auth/iframe",a9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u9(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?B_(e,o9):`https://${n.config.authDomain}/${s9}`,r={apiKey:e.apiKey,appName:n.name,v:Fs},i=l9.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${El(r).slice(1)}`}async function c9(n){const e=await r9(n),t=Jr().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:u9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a9,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Xr(n,"network-request-failed"),u=Jr().setTimeout(()=>{o(l)},i9.get());function c(){Jr().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h9=500,f9=600,p9="_blank",m9="http://localhost";class Xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g9(n,e,t,r=h9,i=f9){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},d9),{width:r.toString(),height:i.toString(),top:o,left:l}),f=mn().toLowerCase();t&&(u=kR(f)?p9:t),PR(f)&&(e=e||m9,c.scrollbars="yes");const m=Object.entries(c).reduce((w,[S,x])=>`${w}${S}=${x},`,"");if(J5(f)&&u!=="_self")return y9(e||"",u),new Xx(null);const g=window.open(e||"",u,m);Re(g,n,"popup-blocked");try{g.focus()}catch{}return new Xx(g)}function y9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9="__/auth/handler",_9="emulator/auth/handler",w9=encodeURIComponent("fac");async function Jx(n,e,t,r,i,o){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Fs,eventId:i};if(e instanceof UR){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",ey(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof jc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await n._getAppCheckToken(),f=c?`#${w9}=${encodeURIComponent(c)}`:"";return`${T9(n)}?${El(u).slice(1)}${f}`}function T9({config:n}){return n.emulator?B_(n,_9):`https://${n.authDomain}/${v9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="webStorageSupport";class E9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HR,this._completeRedirectFn=G6,this._overrideRedirectResult=$6}async _openPopup(e,t,r,i){var o;ji((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Jx(e,t,r,Oy(),i);return g9(e,l,q_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Jx(e,t,r,Oy(),i);return I6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ji(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await c9(e),r=new K6(e);return t.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cg,{type:Cg},i=>{var o;const l=(o=i?.[0])===null||o===void 0?void 0:o[Cg];l!==void 0&&t(!!l),Vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Z6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OR()||RR()||W_()}}const S9=E9;var Zx="@firebase/auth",eI="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C9(n){Rs(new ki("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VR(n)},f=new i6(r,i,o,c);return c6(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new ki("auth-internal",e=>{const t=H_(e.getProvider("auth").getImmediate());return(r=>new x9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(Zx,eI,I9(n)),sr(Zx,eI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=5*60,A9=Sb("authIdTokenMaxAge")||b9;let tI=null;const P9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>A9)return;const i=t?.token;tI!==i&&(tI=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R9(n=Uf()){const e=Ic(n,"auth");if(e.isInitialized())return e.getImmediate();const t=u6(n,{popupRedirectResolver:S9,persistence:[M6,E6,HR]}),r=Sb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=P9(o.toString());_6(t,l,()=>l(t.currentUser)),v6(t,u=>l(u))}}const i=Tb("auth");return i&&d6(t,`http://${i}`),t}function k9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}s6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Xr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",k9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C9("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firebasestorage.googleapis.com",N9="storageBucket",D9=2*60*1e3,M9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends ti{constructor(e,t,r=0){super(bg(e),`Firebase Storage: ${t} (${bg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ni.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ei;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ei||(ei={}));function bg(n){return"storage/"+n}function L9(){const n="An unknown error occurred, please check the error payload for server response.";return new ni(ei.UNKNOWN,n)}function O9(){return new ni(ei.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V9(){return new ni(ei.CANCELED,"User canceled the upload/download.")}function j9(n){return new ni(ei.INVALID_URL,"Invalid URL '"+n+"'.")}function F9(n){return new ni(ei.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nI(n){return new ni(ei.INVALID_ARGUMENT,n)}function ZR(){return new ni(ei.APP_DELETED,"The Firebase app was deleted.")}function U9(n){return new ni(ei.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ir.makeFromUrl(e,t)}catch{return new Ir(e,"")}if(r.path==="")return r;throw F9(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+i+l,"i"),c={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const m="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",S=new RegExp(`^https?://${g}/${m}/b/${i}/o${w}`,"i"),x={bucket:1,path:3},P=t===JR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",O=new RegExp(`^https?://${P}/${i}/${M}`,"i"),D=[{regex:u,indices:c,postModify:o},{regex:S,indices:x,postModify:f},{regex:O,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<D.length;B++){const z=D[B],W=z.regex.exec(e);if(W){const L=W[z.indices.bucket];let C=W[z.indices.path];C||(C=""),r=new Ir(L,C),z.postModify(r);break}}if(r==null)throw j9(e);return r}}class B9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n,e,t){let r=1,i=null,o=null,l=!1,u=0;function c(){return u===2}let f=!1;function m(...M){f||(f=!0,e.apply(null,M))}function g(M){i=setTimeout(()=>{i=null,n(S,c())},M)}function w(){o&&clearTimeout(o)}function S(M,...O){if(f){w();return}if(M){w(),m.call(null,M,...O);return}if(c()||l){w(),m.call(null,M,...O);return}r<64&&(r*=2);let D;u===1?(u=2,D=0):D=(r+Math.random())*1e3,g(D)}let x=!1;function P(M){x||(x=!0,w(),!f&&(i!==null?(M||(u=2),clearTimeout(i),g(0)):M||(u=1)))}return g(0),o=setTimeout(()=>{l=!0,P(!0)},t),P}function $9(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(n){return n!==void 0}function rI(n,e,t,r){if(r<e)throw nI(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw nI(`Invalid value for '${n}'. Expected ${t} or less.`)}function H9(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var bf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(bf||(bf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,t,r,i,o,l,u,c,f,m,g,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,x)=>{this.resolve_=S,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new _h(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===bf.NO_ERROR,c=o.getStatus();if(!u||G9(c,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===bf.ABORT;r(!1,new _h(!1,null,m));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new _h(f,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());W9(c)?o(c):o()}catch(c){l(c)}else if(u!==null){const c=L9();c.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,c)):l(c)}else if(i.canceled){const c=this.appDelete_?ZR():V9();l(c)}else{const c=O9();l(c)}};this.canceled_?t(!1,new _h(!1,null,!0)):this.backoffId_=z9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _h{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function K9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Q9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Y9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function X9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function J9(n,e,t,r,i,o,l=!0){const u=H9(n.urlParams),c=n.url+u,f=Object.assign({},n.headers);return Y9(f,e),K9(f,t),Q9(f,o),X9(f,r),new q9(c,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function e$(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this._service=e,t instanceof Ir?this._location=t:this._location=Ir.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Af(e,t)}get root(){const e=new Ir(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e$(this._location.path)}get storage(){return this._service}get parent(){const e=Z9(this._location.path);if(e===null)return null;const t=new Ir(this._location.bucket,e);return new Af(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw U9(e)}}function iI(n,e){const t=e?.[N9];return t==null?null:Ir.makeFromBucketSpec(t,n)}function t$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Pv(i,n.app.options.projectId))}class n${constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=JR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=D9,this._maxUploadRetryTime=M9,this._requests=new Set,i!=null?this._bucket=Ir.makeFromBucketSpec(i,this._host):this._bucket=iI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ir.makeFromBucketSpec(this._url,e):this._bucket=iI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Af(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new B9(ZR());{const l=J9(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const sI="@firebase/storage",oI="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="storage";function r$(n=Uf(),e){n=qt(n);const r=Ic(n,ek).getImmediate({identifier:e}),i=bv("storage");return i&&i$(r,...i),r}function i$(n,e,t,r={}){t$(n,e,t,r)}function s$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new n$(t,r,i,e,Fs)}function o$(){Rs(new ki(ek,s$,"PUBLIC").setMultipleInstances(!0)),sr(sI,oI,""),sr(sI,oI,"esm2017")}o$();const tk={apiKey:"AIzaSyAGYKS0X4kJWI-u54GRQuAofOKYBBd7hDc",authDomain:"artvista-480fa.firebaseapp.com",databaseURL:"https://artvista-480fa-default-rtdb.firebaseio.com",projectId:"artvista-480fa",storageBucket:"artvista-480fa.appspot.com",messagingSenderId:"627287660615",appId:"1:627287660615:web:f61dffed1967749cf63962",measurementId:"G-HFH4EY86CK"},Uc=Ff(tk),Cs=r_(Uc);N5(Uc);R9(Uc);r$(Uc);let a$=null;if(typeof window<"u")try{const{getAnalytics:n}=await qB(async()=>{const{getAnalytics:e}=await import("./index.esm-DHl5YRLG.js");return{getAnalytics:e}},[],import.meta.url);a$=n(Uc)}catch(n){console.warn("Analytics not initialized:",n.message)}const Q_=({artwork:n,artworkId:e,onBackClick:t})=>{const[r,i]=K.useState(null),[o,l]=K.useState(!1),[u,c]=K.useState(!1);K.useEffect(()=>{(async()=>{if(e&&!n){l(!0);try{const S=hf(Cs,"artworks",e),x=await LB(S);x.exists()?i({id:x.id,...x.data(),price:x.data().price?`$${x.data().price}`:"Not for sale"}):(console.error("Artwork not found!"),i(null))}catch(S){console.error("Error fetching artwork: ",S)}finally{l(!1)}}})()},[e,n]);const f=r||n,m=()=>{const w=JSON.parse(localStorage.getItem("cart")||"[]");if(w.findIndex(x=>x.id===f.id)===-1){const x=[...w,f];localStorage.setItem("cart",JSON.stringify(x)),c(!0),window.dispatchEvent(new Event("cartUpdated")),setTimeout(()=>{c(!1)},2e3)}else alert("This artwork is already in your cart.")},g=()=>{console.log("Purchase initiated for:",f.title),alert(`Thank you for purchasing "${f.title}"! This would normally take you to a checkout page.`)};if(!f&&o)return T.jsx("div",{className:"min-h-screen w-screen bg-black text-white flex items-center justify-center",children:T.jsx("p",{className:"text-xl",children:"Loading artwork details..."})});if(!f){const w={id:0,title:"Artwork Not Found",artist:"Unknown Artist",image:"/api/placeholder/600/600",price:"$0.00",year:new Date().getFullYear(),available:!1,forsale:!1,description:"This artwork could not be found.",category:"Unknown"};return aI(w,t,m,g,u)}return aI(f,t,m,g,u)},aI=(n,e,t,r,i)=>{const o=typeof n.price=="string"&&n.price.startsWith("$")?parseFloat(n.price.substring(1).replace(/,/g,"")):typeof n.price=="number"?n.price:0,l=n.available&&(n.forsale||n.forSale)&&o>0;return T.jsxs("div",{className:"min-h-screen w-screen bg-black text-white px-6 py-12 overflow-hidden",children:[T.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:T.jsx("button",{onClick:e,className:"text-white hover:text-gray-400 transition-colors","aria-label":"Go back",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})})}),T.jsx("div",{className:"max-w-6xl mx-auto",children:T.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[T.jsx(st.div,{className:"lg:w-3/5 bg-gray-900 p-4 rounded-xl shadow-md overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:T.jsx("img",{src:n.image,alt:n.title,className:"w-full h-auto object-contain rounded-lg"})}),T.jsxs(st.div,{className:"lg:w-2/5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:[T.jsxs("div",{className:"mb-6",children:[T.jsx("p",{className:"text-gray-400 mb-2",children:"Creator"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 overflow-hidden",children:T.jsx("img",{src:"/api/placeholder/40/40",alt:n.artist,className:"w-full h-full object-cover"})}),T.jsx("span",{className:"text-lg font-medium",children:n.artist})]})]}),T.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[n.title," ",n.id&&`#${typeof n.id=="string"?n.id.substring(0,6):n.id}`]}),T.jsx("p",{className:"text-gray-400 mb-6",children:n.description||`A beautiful artwork by ${n.artist} created in ${n.year}. 
              This piece is part of the ${n.category} collection.`}),T.jsxs("div",{className:"mb-6",children:[T.jsx("p",{className:"text-gray-400 mb-2",children:"Details"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"p-1 rounded-full bg-gray-800",children:T.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),T.jsxs("span",{className:"text-sm text-gray-300",children:["Category: ",n.category]})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx("div",{className:"p-1 rounded-full bg-gray-800",children:T.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),T.jsxs("span",{className:"text-sm text-gray-300",children:["Year: ",n.year]})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx("div",{className:"p-1 rounded-full bg-gray-800",children:T.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})})}),T.jsx("span",{className:"text-sm text-gray-300",children:n.available?"Available for purchase":"Not available for purchase"})]})]}),T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("div",{children:T.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${n.available?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.available?"Available":"Not Available"})}),T.jsxs("div",{className:"text-right",children:[T.jsx("p",{className:"text-sm text-gray-400",children:"Price"}),T.jsx("p",{className:"text-2xl font-bold",children:typeof n.price=="number"?`$${n.price}`:n.price})]})]}),i&&T.jsx("div",{className:"bg-green-500 text-white p-2 rounded-md mb-4 text-center",children:"Added to cart successfully!"}),T.jsxs("div",{className:"flex flex-col gap-3",children:[l&&T.jsx("button",{onClick:r,className:"w-full bg-white text-black py-3 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Purchase Now"}),n.available&&T.jsx("button",{onClick:t,className:"w-full bg-gray-800 text-white py-3 rounded-xl font-medium hover:bg-gray-700 transition-colors border border-gray-600",children:"Add to Cart"})]})]})]})})]})};function l$({onBackClick:n,onArtistClick:e}){const[t,r]=K.useState("All"),[i,o]=K.useState([]),[l,u]=K.useState(!0),[c,f]=K.useState(["All"]),[m,g]=K.useState({}),[w,S]=K.useState({}),[x,P]=K.useState({}),[M,O]=K.useState(null),R=async()=>{u(!0);try{const b=Yr(Cs,"artworks"),V=await Ai(b),U=new Set(["All"]),k={},ne={},de=[],Ee=new Set;if(V.forEach(he=>{const H={id:he.id,...he.data()};H.category&&U.add(H.category),H.artist&&(k[H.artist]||(k[H.artist]={images:[]}),H.image&&(k[H.artist].images.push(H.image),ne[H.image]=H,de.push(H.image)),Ee.add(H.artist))}),f(Array.from(U)),g(k),S(ne),t==="All")o(de);else{const he=Object.values(ne).filter(H=>H.category===t).map(H=>H.image);o(he)}D(Array.from(Ee))}catch(b){console.error("Error fetching artworks:",b)}finally{u(!1)}},D=async b=>{try{const V=Yr(Cs,"artists"),U=await Ai(V),k={};U.forEach(ne=>{const de={id:ne.id,...ne.data()};b.includes(de.name)&&(k[de.name]=de)}),P(k)}catch(V){console.error("Error fetching artists data:",V)}};K.useEffect(()=>{R()},[]),K.useEffect(()=>{u(!0),setTimeout(()=>{if(t==="All")o(Object.keys(w));else{const b=Object.values(w).filter(V=>V.category===t).map(V=>V.image);o(b)}u(!1)},300)},[t,w]);const B=b=>w[b]?.artist||"Unknown Artist",z=b=>{const V=w[b];return!V||!V.price?"Price on Request":`$${V.price}`},W=(b,V)=>w[b]?.title||`Artwork ${V+1}`,L=(b,V)=>{if(V.stopPropagation(),e){const U=x[b];U?e(U):console.error(`Complete data for artist "${b}" not found`)}},C=b=>{O(w[b])},A=()=>{O(null)};return M?T.jsx(Q_,{artwork:M,onBackClick:A}):T.jsxs("div",{className:"bg-black min-h-screen w-screen overflow-x-hidden text-white m-0 p-0",children:[T.jsxs("div",{className:"sticky top-10 z-10 bg-black bg-opacity-95 pt-10 pb-4 px-16",children:[T.jsxs("div",{className:"flex items-center mb-6 relative",children:[T.jsx("button",{onClick:n,className:"text-white hover:text-gray-300 transition-colors absolute left-0","aria-label":"Go back to main page",children:T.jsx(jo,{className:"text-2xl"})}),T.jsx("h1",{className:"text-3xl font-semibold text-center w-full",children:"Artwork for Sale"})]}),T.jsx("div",{className:"flex space-x-6 text-sm overflow-x-auto pb-2 justify-center w-full",children:c.map(b=>T.jsxs("button",{onClick:()=>r(b),className:`relative pb-1 transition-all border-none outline-none focus:outline-none bg-transparent whitespace-nowrap ${t===b?"text-white font-semibold":"text-gray-500 hover:text-gray-300"}`,children:[b,t===b&&T.jsx("span",{className:"absolute left-0 bottom-0 w-full h-0.5 bg-white"})]},b))})]}),T.jsx("div",{className:"px-16 py-8",children:T.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:T.jsx(Rf,{mode:"popLayout",children:!l&&i.map((b,V)=>T.jsxs(st.div,{className:"aspect-[3/4] rounded-xl overflow-hidden shadow-2xl relative group cursor-pointer",initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.4,ease:"easeOut"},onClick:()=>C(b),children:[T.jsx("img",{src:b,alt:W(b,V),className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6",children:T.jsxs("div",{className:"flex justify-between items-end",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-semibold",children:W(b,V)}),T.jsx("p",{className:"text-gray-300 text-sm cursor-pointer hover:text-white hover:underline",onClick:U=>L(B(b),U),children:B(b)})]}),T.jsx("div",{className:"bg-white text-black px-4 py-2 rounded-full shadow-md font-bold",children:z(b)})]})})]},`${t}-${b}-${V}`))})})}),l&&T.jsx("div",{className:"flex justify-center items-center h-64",children:T.jsx("p",{className:"text-xl text-gray-400",children:"Loading artworks..."})}),!l&&i.length===0&&T.jsx("div",{className:"flex justify-center items-center h-64",children:T.jsx("p",{className:"text-xl text-gray-400",children:"No artworks found in this category."})})]})}const u$=({artist:n,onBackClick:e})=>{const[t,r]=K.useState(null),i=()=>{r(null)},o=l=>{r(l)};return n?t?T.jsx(Q_,{artwork:t,onBackClick:i}):T.jsx("div",{className:"bg-black min-h-screen w-screen text-white p-6",children:T.jsxs("div",{className:"max-w-4xl mx-auto",children:[T.jsxs("button",{onClick:e,className:"flex items-center text-white hover:text-gray-300 mb-4","aria-label":"Go back",children:[T.jsx(jo,{className:"text-2xl mr-2"})," Back"]}),T.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden shadow-xl",children:T.jsxs("div",{className:"flex flex-col md:flex-row",children:[T.jsx("div",{className:"md:w-1/3 p-8 flex items-center justify-center",children:T.jsx("div",{className:"w-48 h-48 rounded-full overflow-hidden bg-gray-800 border-4 border-gray-700",children:T.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})})}),T.jsxs("div",{className:"md:w-2/3 p-8",children:[T.jsx("h2",{className:"text-4xl font-bold text-amber-400",children:n.name}),T.jsxs("p",{className:"text-gray-400 mt-1",children:[T.jsx("strong",{children:"Lifetime:"})," ",n.lifetime]}),T.jsxs("div",{className:"mt-4",children:[T.jsx("h3",{className:"text-2xl font-semibold",children:"Biography"}),T.jsx("p",{className:"text-gray-300 mt-2 leading-relaxed",children:n.biography})]})]})]})}),T.jsxs("div",{className:"mt-8",children:[T.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Famous Artworks"}),T.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:n.famousArtworks&&n.famousArtworks.map((l,u)=>T.jsxs(st.div,{className:"bg-gray-800 rounded-lg overflow-hidden shadow-xl relative group cursor-pointer",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.4},onClick:()=>o({id:`${n.name}-artwork-${u}`,title:l.title,artist:n.name,image:l.imageUrl,year:l.year||"Unknown",category:l.category||"Fine Art",price:l.price||"Price on Request",available:l.available!==!1,description:l.description||`A masterpiece by ${n.name}. ${l.title} is one of the artist's most recognized works.`}),children:[T.jsx("img",{src:l.imageUrl,alt:l.title,className:"w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105"}),T.jsx("div",{className:"p-4",children:T.jsx("p",{className:"text-center text-gray-300",children:l.title})}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4",children:T.jsxs("div",{className:"flex justify-between items-end",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-lg font-semibold",children:l.title}),T.jsx("p",{className:"text-gray-300 text-sm",children:n.name})]}),l.price&&T.jsx("div",{className:"bg-white text-black px-3 py-1 rounded-full shadow-md font-bold text-sm",children:typeof l.price=="number"?`$${l.price}`:l.price})]})})]},u))})]}),(!n.famousArtworks||n.famousArtworks.length===0)&&T.jsx("div",{className:"text-center py-8",children:T.jsx("p",{className:"text-gray-400",children:"No artworks available for this artist."})})]})}):T.jsx("p",{className:"text-center text-gray-400 mt-10",children:"Select an artist to see details."})},c$=Ff(tk),d$=r_(c$);function h$({onBackClick:n,onArtistSelect:e}){const[t,r]=K.useState([]);K.useEffect(()=>{async function o(){const l=Yr(d$,"artists"),c=(await Ai(l)).docs.map(f=>({id:f.id,...f.data()}));r(c)}o()},[]);const i=o=>{console.log("Selected artist:",o),e(o)};return T.jsxs("div",{className:"min-h-screen w-screen bg-black text-white px-6 pt-16 pb-12 overflow-hidden",children:[T.jsx("div",{className:"max-w-6xl mx-auto mb-8",children:T.jsxs("button",{onClick:n,className:"text-white hover:text-gray-300 transition-colors flex items-center","aria-label":"Go back to gallery",children:[T.jsx(jo,{className:"text-2xl"}),T.jsx("span",{className:"ml-2",children:"Back"})]})}),T.jsxs("div",{className:"max-w-6xl mx-auto mb-12 px-4",children:[T.jsx("h1",{className:"text-4xl font-bold text-center mb-8",children:"Our Contributing Artists"}),T.jsx("p",{className:"text-gray-400 text-center max-w-2xl mx-auto",children:"Meet the talented artists who have contributed their unique vision and creativity to our gallery. Click on any artist to learn more about their background, skills, and view their artwork collection."})]}),T.jsx("div",{className:"max-w-6xl mx-auto flex justify-center",children:T.jsx(st.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:t.map(o=>T.jsxs(st.div,{className:"bg-gray-900 rounded-xl overflow-hidden shadow-xl cursor-pointer transform transition-all hover:scale-105 hover:shadow-2xl w-full max-w-sm border border-gray-800",onClick:()=>i(o),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[T.jsx("div",{className:"h-64 overflow-hidden bg-gray-800",children:T.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"})}),T.jsxs("div",{className:"p-6",children:[T.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:o.name}),T.jsx("p",{className:"text-gray-300 mb-3",children:o.description}),T.jsxs("p",{className:"text-sm text-gray-400",children:["Lifetime: ",o.lifetime]}),T.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[T.jsxs("span",{className:"text-sm text-gray-400",children:[o.famousArtworks&&o.famousArtworks.length," artwork",o.famousArtworks&&o.famousArtworks.length!==1?"s":""]}),T.jsxs("span",{className:"text-sm text-blue-400 hover:text-blue-300 group flex items-center",children:["View Profile",T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},o.id))})})]})}const f$=({onArtistClick:n,onBackClick:e})=>{const[t,r]=K.useState("All"),[i,o]=K.useState([]),[l,u]=K.useState(!0),[c,f]=K.useState(null),[m,g]=K.useState(["All"]),[w,S]=K.useState({}),x=async D=>{try{const B=Yr(Cs,"artists"),z=await Ai(B),W={};z.forEach(L=>{const C={id:L.id,...L.data()};D.includes(C.name)&&(W[C.name]=C)}),S(W)}catch(B){console.error("Error fetching artists data:",B)}};K.useEffect(()=>{(async()=>{u(!0);try{const B=Yr(Cs,"artworks"),z=await Ai(B),W=[],L=new Set(["All"]),C=new Set;z.forEach(A=>{const b={id:A.id,...A.data(),price:A.data().price?`$${A.data().price}`:"Not for sale"};b.category&&L.add(b.category),b.artist&&C.add(b.artist),W.push(b)}),g(Array.from(L)),o(t==="All"?W:W.filter(A=>A.category===t)),await x(Array.from(C))}catch(B){console.error("Error fetching artworks: ",B)}finally{u(!1)}})()},[t]);const P=D=>{u(!0),r(D)},M=(D,B)=>{if(B&&B.stopPropagation(),n)try{const z=w[D];z?(console.log("Navigating to artist profile with data:",z),n(z)):(console.warn(`Complete data for artist "${D}" not found`),(async()=>{const L=Yr(Cs,"artworks"),C=p_(L,m_("artist","==",D)),A=await Ai(C),b=[];A.forEach(U=>{b.push({id:U.id,...U.data()})}),n({name:D,artworks:b})})())}catch(z){console.error("Error handling artist click: ",z)}else console.warn("onArtistClick function is not provided.")},O=D=>{f(D)},R=()=>{f(null)};return c?T.jsx(Q_,{artwork:c,onBackClick:R}):T.jsxs("div",{className:"min-h-screen w-screen bg-black text-white px-6 py-12 overflow-hidden",children:[T.jsxs("div",{className:"max-w-6xl mx-auto mb-12 px-4",children:[T.jsxs("div",{className:"flex items-center mb-8 relative",children:[T.jsx("button",{onClick:e||(()=>window.history.back()),className:"text-white hover:text-gray-300 transition-colors absolute left-0","aria-label":"Go back",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),T.jsx("h1",{className:"text-4xl font-bold text-center w-full",children:"Art Gallery Collection"})]}),T.jsx("p",{className:"text-gray-400 text-center max-w-2xl mx-auto mb-8",children:"Explore our diverse collection of artworks from talented artists around the world."}),T.jsx("div",{className:"flex justify-center flex-wrap gap-4 mb-12",children:m.map(D=>T.jsx("button",{onClick:()=>P(D),className:`px-4 py-2 rounded-full transition-all ${t===D?"bg-white text-black":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:D},D))})]}),T.jsxs("div",{className:"max-w-6xl mx-auto flex justify-center",children:[T.jsx(Rf,{mode:"wait",children:l?T.jsx("div",{className:"flex justify-center items-center h-64",children:T.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xl text-gray-400",children:"Loading..."})}):T.jsx(st.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{transition:{staggerChildren:.1}}},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center",children:i.map(D=>T.jsxs(st.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4},className:"bg-gray-900 rounded-xl overflow-hidden shadow-lg group cursor-pointer",onClick:()=>O(D),children:[T.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[T.jsx("img",{src:D.image,alt:D.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:T.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:T.jsxs("div",{className:"flex justify-between items-end",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold",children:D.title}),T.jsx("p",{className:"text-blue-300 hover:text-blue-200 cursor-pointer",onClick:B=>M(D.artist,B),children:D.artist})]}),T.jsx("div",{className:"bg-white text-black px-3 py-1 rounded-full font-bold",children:D.price})]})})})]}),T.jsxs("div",{className:"p-4",children:[T.jsxs("h3",{className:"text-lg font-semibold",children:[D.title," (",D.year,")"]}),T.jsx("p",{className:"text-gray-400 cursor-pointer hover:text-gray-300",onClick:B=>M(D.artist,B),children:D.artist})]})]},D.id))})}),!l&&i.length===0&&T.jsx("div",{className:"flex justify-center items-center h-64",children:T.jsx("p",{className:"text-xl text-gray-400",children:"No artworks found in this category."})})]})]})};function p$({onBackClick:n,onLoginSuccess:e,onSignupClick:t}){const[r,i]=K.useState({email:"",password:""}),[o,l]=K.useState(""),u=f=>{i({...r,[f.target.name]:f.target.value})},c=async f=>{f.preventDefault();try{const m=Yr(Cs,"users"),g=p_(m,m_("email","==",r.email)),w=await Ai(g);if(w.empty){l("No user found with this email");return}const S=w.docs[0].data(),x=w.docs[0].id;if(S.password!==r.password){l("Incorrect password");return}e({id:x,...S})}catch(m){console.error("Login error: ",m),l("Failed to login. Please try again.")}};return T.jsxs("div",{className:"bg-black min-h-screen w-screen flex flex-col items-center text-white",children:[T.jsxs("header",{className:"w-full bg-white text-black py-4 px-6 flex items-center",children:[T.jsx("button",{onClick:n,className:"mr-4 p-1 rounded-full hover:bg-gray-200 transition-colors duration-300",children:T.jsx(jo,{size:24})}),T.jsx("h1",{className:"text-xl font-bold",children:"Art Gallery"})]}),T.jsxs("div",{className:"max-w-lg w-full bg-gray-900 p-8 rounded-2xl shadow-lg mt-6",children:[T.jsx("div",{className:"flex items-center mb-6 relative",children:T.jsx("h1",{className:"text-3xl font-semibold text-center w-full",children:"Login"})}),o&&T.jsx("p",{className:"text-red-400 text-sm mb-4",children:o}),T.jsxs(st.form,{onSubmit:c,className:"space-y-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Email"}),T.jsx("input",{type:"email",name:"email",value:r.email,onChange:u,className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-amber-400 text-white",placeholder:"Enter your email",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Password"}),T.jsx("input",{type:"password",name:"password",value:r.password,onChange:u,className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-amber-400 text-white",placeholder:"Enter your password",required:!0})]}),T.jsx(st.button,{type:"submit",className:"w-full bg-amber-400 text-black font-semibold p-3 rounded-lg shadow-lg hover:bg-amber-500 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Login"})]}),T.jsxs("p",{className:"text-center text-gray-400 mt-6",children:["Don't have an account? "," ",T.jsx("span",{onClick:t,className:"text-amber-400 cursor-pointer hover:underline",children:"Register Here"})]})]})]})}function m$({onBackClick:n,onLoginClick:e}){const[t,r]=K.useState({name:"",email:"",password:"",confirmPassword:""}),[i,o]=K.useState(""),l=c=>{r({...t,[c.target.name]:c.target.value})},u=async c=>{if(c.preventDefault(),t.password!==t.confirmPassword){o("Passwords do not match");return}try{const f=Yr(Cs,"users"),m=p_(f,m_("email","==",t.email));if(!(await Ai(m)).empty){o("A user with this email already exists");return}const w=await aP(f,{name:t.name,email:t.email,password:t.password,createdAt:new Date});console.log("User added to Firestore!"),alert("Sign up successful! Please log in."),e()}catch(f){console.error("Error adding user: ",f),o("Failed to sign up. Please try again.")}};return T.jsxs("div",{className:"bg-black min-h-screen w-screen flex flex-col items-center text-white",children:[T.jsxs("header",{className:"w-full bg-white text-black py-4 px-6 flex items-center",children:[T.jsx("button",{onClick:n,className:"mr-4 p-1 rounded-full hover:bg-gray-200 transition-colors duration-300",children:T.jsx(jo,{size:24})}),T.jsx("h1",{className:"text-xl font-bold",children:"Art Gallery"})]}),T.jsxs("div",{className:"max-w-lg w-full bg-gray-900 p-8 rounded-2xl shadow-lg mt-6",children:[T.jsx("div",{className:"flex items-center mb-6 relative",children:T.jsx("h1",{className:"text-3xl font-semibold text-center w-full",children:"Sign Up"})}),i&&T.jsx("p",{className:"text-red-400 text-sm mb-4",children:i}),T.jsxs(st.form,{onSubmit:u,className:"space-y-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Full Name"}),T.jsx("input",{type:"text",name:"name",value:t.name,onChange:l,className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-amber-400 text-white",placeholder:"Enter your name",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Email"}),T.jsx("input",{type:"email",name:"email",value:t.email,onChange:l,className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-amber-400 text-white",placeholder:"Enter your email",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Password"}),T.jsx("input",{type:"password",name:"password",value:t.password,onChange:l,className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-amber-400 text-white",placeholder:"Create a password",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Confirm Password"}),T.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:l,className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-amber-400 text-white",placeholder:"Confirm your password",required:!0})]}),T.jsx(st.button,{type:"submit",className:"w-full bg-amber-400 text-black font-semibold p-3 rounded-lg shadow-lg hover:bg-amber-500 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Sign Up"})]}),T.jsxs("p",{className:"text-center text-gray-400 mt-6",children:["Already have an account?"," ",T.jsx("span",{onClick:e,className:"text-amber-400 cursor-pointer hover:underline",children:"Log in"})]})]})]})}function g$({user:n,onBackClick:e,onLogout:t}){return T.jsxs("div",{className:"bg-black min-h-screen w-screen flex flex-col items-center text-white pt-16",children:[T.jsx("div",{className:"self-start ml-6 mb-6",children:T.jsxs("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-800 transition-colors duration-300 flex items-center",children:[T.jsx(jo,{size:24}),T.jsx("span",{className:"ml-2",children:"Back"})]})}),T.jsxs("div",{className:"max-w-lg w-full bg-gray-900 p-8 rounded-2xl shadow-lg mt-6",children:[T.jsxs("div",{className:"flex items-center mb-6",children:[T.jsx("div",{className:"w-20 h-20 bg-amber-400 rounded-full flex items-center justify-center text-black text-2xl font-bold mr-4",children:n?.name?.charAt(0)?.toUpperCase()||"U"}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-semibold",children:n?.name||"User"}),T.jsx("p",{className:"text-gray-400",children:n?.email||"No email provided"})]})]}),T.jsxs("div",{className:"space-y-6 mt-8",children:[T.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Account Information"}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Name:"}),T.jsx("span",{children:n?.name||"Not provided"})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Email:"}),T.jsx("span",{children:n?.email||"Not provided"})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Member Since:"}),T.jsx("span",{children:n?.createdAt?new Date(n.createdAt.seconds*1e3).toLocaleDateString():"Unknown"})]})]})]}),T.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Preferences"}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Favorite Art Style:"}),T.jsx("span",{children:"Not set"})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Notification Preferences:"}),T.jsx("span",{children:"Email"})]})]})]}),T.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Activities"}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Saved Artworks:"}),T.jsx("span",{children:"0"})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Favorite Artists:"}),T.jsx("span",{children:"0"})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Reviews:"}),T.jsx("span",{children:"0"})]})]})]})]}),T.jsx(st.button,{onClick:t,className:"w-full mt-8 bg-red-500 text-white font-semibold p-3 rounded-lg shadow-lg hover:bg-red-600 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Logout"})]})]})}const y$=({onBackClick:n})=>{const[e,t]=K.useState([]),[r,i]=K.useState(!0),[o,l]=K.useState(!1);K.useEffect(()=>{i(!0);const m=localStorage.getItem("cart");m&&t(JSON.parse(m)),i(!1)},[]);const u=()=>e.reduce((m,g)=>{const w=typeof g.price=="string"&&g.price.startsWith("$")?parseFloat(g.price.substring(1).replace(/,/g,"")):typeof g.price=="number"?g.price:0;return m+w},0),c=m=>{const g=e.filter(w=>w.id!==m);t(g),localStorage.setItem("cart",JSON.stringify(g)),window.dispatchEvent(new Event("cartUpdated"))},f=()=>{if(e.length===0){alert("Your cart is empty.");return}l(!0),setTimeout(()=>{t([]),localStorage.removeItem("cart"),window.dispatchEvent(new Event("cartUpdated"))},2e3)};return T.jsxs("div",{className:"min-h-screen w-screen bg-black text-white px-6 py-12 overflow-hidden",children:[T.jsx("div",{className:"max-w-6xl mx-auto mb-8",children:T.jsxs("div",{className:"flex items-center mb-6 relative",children:[T.jsx("button",{onClick:n,className:"text-white hover:text-gray-300 transition-colors absolute left-0","aria-label":"Go back",children:T.jsx(jo,{className:"text-2xl"})}),T.jsx("h1",{className:"text-3xl font-bold text-center w-full",children:"Your Shopping Cart"})]})}),T.jsx(Rf,{children:o&&T.jsx(st.div,{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:T.jsxs(st.div,{className:"bg-white rounded-xl p-12 flex flex-col items-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:30},children:[T.jsx(st.div,{className:"w-24 h-24 rounded-full bg-green-500 flex items-center justify-center mb-6",initial:{opacity:0},animate:{opacity:1},children:T.jsx(st.svg,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2},children:T.jsx("polyline",{points:"20 6 9 17 4 12"})})}),T.jsx("h2",{className:"text-black text-2xl font-bold mb-2",children:"Order Placed!"}),T.jsx("p",{className:"text-gray-600 text-center",children:"Thank you for your purchase. Your order has been placed successfully."}),T.jsx(st.button,{className:"mt-6 px-6 py-2 bg-black text-white rounded-lg",onClick:()=>{l(!1),n()},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Continue Shopping"})]})})}),T.jsx("div",{className:"max-w-6xl mx-auto",children:r?T.jsx("div",{className:"flex justify-center items-center h-64",children:T.jsx("p",{className:"text-xl text-gray-400",children:"Loading your cart..."})}):e.length===0&&!o?T.jsx("div",{className:"bg-gray-900 rounded-xl p-8 text-center",children:T.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[T.jsx(zE,{className:"text-6xl text-gray-600"}),T.jsx("h2",{className:"text-2xl font-semibold",children:"Your cart is empty"}),T.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Browse our collection and add some beautiful artworks to your cart."}),T.jsx("button",{onClick:n,className:"mt-4 px-6 py-2 bg-white text-black rounded-full font-medium hover:bg-gray-200 transition-colors",children:"Continue Shopping"})]})}):o?null:T.jsxs("div",{children:[T.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden shadow-lg mb-6",children:T.jsxs("div",{className:"p-6",children:[T.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Cart Items (",e.length,")"]}),T.jsx("div",{className:"divide-y divide-gray-800",children:e.map(m=>T.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-4 flex items-center",children:[T.jsx("div",{className:"w-20 h-20 rounded-md overflow-hidden bg-gray-800 mr-4",children:T.jsx("img",{src:m.image,alt:m.title,className:"w-full h-full object-cover"})}),T.jsxs("div",{className:"flex-grow",children:[T.jsx("h3",{className:"font-medium",children:m.title}),T.jsxs("p",{className:"text-gray-400 text-sm",children:["by ",m.artist]})]}),T.jsx("div",{className:"px-4",children:T.jsx("p",{className:"font-bold",children:typeof m.price=="number"?`$${m.price}`:m.price})}),T.jsx("button",{onClick:()=>c(m.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove from cart",children:T.jsx(e2,{className:"text-xl"})})]},m.id))})]})}),T.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden shadow-lg mb-6",children:T.jsxs("div",{className:"p-6",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Subtotal"}),T.jsxs("span",{children:["$",u().toFixed(2)]})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Shipping"}),T.jsx("span",{children:"Free"})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Tax"}),T.jsxs("span",{children:["$",(u()*.07).toFixed(2)]})]}),T.jsx("div",{className:"border-t border-gray-800 pt-2 mt-2",children:T.jsxs("div",{className:"flex justify-between font-bold",children:[T.jsx("span",{children:"Total"}),T.jsxs("span",{children:["$",(u()*1.07).toFixed(2)]})]})})]})]})}),T.jsx("div",{className:"flex justify-end",children:T.jsxs(st.button,{onClick:f,className:"px-8 py-3 bg-white text-black rounded-xl font-medium hover:bg-gray-200 transition-colors flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[T.jsx(zE,{})," Proceed to Checkout"]})})]})})]})};function v$(){const n=K.useRef(null),e=K.useRef(null),t=K.useRef(null),r=K.useRef(null),i=K.useRef(null),o=K.useRef(null),[l,u]=K.useState(0),[c,f]=K.useState("login"),[m,g]=K.useState(["login"]),[w,S]=K.useState(!1),[x,P]=K.useState(null),[M,O]=K.useState(0);K.useEffect(()=>{const H=()=>{const ie=JSON.parse(localStorage.getItem("cart")||"[]");O(ie.length)};return H(),window.addEventListener("storage",H),()=>{window.removeEventListener("storage",H)}},[]),K.useEffect(()=>{const H=()=>{const ie=JSON.parse(localStorage.getItem("cart")||"[]");O(ie.length)};return window.addEventListener("cartUpdated",H),()=>{window.removeEventListener("cartUpdated",H)}},[]);const R=H=>{const ie=JSON.parse(localStorage.getItem("cart")||"[]");if(ie.findIndex(Z=>Z.id===H.id)===-1){const Z=[...ie,H];localStorage.setItem("cart",JSON.stringify(Z)),O(Z.length),window.dispatchEvent(new Event("cartUpdated"))}};K.useEffect(()=>{const H=localStorage.getItem("user");if(H)try{const ie=JSON.parse(H);P(ie),S(!0),f("main"),g(["main"])}catch(ie){console.error("Error parsing stored user data:",ie),localStorage.removeItem("user")}},[]);const[D,B]=K.useState(null),z=H=>{g(ie=>[...ie,H]),f(H),window.scrollTo(0,0)},W=()=>{if(m.length>1){const H=[...m];H.pop(),f(H[H.length-1]),g(H)}},L=H=>{P(H),S(!0),localStorage.setItem("user",JSON.stringify(H)),z("main")},C=()=>{P(null),S(!1),localStorage.removeItem("user"),z("login")},A=()=>{z("login")},b=()=>{z("signup")},V=()=>{z("userProfile")},U=H=>{console.log("Navigating to artist profile with data:",H),B(H),z("artistProfile")},k=()=>{z("artistsDirectory")},ne=()=>{z("catalog")},de=()=>{z("gallery")},Ee=()=>{z("cart")},he=c!=="cart"&&c!=="login"&&c!=="signup";return c==="login"?T.jsx(p$,{onLoginSuccess:L,onSignupClick:b}):c==="signup"?T.jsx(m$,{onBackClick:W,onLoginClick:A}):c==="userProfile"?T.jsxs(T.Fragment,{children:[he&&T.jsx(ja,{cartItemCount:M,onClick:Ee}),T.jsx(g$,{user:x,onBackClick:W,onLogout:C})]}):c==="cart"?T.jsx(y$,{onBackClick:W}):c==="catalog"?T.jsxs(T.Fragment,{children:[he&&T.jsx(ja,{cartItemCount:M,onClick:Ee}),T.jsx(l$,{onBackClick:W,onArtistClick:U,onAddToCart:R})]}):c==="artistProfile"?T.jsxs(T.Fragment,{children:[he&&T.jsx(ja,{cartItemCount:M,onClick:Ee}),T.jsx(u$,{artist:D,onBackClick:W,onAddToCart:R})]}):c==="artistsDirectory"?T.jsxs(T.Fragment,{children:[he&&T.jsx(ja,{cartItemCount:M,onClick:Ee}),T.jsx(h$,{onBackClick:W,onArtistSelect:U})]}):c==="gallery"?T.jsxs(T.Fragment,{children:[he&&T.jsx(ja,{cartItemCount:M,onClick:Ee}),T.jsx(f$,{onBackClick:W,onArtistClick:U,onAddToCart:R})]}):T.jsxs("div",{children:[T.jsxs("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-3",children:[he&&T.jsx(ja,{cartItemCount:M,onClick:Ee}),w&&T.jsx("button",{onClick:V,className:"bg-gray-800 text-white p-2 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-700 transition-colors","aria-label":"User profile",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),T.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})]}),T.jsx("div",{ref:n,children:T.jsx(jV,{onGalleryClick:de})}),T.jsx("div",{ref:e,children:T.jsx(LV,{onArtistsDirectoryClick:k})}),T.jsx("div",{ref:t,children:T.jsx(n2,{onSeeMoreClick:ne})}),T.jsx("div",{ref:r,children:T.jsx(WB,{})}),T.jsx("div",{ref:i,children:T.jsx(OV,{})}),T.jsx("div",{ref:o,children:T.jsx($B,{})})]})}const ja=({cartItemCount:n,onClick:e})=>T.jsxs("button",{onClick:e,className:"relative bg-gray-800 text-white p-2 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-700 transition-colors","aria-label":"Shopping Cart",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("circle",{cx:"9",cy:"21",r:"1"}),T.jsx("circle",{cx:"20",cy:"21",r:"1"}),T.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),n>0&&T.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",children:n>9?"9+":n})]});function _$(){try{return T.jsx(v$,{})}catch(n){return T.jsxs("div",{style:{padding:"50px",color:"red"},children:[T.jsx("h1",{children:"Error loading App"}),T.jsx("p",{children:n.toString()}),T.jsx("pre",{children:n.stack})]})}}const w$=m1.createRoot(document.getElementById("root"));w$.render(T.jsx(C1,{children:T.jsx(_$,{})}));export{ki as C,xc as E,ti as F,jf as L,Rs as _,Ic as a,qt as b,ej as c,Ps as d,S$ as e,E$ as f,Uf as g,YV as i,Dj as o,sr as r,tj as v};
